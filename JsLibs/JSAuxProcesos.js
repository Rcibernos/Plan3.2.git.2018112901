function Resd(a){if(!a){return a}else{if(a.d){return a.d}else{if(a.d===""){return a.d}else{return a}}}}function Exists(a){}function myReplace(a,b,c){return a.split(b).join(c)}function getformIdentif(){return $("#HiddenCurrentValueFormXPage").val()}function detectIE(){var e=window.navigator.userAgent;var b=e.indexOf("MSIE ");if(b>0){return parseInt(e.substring(b+5,e.indexOf(".",b)),10)}var d=e.indexOf("Trident/");if(d>0){var c=e.indexOf("rv:");return parseInt(e.substring(c+3,e.indexOf(".",c)),10)}var a=e.indexOf("Edge/");if(a>0){return parseInt(e.substring(a+5,e.indexOf(".",a)),10)}return false}function vIE(){if(detectIE()>0){return detectIE()}else{return -1}}function EsExplorer(){if(detectIE()){return detectIE()<=11}else{return false}}function EsExplorer6(){return(window.external&&typeof window.XMLHttpRequest=="undefined")}function EsExplorer7(){return(detectIE()==7)}function EsExplorer8(){return(detectIE()==8)}function EsExplorer9(){return(detectIE()==9)}function EsExplorer10(){return(detectIE()==10)}function EsExplorer11(){return(detectIE()==11)}function EsOpera(){return((navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!=-1)}function EsSafari(){return(navigator.userAgent.indexOf("Safari")!=-1)}function EsChrome(){return(navigator.userAgent.indexOf("Chrome")!=-1)}function EsFirefox(){return(navigator.userAgent.indexOf("Firefox")!=-1)}function EsEdge(){return(navigator.userAgent.indexOf("Edge")!=-1)}function StopEvent(a){if(!a){a=window.event}if(a.stopImmediatePropagation){a.stopImmediatePropagation()}if(a.stopPropagation){a.stopPropagation()}else{a.cancelBubble=true}}function lTrim(a){for(i=0;i<a.length;i++){if(a.charAt(i)!=" "){return a.substring(i)}}return""}function rTrim(a){for(i=a.length;i>=0;i--){if(a.charAt(i)!=" "){return a.substring(0,i)}}return""}function trim(a){return lTrim(rTrim(a))}function PurgarNoNumeros(a){resultado="";for(i=0;i<a.length;i++){if(a[i]>="0"&&a[i]<="9"){resutado+=a[i]}}return resultado}function Scroll_Top_Value(a){if(a){return a.scrollTop}}function Visualizacion_vistaProcForm(a){Aux___Cab=document.getElementById("TableDetalle_CabeceraProceso");for(i=0;i<Aux___Cab.cells.length;i++){Aux___id=Aux___Cab.cells[i].id.replace("Button","Div");Aux___Cont=document.getElementById(Aux___id);if(Aux___Cont){Aux___Cont.style.display="none";Aux___Cab.cells[i].className="PWTabButton"}}Aux___id=a.id.replace("Button","Div");Aux___Cont=document.getElementById(Aux___id);Aux___Cont.style.display="block";a.className="PWTabButtonPushed";document.getElementById("HiddenProFormMemoriaEstado").value=a.id}function EjecutaCalculo(a){AuxBtnCalc=document.getElementById("COMBOBTNCALC_"+a);if(AuxBtnCalc){PantallaEnEspera("");AuxBtnCalc.click()}}function CoMboVsTextBox(a){elCoMbo=document.getElementById("DROPD_"+a);elTxtBoX=document.getElementById("DROPDTXT_"+a);elHid=document.getElementById("DROPDHID_"+a);if(elCoMbo&&elTxtBoX){elTxtBoX.value=elCoMbo.options[elCoMbo.selectedIndex].text;elHid.value=elCoMbo.options[elCoMbo.selectedIndex].value;for(i=0;opt=elCoMbo.options[i];i++){if(opt.value==elHid.value){var b=opt.style.backgroundImage;CoMboCambiarIcono(elCoMbo,elTxtBoX,b)}}}}function CoMboCambiarIcono(a,b,c){if(c==""||c=="url()"){if(a.style.backgroundImage){a.style.backgroundImage=null}if(a.style.backgroundRepeat){a.style.backgroundRepeat=null}if(a.style.backgroundPosition){a.style.backgroundPosition=null}if(a.style.paddingLeft){a.style.paddingLeft=null}if(b.style.backgroundImage){b.style.backgroundImage=null}if(b.style.backgroundRepeat){b.style.backgroundRepeat=null}if(b.style.backgroundPosition){b.style.backgroundPosition=null}if(b.style.paddingLeft){b.style.paddingLeft=null}}else{if(a){a.style.backgroundImage=c;a.style.backgroundRepeat="no-repeat";a.style.backgroundPosition="5px 5px";a.style.paddingLeft="20px"}if(b){b.style.backgroundImage=c;b.style.backgroundRepeat="no-repeat";b.style.backgroundPosition="5px 5px";b.style.paddingLeft="20px"}}}function CambiaComboPadre(b,a){CoMboVsTextBox(b);AuxBtnCalc=document.getElementById("COMBOBTNCAMBIA_"+b);if(AuxBtnCalc){PantallaEnEspera("");AuxBtnCalc.click()}}function EditarSelectorAbiertoOConaltas(NombreUnicoControl,TxtToEval,Cancelar){AuxCombo=document.getElementById("DROPD_"+NombreUnicoControl);if(AuxCombo.value!="-*-"&&AuxCombo.value!="--*--"){eval(TxtToEval);return}status1="inline";status2="none";if(Cancelar){status1="none";status2="inline"}if(AuxCombo.value=="-*-"){AuxTxt=document.getElementById("COMBOABIERTOTXTVALOR_"+NombreUnicoControl);AuxImgBtn=document.getElementById("COMBOABIERTOIMGBTNVALOR_"+NombreUnicoControl);AuxImgCancel=document.getElementById("COMBOABIERTOIMGBTNCANCEL_"+NombreUnicoControl);if(AuxTxt){AuxTxt.style.display=status1;if(Cancelar){AuxTxt.value="";AuxCombo.value=""}else{AuxTxt.focus()}}if(AuxImgBtn){AuxImgBtn.style.display=status1}if(AuxImgCancel){AuxImgCancel.style.display=status1}if(AuxCombo){AuxCombo.style.display=status2}}if(AuxCombo.value=="--*--"){AuxTxt=document.getElementById("COMBOABIERTOTXTVALOR1_"+NombreUnicoControl);AuxImgBtn=document.getElementById("COMBOABIERTOIMGBTNVALOR1_"+NombreUnicoControl);AuxImgCancel=document.getElementById("COMBOABIERTOIMGBTNCANCEL1_"+NombreUnicoControl);if(AuxTxt){AuxTxt.style.display=status1;if(Cancelar){AuxTxt.value="";AuxCombo.value=""}else{AuxTxt.focus()}}if(AuxImgBtn){AuxImgBtn.style.display=status1}if(AuxImgCancel){AuxImgCancel.style.display=status1}if(AuxCombo){AuxCombo.style.display=status2}}}function combo_dropdown_Select(d,f,e,c,h){var a=document.getElementById("DROPDHID_"+d);var b=document.getElementById("DROPDTXT_"+d);var g=c.className.indexOf("icon");if(!a||!b){return}if(a.value!=f){a.value=f;b.value=c.innerText;var k=b.className.indexOf("icon");if(g>=0&&k<0){b.className+=" icon "}if(g<0&&k>=0){b.className=b.className.replace("icon","")}b.style.backgroundImage=c.style.backgroundImage;$("#DROPD_"+d).find(".selected").removeClass("selected");$("#"+e).addClass("selected");combo_dropdown_Select_VParents($("#"+e));if(!h&&a.onchange){a.onchange()}}}function combo_dropdown_Select_Multiple(d,f,e,c,g){$("#CONT_"+d).on("hide.bs.dropdown",function(){return false});var a=document.getElementById("DROPDHID_"+d);var b=document.getElementById("DROPDTXT_"+d);var h="";var k="";if(!a||!b){return}if(!$(c).hasClass("PWMultipleBorrarTodo")){if($("#"+e).hasClass("selected")){$("#"+e).removeClass("selected")}else{$("#"+e).addClass("selected")}if(!g&&a.onchange){a.onchange()}$("#DROPD_"+d).find(".selected").each(function(l){h+=$(this).children("a").attr("value")+",";k+=$(this).children("a").text()+";"});a.value=h.substring(0,h.length-1);if(k.indexOf(";")==0){b.value=k.substring(1,k.length-1)}else{b.value=k.substring(0,k.length-1)}if(b.value==";"){b.value=""}}else{$("#DROPD_"+d).find(".selected").removeClass("selected");a.value="";b.value=""}}function combo_dropdown_Select_VParents(b){try{var c=b.parent().parent().parent();if(c[0].nodeName.toUpperCase()!="LI"){return}c.removeClass("PWArbolOculto");combo_dropdown_Select_VParents(c)}catch(a){}}function DesplegarDropdownListItem(g,f,a,d){var b=document.getElementById("HiddenCurrentValueFormXPage").value;var c=document.getElementById(d);var e=""+c.value;if(c){if(c.className.indexOf("PWArbolOculto")>=0){c.className=c.className.replace("PWArbolOculto","");c.className=c.className.replace("  "," ");var h=Ajax_DesplegarDropDownItem(g,f,a,b,e,true)}else{c.className=c.className+" PWArbolOculto ";Ajax_DesplegarDropDownItem(g,f,a,b,e,false)}}}function PrepararContadorCamposTexto(){(function(a){a.fn.extend({limiter:function(c,b){a(this).on("keyup focus",function(){d(this,b)});function d(g,f){var e=g.value.length;if(e>c){g.value=g.value.substr(0,c);e=c}f.html(c-e)}d(a(this)[0],b)}})})(jQuery)}function TextAreaExpandir(a,c){a.style.display="none";var b=document.getElementById(c);b.style.display="inline";b.style.position="absolute";b.focus()}function TextAreaContraer(d,c,a){d.style.display="none";var b=document.getElementById(c);b.style.display="inline";b.value=d.value;if(a>0){if(d.value.length>a){b.value=d.value.substring(0,a)+".."}}}function teclaEvento(a){if(a.keyCode){return a.keyCode}else{return parseInt(a.which)}}function detenerEvento(a){if(a.preventDefault){a.preventDefault();a.stopPropagation();a.returnValue=false}else{if(a.stop){a.stop()}a.returnValue=false;if(a.stopPropagation){a.stopPropagation()}}}function solonum_Decimal(a,b,h,g){if(!g){g=","}codEvento=parseInt(teclaEvento(b));var c=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;var d=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;var e=(EsExplorer7()||EsExplorer6());var f=(!e);if(codEvento==99&&d){return true}if(codEvento==118&&d){return true}if(codEvento==46){if(d){return true}myval=a.value;if(myval.split(g).length>1){detenerEvento(b);return false}a.value=myval+g;detenerEvento(b);return false}if(codEvento==44){myval=a.value;if(myval.split(g).length>1){detenerEvento(b);return false}a.value=myval+g;detenerEvento(b);return false}if(codEvento==0||codEvento==9){return true}if(!(codEvento>=48&&codEvento<=57)&&!(es_caracter_de_control(codEvento))&&codEvento!=45&&codEvento!=44){detenerEvento(b);return false}if(codEvento>=48&&codEvento<=57){if(a){if(h){if(MaxEntero(a.value,h)){detenerEvento(b);return}}}}}function solonum_Entero(b,a,g){codEvento=parseInt(teclaEvento(b));var c=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;var d=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;var e=(EsExplorer7()||EsExplorer6());if(d){if(codEvento==46){return true}if(codEvento==99){return true}if(codEvento==118){return true}}if(codEvento==0||codEvento==9){return true}var f=es_caracter_de_control(codEvento);if(!(codEvento>=48&&codEvento<=57)&&!(f)&&codEvento!=45){detenerEvento(b);return}if(codEvento==46){detenerEvento(b);return}if(codEvento>=48&&codEvento<=57){if(a){if(g){if(MaxEntero(a.value,g)){detenerEvento(b);return}}}}}function solo_caracter_de_control(a){codEvento=parseInt(teclaEvento(a));if(!es_caracter_de_control(codEvento)){detenerEvento(a);return}}function es_caracter_de_control(a){if(EsExplorer()){return(a==8||a==46||a==35||a==36||a==37||a==38||a==39||a==40)}else{return(a==8||a==46||a==35||a==36||a==37||a==38||a==39||a==40)}}function findParentElement(b){if(b){var a=b.getElementById("DivCabecera");if(a){return b}}if(b.parent){return findParentElement(b.parent)}return b}function QuitarCaracteresNoNumericos(d,b,a,c){if(a===undefined){a=","}if(c===undefined){c="."}if(!d){return""}aValue=trim(d.value);aResult="";Coma=(b?"":",");for(i=0;i<aValue.length;i++){switch(aValue.charAt(i)){case"0":aResult=aResult+aValue.charAt(i);break;case"1":aResult=aResult+aValue.charAt(i);break;case"2":aResult=aResult+aValue.charAt(i);break;case"3":aResult=aResult+aValue.charAt(i);break;case"4":aResult=aResult+aValue.charAt(i);break;case"5":aResult=aResult+aValue.charAt(i);break;case"6":aResult=aResult+aValue.charAt(i);break;case"7":aResult=aResult+aValue.charAt(i);break;case"8":aResult=aResult+aValue.charAt(i);break;case"9":aResult=aResult+aValue.charAt(i);break;case a:aResult=aResult+Coma;Coma="";break;case"-":aResult=aResult+(i==0?aValue.charAt(i):"");break}}if(aValue!=aResult){d.value=aResult}aValue=aResult;aValueDec="";aValueS="";if(aValue.indexOf("-")==0){aValueS="-";aValue=aValue.substring(1)}if(aValue.indexOf(a)>=0){aValueDec=aValue.substring(aValue.indexOf(a));aValue=aValue.substring(0,aValue.indexOf(a))}if(aValue.length<=3){return}aResult=aValue.substring(aValue.length-3)+aValueDec;for(i=aValue.length-4;i>=0;i=i-3){j=i-2;if(j<0){j=0}aResult=aValue.substring(j,i+1)+c+aResult}d.value=aValueS+aResult}function solo_RangoEntero(a,b,c){if(RangoEntero(a.value,b,c)){a.className+=" PWTextBoxConErrorNum "}else{a.className=a.className.replace("PWTextBoxConErrorNum","");a.className=a.className.split("  ").join(" ")}}function RangoEntero(c,a,b){c=c.split(".").join("");c=c.split(",").join("");IntValor=parseInt(c);if(a&&b){return(IntValor>a||IntValor<b)}if(a){return(IntValor>a)}if(b){return(IntValor<b)}return false}function RangoFloat(d,b,c,a){if(a==","){d=d.split(".").join("");d=d.split(",").join(".")}else{d=d.split(",").join("")}Fltvalor=parseFloat(d);if(b&&c){return(Fltvalor>b||Fltvalor<c)}if(b){return(Fltvalor>b)}if(c){return(Fltvalor<c)}return false}function MaxEntero(b,a){b=b.split(".").join("");b=b.split(",").join("");b=b.split("-").join("");return b.length>=a}function solonum_Txt(b,a){codEvento=parseInt(teclaEvento(b));if((codEvento==99)&&(b.ctrlKey)){return true}if((codEvento==118)&&(b.ctrlKey)){return true}if((codEvento==8)||(codEvento==9)){return true}if(!(codEvento>=48&&codEvento<=57)){detenerEvento(b);return}}function controlWeb_AbrirURLde(a){urlcontrol=document.getElementById(a);if(urlcontrol){urlcontrol.value=trim(urlcontrol.value);if(urlcontrol.value!=""){window.open(Aniadirhttp(urlcontrol.value),"","")}}}function controlWeb_MailTo(a){mailcontrol=document.getElementById(a);if(mailcontrol){mailcontrol.value=trim(mailcontrol.value);if(mailcontrol.value!=""){document.location="mailto:"+mailcontrol.value}}}function Aniadirhttp(a){cadurl=a.toLowerCase();if(cadurl.indexOf("www.")==0){return"http://"+a}return a}function AveriguarLetraNif(a){if(isNaN(a)){return""}cadena="TRWAGMYFPDXBNJZSQVHLCKET";posicion=a%23;letra=cadena.substring(posicion,posicion+1);return letra}function completarCampoLetraNif(b,a){Elemento=document.getElementById(a);Elemento.value=AveriguarLetraNif(b.value)}function ValidarCampoCifNif(a,b){if(teclaEvento(event)==37||teclaEvento(event)==39){return}Control=document.getElementById(a);Elemento=document.getElementById(b);EsValido=true;if(Elemento.value==1){EsValido=validarCif(Control.value);if(EsValido&&Control.value!=""){Control.value=Control.value.toUpperCase()}}if(Elemento.value==2){EsValido=validarNif(Control.value);if(EsValido&&Control.value!=""){Control.value="000000000".substring(0,9-Control.value.length)+Control.value.toUpperCase()}}if(Elemento.value==3){EsValido=validarNie(Control.value);if(EsValido&&Control.value!=""){Control.value=Control.value.toUpperCase()}}if(EsValido){Control.style.color="#000000"}else{Control.style.color="#FF0000"}}function validarNif(a){a=trim(a.toUpperCase());dni=a.substring(0,a.length-1);let=a.charAt(a.length-1);if(dni.length>8){return false}if(isNaN(dni)){return false}else{if(AveriguarLetraNif(dni)==let){return true}}return false}function validarCif(d){var c=0;var b=0;var f;var h;var k;var g=new Array("J","A","B","C","D","E","F","G","H","I");var l;texto=trim(d.toUpperCase());var e=new RegExp(/^[ABCDEFGHKLMNPQS]\d\d\d\d\d\d\d[0-9,A-J]$/g);if(!e.exec(texto)){return false}h=texto.substr(8,1);for(var a=1;a<7;a++){l=(2*parseInt(texto.substr(a++,1))).toString()+"0";b+=parseInt(l.substr(0,1))+parseInt(l.substr(1,1));c+=parseInt(texto.substr(a,1))}l=(2*parseInt(texto.substr(a,1))).toString()+"0";b+=parseInt(l.substr(0,1))+parseInt(l.substr(1,1));f=(c+b).toString();k=parseInt(f.substr(f.length-1,1));k=(10-k).toString();if(k==10){k=0}if((h==k)||(h==g[k])){return true}else{return false}}function validarNie(a){a=trim(a.toUpperCase());if(a.length<=2){return false}NIF=a.substring(1,a.length-2);X=a.substring(0,1);if(X!="X"){return false}return validarNif(NIF)}function DesplazamientoCursorCCC_(a,c,b,d){tecla=teclaEvento(event);if((tecla==37||tecla==8)&&b!=""&&posicionCursor(a)==0){detenerEvento(event);ElementAnt=document.getElementById(b);ElementAnt.focus();ElementAnt.select();return}}function ValidarCampoCCC_Banco(a,b,e,d,c){ValidarCampoCCC(b,e,d,c);if(posicionCursor(a)==4){Element=document.getElementById(e);Element.focus();Element.select()}}function ValidarCampoCCC_Sucursal(a,b,e,d,c){ValidarCampoCCC(b,e,d,c);if(posicionCursor(a)==4){Element=document.getElementById(d);Element.focus();Element.select()}}function ValidarCampoCCC_Control(a,b,e,d,c){ValidarCampoCCC(b,e,d,c);if(posicionCursor(a)==2){Element=document.getElementById(c);Element.focus();Element.select()}}function ValidarCampoCCC(a,d,c,b){CBanco=document.getElementById(a);CSucursal=document.getElementById(d);CDC=document.getElementById(c);CCuenta=document.getElementById(b);EsValido=ValidarCCC(CBanco.value,CSucursal.value,CDC.value,CCuenta.value);if(EsValido){CBanco.style.color="#000000";CSucursal.style.color="#000000";CDC.style.color="#000000";CCuenta.style.color="#000000"}else{CBanco.style.color="#FF0000";CSucursal.style.color="#FF0000";CDC.style.color="#FF0000";CCuenta.style.color="#FF0000"}}function ValidarCCC(a,d,c,b){if(a==""||d==""||c==""||b==""){return false}if(a.length!=4||d.length!=4||c.length!=2||b.length!=10){return false}if(!numericoCCC(a)||!numericoCCC(d)||!numericoCCC(c)||!numericoCCC(b)){return false}if(!(obtenerDigitoCCC("00"+a+d)==parseInt(c.charAt(0)))||!(obtenerDigitoCCC(b)==parseInt(c.charAt(1)))){return false}return true}function obtenerDigitoCCC(a){valores=new Array(1,2,4,8,5,10,9,7,3,6);control=0;for(i=0;i<=9;i++){control+=parseInt(a.charAt(i))*valores[i]}control=11-(control%11);if(control==11){control=0}else{if(control==10){control=1}}return control}function numericoCCC(a){for(var c=0;c<a.length;c++){var b=a.charAt(c);if(b<"0"||b>"9"){return false}}return true}function posicionCursor(d){var c=-1;if(document.selection&&(document.selection!="undefined")){var a=document.selection.createRange();var b=0;while(a.move("character",-1)){b++}c=b}else{if(d.selectionStart>=0){c=d.selectionStart}}return c}function ConfirmarBorradoDeNombre(c,a,b){AuxHidTxt=document.getElementById(a);if(!AuxHidTxt){return}if(c.value==""){if(AuxHidTxt.value==""){return}alert(b);c.value=AuxHidTxt.value}else{if(AuxHidTxt.value==""){c.value="";return}}}function AjustarTamanoImagen(b,a,c){ControlImagen=document.getElementById(c);if(ControlImagen.src==""){ControlImagen.style.display="none"}else{ControlImagen.style.display="inline"}ancho=b;alto=(b*ControlImagen.offsetHeight)/ControlImagen.offsetWidth;tope=(a-alto)/2;izquierda=0;if(tope<0){alto=a;ancho=(a*ControlImagen.offsetWidth)/ControlImagen.offsetHeight;tope=0;izquierda=(b-ancho)/2}ControlImagen.style.marginTop=""+tope+"px";ControlImagen.style.marginLeft=""+izquierda+"px";ControlImagen.style.width=""+ancho+"px";ControlImagen.style.height=""+alto+"px"}function MostrarFileUploadImagen(a,b){AuxTablabotones=document.getElementById(b);AuxContenedorImagen=document.getElementById(a);AuxTablabotones.style.display="table"}function OcultarFileUploadImagen(a){Tablabotones=document.getElementById(a);if(Tablabotones){Tablabotones.style.display="none"}}function SelectRowCampoForm(c,b,a){HIDDENIDSEL=document.getElementById("CAMPOFORM_HIDDENIDSEL"+b);HIDDENSTYLESEL=document.getElementById("CAMPOFORM_HIDDENSTYLESEL"+b);BTEDITAR=document.getElementById("CAMPOFORM_BTEDITAR"+b);ROWANTERIORSELECCIONADO=document.getElementById("CAMPOFORM_TR_"+b+HIDDENIDSEL.value);if(ROWANTERIORSELECCIONADO){if(ROWANTERIORSELECCIONADO.value!=a){ROWANTERIORSELECCIONADO.className=HIDDENSTYLESEL.value}}HIDDENIDSEL.value=a;HIDDENSTYLESEL.value=c.className;c.className=c.className.replace("PWTableRowSelected","")+" PWTableRowSelected ";BTEDITAR.click()}function SelectRowCampoForm_(b,a){var c=b.id.replace("CAMPOFORM_TR2_","CAMPOFORM_TR_");HIDDENSTYLESEL=document.getElementById("CAMPOFORM_HIDDENSTYLESEL"+a);BTEDITAR=document.getElementById("CAMPOFORM_BUTTONROWINFO"+c.replace("CAMPOFORM_TR_",""));idrow=BTEDITAR.id.replace("CAMPOFORM_BUTTONROWINFO"+a,"");ROWANTERIORSELECCIONADO=document.getElementById("CAMPOFORM_TR_"+a+HIDDENIDSEL.value);if(ROWANTERIORSELECCIONADO){if(ROWANTERIORSELECCIONADO.value!=idrow){ROWANTERIORSELECCIONADO.className=HIDDENSTYLESEL.value}}HIDDENSTYLESEL.value=b.className;b.className=b.className.replace("PWTableRowSelected","")+" PWTableRowSelected ";HIDDENSTYLESEL.value=idrow;if(BTEDITAR){PantallaEnEspera("");BTEDITAR.click()}}function SelectRowCampoForm_Async(b,a){}function SelectRowSiSeleccionado(a){HIDDENIDSEL=document.getElementById("CAMPOFORM_HIDDENIDSEL"+a);if(HIDDENIDSEL){if(HIDDENIDSEL.value!=""){ROWSEL=document.getElementById("CAMPOFORM_TR_"+a+HIDDENIDSEL.value);if(ROWSEL){ROWSEL.className=ROWSEL.className.replace("PWTableRowSelected","")+" PWTableRowSelected "}}}}function OrderColumnCampoForm(b,a){HIDDENNUMORDER=document.getElementById("CAMPOFORM_HIDDENNUMORDER"+a);BTORDENAR=document.getElementById("CAMPOFORM_BTORDENAR"+a);if(HIDDENNUMORDER&&BTORDENAR){HIDDENNUMORDER.value=b;BTORDENAR.click()}}function SelectRowCampoFormButton_(c,a,b){}function SelectRowCampoFormButton_(c,a,b){HIDDENIDSEL=document.getElementById("CAMPOFORM_HIDDENIDSEL_IDSEL4BUTTON"+c);HIDDENBUTTON=document.getElementById(b);if(HIDDENIDSEL){HIDDENIDSEL.value=a;if(HIDDENBUTTON){HIDDENBUTTON.click()}}}function AjustarTamanioCampoFormulario(b,a){}function hora_dropdown_Select(b,a){$("#"+b).val(($(a).text())).change()}function show_timezoneList(){var a=$(this).data("ctdt");var b=$(this).data("cthr");var c=$(this).data("cts");if(a&&b){var e=$("#"+a).val()+" "+$("#"+b).val();var d=$("#"+a).val();var f=$("#"+b).val();if(d&&f){$.ajax({myAdicionalInfo:this,type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/show_timezoneList",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({dt:d,hr:f,s:(c==1?true:false)}),success:function(g){g=Resd(g);if(g){$(this.myAdicionalInfo).attr("title",g);$(this.myAdicionalInfo).tooltip({trigger:"manual"});$(this.myAdicionalInfo).tooltip("show")}},error:function(g){TrataErrAjax("AJ100",g)},timeout:10000,async:true})}}}function hide_timezoneList(){$(this).tooltip("destroy")}function PantallaEnEsperaEval(TxtEval){PantallaEnEspera("");eval(TxtEval)}function PantallaEnEspera(a){a(a,500)}function PantallaEnEspera(a,b){if(a!=""){if(!confirm(a)){return false}}if(!b){b=500}if(b>0){IdTimer=setTimeout(ShowPantallaEnEspera,b)}else{ShowPantallaEnEspera()}return true}function tmpdis(a){ctrl=document.getElementById(a);if(ctrl){if(!ctrl.disabled){ctrl.disabled=true;IdTimer=setTimeout(function(){tmpdis2(ctrl)},3000)}}}function tmpdis2(){ctrl.disabled=false}function HidePantallaEnEspera(){Aux=document.getElementById("DivCapaRecarga");if(Aux){Aux.style.display="none"}}function ShowPantallaEnEspera(){try{CAPARECARGA=document.getElementById("DivCapaRecarga");if(CAPARECARGA){W=MaxOffsetWidth();H=MaxOffsetHeight();CAPARECARGA.style.width=""+W+"px";CAPARECARGA.style.height=""+(H*2)+"px";CAPARECARGA.style.top="0px";CAPARECARGA.style.left="0px";CAPARECARGA.style.display="inline"}}catch(a){}return true}function Centrar_Wait(a){W=getWidth();H=getHeight();Aux_PosScroll_Value=0;Aux_PosScroll_control=document.getElementById("INFO_position_scroll_info");if(Aux_PosScroll_control){Aux_PosScroll_Value=parseInt((Aux_PosScroll_control.value==""?"0":Aux_PosScroll_control.value))}WH=getScreenHeight();if(isNaN(WH)){WH=H}newTop=Aux_PosScroll_Value+(WH-a.offsetHeight)/2;newLeft=(W-a.offsetWidth)/2;if(newTop<(25+Aux_PosScroll_Value)){newTop=(25+Aux_PosScroll_Value)}if(newLeft<0){newLeft=0}a.style.top=""+(newTop)+"px";a.style.left=""+(newLeft)+"px";if(a.offsetTop<0){a.style.top="50px"}if(a.offsetLeft<0){a.style.left="0px"}a.style.visibility="visible"}function OcultarCapaMensaje(){var a=document.getElementById("DivCapaMensaje");if(a){a.style.display="none"}}function ShowPantallaMensaje(a){if(a==null){return}if(a.trim()==""){return}IdTimer=setTimeout(OcultarCapaMensaje,3000);W=getWidth();H=getHeight();MENSAJE=document.getElementById("DivCapaMensaje");if(MENSAJE){document.getElementById("DivCapaMensaje_TDMensaje").innerHTML=a;MENSAJE.style.display="inline";MENSAJE.style.left=""+(W/2)-(MENSAJE.offsetWidth/2)+"px";window.focus()}else{window.focus();alert(a)}}function showAlert(a){alert(a)}function showWarning(a){alert(a)}function showError(a){alert(a)}function showInfo(a){ShowPantallaMensaje(a)}function Cambiar__doPostBack(){}function MostrarMenu(a,c,b){b=b||window.event;b.stopPropagation();ControlMenu=document.getElementById(c);if(!(ControlMenu)){return}if(ControlMenu.style.display=="inline"){OcultarMenu(c);return}$("#"+c).click(function(d){d.stopPropagation()});$("html").click(function(){OcultarMenu(c)});ControlMenu.style.position="absolute";AuxTop=getAbsoluteElementTopPosition(a);AuxLeft=getAbsoluteElementLeftPosition(a);ControlMenu.style.top=""+(AuxTop+a.offsetHeight)+"px";ControlMenu.style.left=""+AuxLeft+"px";ControlMenu.style.display="inline";ControlMenu.style.zIndex="301"}function OcultarMenu(a){$("#"+a).hide();$("html").unbind("click")}function OcultarElemento(a){$("#"+a).hide()}function AbrirVentanaTruncada(a,b,c){if(c==null){c="toolbar=no,menubar=no,resizable=yes,scrollbars=yes,fullscreen=0,location=no,width=800,height=500"}window.open(a,b,c)}function RRRalentizar(){for(i=0;i<999;i++){for(j=0;j<999;j++){}}}function GetFrame(a){for(i=0;i<window.frames.length;i++){if(window.frames[i].id==a){return window.frames[i]}}}function SalirSinGrabar(d,c,f,h,g,e,b,a){AuxIDC=document.getElementById(d);if(AuxIDC){if(AuxIDC.value==""||AuxIDC.value==null||AuxIDC.value=="0"){return true}else{return confirm(c)}}return true}function ComprobarAntesDeCambiarDePagina(c,e,b,f,h,g,d,a){if(SalirSinGrabar(c,b,f,h,g,d,a)){if(e){location.href=e;ShowPantallaEnEspera()}else{return true}}return false}function ConfirmarCambiosAntesDeCerrar(d,b,c,f,h,g,e,a){return ConfirmarCambiosAntesDeCerrar_TK(d,b,c,null,f,h,g,e,a)}function ConfirmarCambiosAntesDeCerrar_TK(d,b,c,k,f,h,g,e,a){if(SalirSinGrabar(d,c,f,h,g,e,a)){if(b){window.close();if(k){location.href=k}}else{return true}}return false}function ConfirmarCambiosAntesDeEjecutar_OLD(b,a){if(!a){a="Si cierra sin grabar los cambios se perderán"}AuxIDC=document.getElementById(b);if(AuxIDC){if(AuxIDC.value!=""&&AuxIDC.value!=null&&AuxIDC.value!="0"){if(!(confirm(a))){return false}}}PantallaEnEspera("");return true}function ConfirmarCambiosAntesDeEjecutarXId(c,d,f,h,g,e,b,a,k){if(ConfirmarCambiosAntesDeEjecutar_OLD(c,d)){$("#"+b).click()}}function ConfirmarCambiosAntesDeEjecutarXEval(IdIndicadorCambios,mensaje,title,txtOk,txtCncl,mode,ifOk,ifCancel,WaitScEEN){if(ConfirmarCambiosAntesDeEjecutar_OLD(IdIndicadorCambios,mensaje)){eval(ifOk)}}function CerrarSiAbierta(a){}function ElControlHaSidoTocado(a){AuxHdn=document.getElementById(a);if(AuxHdn){AuxHdn.value="1"}}function MarcaDeSeguimiento(c,f,a,b){var d;var e={IdAgenda:a,Marca:f};$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/AuxMarca",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),dataType:"json",async:false,success:function(g){d=Resd(g)},error:function(g){TrataErrAjax("AJ001",g)}});ElementoAlt=document.getElementById(b);if(d&&ElementoAlt){c.style.display="none";ElementoAlt.style.display="inline"}}function MarcaDeSeguimientoCampoForm(b,a,c){var d=false;var e={idagenda:a,marca:c};$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/agendaMarcaCampoForm",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),dataType:"json",async:false,success:function(f){d=Resd(f)},error:function(f){TrataErrAjax("AJ002",f)}});if(d){$("#CAMPOFORM_BTMARCA"+b+"_"+a).toggle();$("#CAMPOFORM_BTDESMARCA"+b+"_"+a).toggle()}}function PreviewAgendaIfrCampoform(e,c){var o=document.getElementById("TRPrevieW_"+e+c);var m=document.getElementById("TDPrevieW_"+e+c);var g=document.getElementById("CAMPOFORM_TR_"+e+c);var b=document.getElementById("CAMPOFORM_BTNPREVIEW"+e+"_"+c);var a=false;if(o){if(o.style.display=="none"){a=true}}var k=document.getElementById("CAMPOFORM_TABLADATOS"+e);var l=k.getElementsByTagName("tr");for(i=0;i<l.length;i++){if(l[i].id){if(l[i].id.indexOf("TRPrevieW")>=0){l[i].style.display="none";var n=l[i].cells[0];if(n){if(n.firstChild){n.removeChild(n.firstChild)}}}else{if(l[i].id.indexOf("TRListaActiv")>=0){var n=document.getElementById("CAMPOFORM_BTNPREVIEW"+l[i].id.replace("CAMPOFORM_TR_",""));if(n){n.className=n.className.replace("PWPreviewClose","PWPreviewOpen")}}}}}if(a){if(o&&m){var f=false;var h={idagenda:c};$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/agendaVistoCampoForm",contentType:"application/json; charset=utf-8",data:JSON.stringify(h),dataType:"json",async:false,success:function(p){f=Resd(p)},error:function(p){TrataErrAjax("AJ003",p)}});if(f){g.style.fontWeight="normal"}o.style.display="table-row";var d=document.createElement("iframe");d.src="./WFProcesoPrint.aspx?id="+c+"&preview=1";d.style.width="100%";d.style.height="100%";d.style.border="0";d.id="iframePreview"+e+c;m.appendChild(d);d.scrolling="auto";o.style.height="500px";o.style.minHeight="500px"}if(b){b.className=b.className.replace("PWPreviewOpen","PWPreviewClose")}if(g){g.className=g.className.replace("rowdestacado","")}}else{if(b){b.className=b.className.replace("PWPreviewClose","PWPreviewOpen")}}}function MostrarEditorDeTextoDelSelectorDeEmpleados(b,a){Editar="none";Normal="inline";if(b){Editar="inline";Normal="none"}SEmpTXT=document.getElementById("TXT_"+a);SEmpIMGBTBORRAR=document.getElementById("IMGBTBORRAR_"+a);SEmpIMGBTOEDIT=document.getElementById("IMGBTOEDIT_"+a);SEmpTXTEDIT=document.getElementById("TXTEDIT_"+a);SEmpIMGBTOEDITCANCEL=document.getElementById("IMGBTOEDITCANCEL_"+a);if(SEmpTXT){SEmpTXT.style.display=Normal}if(SEmpIMGBTBORRAR){SEmpIMGBTBORRAR.style.display=Normal}if(SEmpIMGBTOEDIT){SEmpIMGBTOEDIT.style.display=Normal}if(SEmpTXTEDIT){SEmpTXTEDIT.style.display=Editar;if(Editar=="none"){SEmpTXTEDIT.value=""}else{SEmpTXTEDIT.focus()}}if(SEmpIMGBTOEDITCANCEL){SEmpIMGBTOEDITCANCEL.style.display=Editar}}function getWindowDataIfr(e,c){var d=document.getElementById(c).contentWindow.document||document.getElementById(c).contentDocument;var g,b,h,k,f,a;if(typeof window.frames[e].innerWidth!="undefined"){g=window.frames[e].innerWidth;b=window.frames[e].innerHeight}else{if(typeof d.documentElement!="undefined"&&typeof d.documentElement.clientWidth!="undefined"&&d.documentElement.clientWidth!=0){g=d.documentElement.clientWidth;b=d.documentElement.clientHeight}else{g=d.getElementsByTagName("body")[0].clientWidth;b=d.getElementsByTagName("body")[0].clientHeight}}h=window.frames[e].pageXOffset||(d.documentElement.scrollLeft+d.body.scrollLeft);k=window.frames[e].pageYOffset||(d.documentElement.scrollTop+d.body.scrollTop);f=Math.max(d.documentElement.scrollWidth,d.body.scrollWidth,g);a=Math.max(d.documentElement.scrollHeight,d.body.scrollHeight,b);return[g,b,h,k,f,a]}function resizeIframe(a,d){var b=document.getElementById(a);b.height=null;b.width=null;window.location="#";b.scrolling="no";var c=getWindowDataIfr(d,a);b.style.height=""+(c[5]+100)+"px";b.style.width=""+(c[4]+100)+"px"}function addEvent(c,a,b,d){if(c.addEventListener){c.addEventListener(a,b,d)}else{if(c.attachEvent){c.attachEvent("on"+a,b)}else{c["on"+a]=b}}}function getIfrmHijo(a){var b=document.getElementsByTagName("iframe");var c=b[b.length-1];c.id="PruebaIFR";c.name="PruebaIFR";return c}function set_cControlCampoLabel(e,g,f,d){try{var a=document.getElementById("Label_"+e);var b=document.getElementById("LabelTxt_"+e);if(d){$("#LabelTxt_"+e).text(d)}if(a){if(g==1){a.style.display="table"}else{if(g==0){a.style.display="none"}}}}catch(c){}}function faux_quitarchrObl(a,b){if(a.indexOf(b)==0){return a.replace(b,"")}return a}function faux_aniadirchrObl(a,b){if(a.indexOf(b)==0){return a}return b+a}function PonerClassError(b,c){QuitarClassError(b);var a="";b.className=b.className+" PWTextBoxConError"+(c>=1&&c<=3?c:"")+" "}function QuitarClassError(a){a.className=a.className.replace("PWTextBoxConError1","");a.className=a.className.replace("PWTextBoxConError2","");a.className=a.className.replace("PWTextBoxConError3","");a.className=a.className.replace("PWTextBoxConError","")}function get_cControlCampoInputText(a){return get_cControlCampoInputText_Aux("TXT_",a)}function get_cControlCampoInputText_Aux(b,a){var c=document.getElementById(b+a);if(c){return c.value}return null}function set_cControlCampoInputText(g,k,c,a,l,e,h,d,f,b){set_cControlCampoInputText_Aux("TXT_","CONT_",g,k,c,a,l,e,h,d,f,b)}function set_Visible_ResponsiveCell(a,b){if(b<0){return}if(a){if(a.parentElement){if(a.parentElement.className){if(a.parentElement.className.indexOf("PWResponsiveCell")>0){if(b==1){a.parentElement.style.display="block"}else{a.parentElement.style.display="none"}}}}}}function set_cControlCampoInputText_Aux(m,n,k,p,e,a,q,g,l,f,h,c){set_cControlCampoLabel(k,q,l,f);var o=document.getElementById(m+k);var b=document.getElementById(n+k);var d=document.getElementById("TXTFk_"+k);if(b&&c){b.className=c}if(o){if(p!="[@pgs!notset]"){o.value=p;if(d){d.value=p}}if(e==1){o.readOnly=false;o.className=o.className.replace("PWTextBoxDisabled","")}else{if(e==0){o.readOnly=true;o.className=o.className.replace("PWTextBoxDisabled","");o.className=o.className+" PWTextBoxDisabled "}}if(a==1&&(!o.readonly)){o.focus()}set_Visible_ResponsiveCell(b,q);if(q==1){if(o){if(d){o.style.display="inline"}else{o.style.display="inline"}}if(b){b.style.display="table"}}else{if(q==0){if(o){o.style.display="none"}if(b){b.style.display="none"}}}if(g&&g!=""){if(g!="[@pgs!notset]"){alert(g)}if(o.className.indexOf("PWTextBoxConError")<0){PonerClassError(o,h)}}else{QuitarClassError(o)}if(l==1){if(o.className.indexOf("PWTextBoxDisabled")<0){o.className=o.className.replace("PWTextBoxObligatorio","");o.className=o.className+" PWTextBoxObligatorio"}}else{if(l==0){o.className=o.className.replace("PWTextBoxObligatorio","")}}if(d){d.className=o.className;d.readOnly=o.readOnly;if(o.style.display=="none"){d.style.display="none"}else{d.style.display=o.style.display;o.style.display="none"}}}}function set_cControlCampoInputTextGroup(h,m,d,a,n,f,k,e,g,c){set_cControlCampoInputText(h,m,d,a,n,f,k,e,g,c);var l=document.getElementById(Prefijo+h);var b=document.getElementById(PrefijoContenedor+h)}function get_cControlCampoFecha(a){return get_cControlCampoInputText_Aux("DATTXT_",a)}function set_cControlCampoFecha(NombreControlUnico,valor,escritura,conFoco,visible,mensaje,obligatorio,label,NivelErr,cssClass){set_cControlCampoInputText_Aux("DATTXT_","CONT_",NombreControlUnico,valor,escritura,conFoco,visible,mensaje,obligatorio,label,NivelErr,cssClass);var textBox=document.getElementById("DATTXT_"+NombreControlUnico);if(escritura==1){eval("ActivarFecha"+NombreControlUnico+"();");textBox.disabled=false}else{if(escritura==0){eval("DesactivarFecha"+NombreControlUnico+"();")}}}function get_cControlCampoHora(a){return get_cControlCampoInputText_Aux("DATTXT_",a)}function set_cControlCampoHora(NombreControlUnico,valor,escritura,conFoco,visible,mensaje,obligatorio,label,NivelErr,cssClass){set_cControlCampoInputText_Aux("DATTXT_","CONT_",NombreControlUnico,valor,escritura,conFoco,visible,mensaje,obligatorio,label,NivelErr,cssClass);var textBox=document.getElementById("DATTXT_"+NombreControlUnico);if(escritura==1){eval("ActivarHora"+NombreControlUnico+"();");textBox.disabled=false}else{if(escritura==0){eval("DesactivarHora"+NombreControlUnico+"();");textBox.disabled=true}}}function set_cControlCampoHoraDD(k,o,e,b,p,g,l,f,h,d){var n=$("#DATTXT_"+k);var m=$("#DD_"+k);var c=$("#CONT_"+k);var a=c.attr("class");set_cControlCampoHora(k,o,e,b,p,g,l,f,h,d);set_cControl_AjustarHoraParaDD(c,m,n,a,e,b,p,g,l,h)}function set_cControl_AjustarHoraParaDD(c,h,k,a,d,b,l,e,g,f){c.attr("class",a);if(k.length>0&&h.length>0){if(d>=0){k.removeClass("PWTextBoxDisabled");h.removeClass("PWTextBoxDisabled");if(d==0){h.addClass("PWTextBoxDisabled")}}if(e&&e!=""){if(k.className.indexOf("PWTextBoxConError")<0){PonerClassError(h.get(0),f)}}else{QuitarClassError(h.get(0))}if(g>=0){k.removeClass("PWTextBoxObligatorio");h.removeClass("PWTextBoxObligatorio");if(g==1){if(h.attr("class").indexOf("PWTextBoxDisabled")<0){h.addClass(" PWTextBoxObligatorio")}}}}}function get_cControlCampoFechaHora(c){var a=get_cControlCampoInputText_Aux("DATTXT_",c);var b=get_cControlCampoInputText_Aux("DATTXT_",c+"_Hora");return a+" "+b}function set_cControlCampoFechaHora(NombreControlUnico,valor,escritura,conFoco,visible,mensaje,obligatorio,label,NivelErr,cssClass){set_cControlCampoLabel(NombreControlUnico,visible,obligatorio,label);var textBoxF=document.getElementById("DATTXT_"+NombreControlUnico);var textBoxH=document.getElementById("DATTXT_"+NombreControlUnico+"_Hora");var contenedor=document.getElementById("CONT_"+NombreControlUnico);if(contenedor&&cssClass){contenedor.className=cssClass}if(textBoxF&&textBoxH){if(valor!="[@pgs!notset]"){var arrValor=valor.split("|");textBoxF.value=arrValor[0];if(arrValor.length>1){textBoxH.value=arrValor[1]}else{textBoxH.value=""}}if(escritura==1){textBoxF.readOnly=false;textBoxF.className=textBoxF.className.replace("PWTextBoxDisabled","");textBoxH.readOnly=false;textBoxH.className=textBoxH.className.replace("PWTextBoxDisabled","");eval("ActivarFechaHora"+NombreControlUnico+"();");textBoxH.disabled=false;textBoxF.disabled=false}else{if(escritura==0){textBoxF.readOnly=true;textBoxF.className=textBoxF.className.replace("PWTextBoxDisabled","");textBoxF.className=textBoxF.className+" PWTextBoxDisabled ";textBoxH.readOnly=true;textBoxH.className=textBoxH.className.replace("PWTextBoxDisabled","");textBoxH.className=textBoxH.className+" PWTextBoxDisabled ";eval("DesactivarFechaHora"+NombreControlUnico+"();");textBoxH.disabled=true;textBoxF.disabled=true}}if(conFoco==1&&(!textBoxF.readonly)){textBoxF.focus()}set_Visible_ResponsiveCell(contenedor,visible);if(visible==1){if(textBoxF){textBoxF.style.display="inline"}if(textBoxH){textBoxH.style.display="inline"}if(contenedor){contenedor.style.display="inline"}}else{if(visible==0){if(textBoxF){textBoxF.style.display="none"}if(textBoxH){textBoxH.style.display="none"}if(contenedor){contenedor.style.display="none"}}}if(mensaje&&mensaje!=""){if(mensaje!="[@pgs!notset]"){alert(mensaje)}if(textBoxF.className.indexOf("PWTextBoxConError")<0){PonerClassError(textBoxF,NivelErr)}if(textBoxH.className.indexOf("PWTextBoxConError")<0){PonerClassError(textBoxH,NivelErr)}}else{QuitarClassError(textBoxF);QuitarClassError(textBoxH)}if(obligatorio==1){if(textBoxF.className.indexOf("PWTextBoxDisabled")<0){textBoxF.className=textBoxF.className.replace("PWTextBoxObligatorio","");textBoxF.className=textBoxF.className+" PWTextBoxObligatorio"}if(textBoxH.className.indexOf("PWTextBoxDisabled")<0){textBoxH.className=textBoxH.className.replace("PWTextBoxObligatorio","");textBoxH.className=textBoxH.className+" PWTextBoxObligatorio"}}else{if(obligatorio==0){textBoxF.className=textBoxF.className.replace("PWTextBoxObligatorio","");textBoxH.className=textBoxH.className.replace("PWTextBoxObligatorio","")}}}}function set_cControlCampoFechaHoraDD(k,o,e,b,p,g,l,f,h,d){var n=$("#DATTXT_"+k+"_Hora");var m=$("#DD_"+k);var c=m.parent();var a=c.attr("class");set_cControlCampoFechaHora(k,o,e,b,p,g,l,f,h,d);set_cControl_AjustarHoraParaDD(c,m,n,a,e,b,p,g,l,h)}function get_cControlCampoCCC(a){return $("#TXTBANCO_"+a).val()+$("#TXTSUCURSAL_"+a).val()+$("#TXTDCONTROL_"+a).val()+$("#TXTCUENTA_"+a).val()}function get_cControlCampoCCCCorto(a){return myReplace(myReplace(myReplace($("#TXT_"+a).val().trim(),",",""),".",""),"-","")}function set_cControlCampoCCC(g,l,c,a,m,e,h,d,f,b){var k=1}function set_cControlCampoCCCCorto(g,l,c,a,m,e,h,d,f,b){var k=1}function get_cControlCampoCheckBox(b){var a=document.getElementById("CHK_"+b);if(a){return(a.checked?1:0)}return null}function set_cControlCampoCheckBox(k,m,e,b,n,g,l,f,h,d){set_cControlCampoLabel(k,n,l,f);var a=document.getElementById("CHK_"+k);var c=a.parentNode;if(a){if(m!="[@pgs!notset]"){a.checked=(m==0?false:true)}if(e==1){a.disabled=false;if(c){c.className=c.className.replace("PWCheckBoxDisabled","");c.className=c.className.replace("PWCheckBox","");c.className="PWCheckBox "+c.className}}else{if(e==0){a.disabled=true;if(c){c.className=c.className.replace("PWTextBoxDisabled","");c.className=c.className.replace("PWCheckBox","");c.className="PWCheckBoxDisabled "+c.className}}}if(b==1&&(!a.disabled)){a.focus()}set_Visible_ResponsiveCell(c,n);if(n==1){if(c){c.style.display="inline"}}else{if(n==0){if(c){c.style.display="none"}}}if(g&&g!=""){if(g!="[@pgs!notset]"){alert(g)}if(a.className.indexOf("PWTextBoxConError")<0){PonerClassError(a,NivelErr)}}else{QuitarClassError(a)}}}function get_cControlCampoSelectorDeArchivo(a){return get_cControlCampoInputText_Aux("TXT_",a)}function set_cControlCampoSelectorDeArchivo(g,l,c,a,m,e,h,d,f,b,k){if(k!=1){l="[@pgs!notset]"}set_cControlCampoInputText_Aux("TXT_","CONTROLSELECTORARCHIVOS_",g,l,c,a,m,e,h,d,f,b)}function overDropFile(b,a){a.preventDefault();a.stopPropagation();$(b).addClass("PWDropFileAllow")}function leaveDropFile(b,a){a.preventDefault();a.stopPropagation();$(b).removeClass("PWDropFileAllow")}function DropFile(k,a){a.preventDefault();a.stopPropagation();ShowLoadField(k.id);var l=a.dataTransfer.files.length;var d;var m="";var b=false;if(l>0){var g=new FormData();var c=a.dataTransfer.files[0];var h=document.getElementById("HiddenCurrentValueFormXPage").value;d=c.name;g.append("File",c,d);g.append("idvsesion",h);g.append("nombrecontrol",$(k).attr("data-ctrl"));g.append("nombreform",$(k).attr("data-nbform"));g.append("idregistro",$(k).attr("data-idreg"));ShowPantallaEnEspera();$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/LoadFileByDrop",contentType:false,processData:false,data:g,dataType:"text xml ",async:false,success:function(e){m=Resd(e);m=$(m).children().first().text();if(m.indexOf("ERROR: ")==0){b=true}},error:function(e){TrataErrAjax("AJ150",e)}});if(b){alert(m+"  ["+d+"]")}else{var f=m.split("|");$(k).find("input[type='text']").val(f[0]);if(f.length>1){if(f[1].endsWith(".pdf")||f[1].endsWith(".pdfx")){$(k).parent().find("object").first().attr("data",f[1]);$(k).parent().find("object").first().show()}else{$(k).siblings().find("img").first().attr("src",f[1])}}}HidePantallaEnEspera()}$(k).removeClass("PWDropFileAllow");HideLoadField()}function DropFilesForm(b,a){return pDropFilesForm(b,a,"LoadMasiveFiles")}function pDropFilesForm(k,a,d){a.preventDefault();a.stopPropagation();var m=a.dataTransfer.files.length;var c;var n="";var b=false;if(m>0){var h=document.getElementById("HiddenCurrentValueFormXPage").value;var f=new FormData();f.append("idvsesion",h);f.append("nombrecontrol",$(k).attr("data-ctrl"));f.append("nombreform",$(k).attr("data-nbform"));f.append("idregistro",$(k).attr("data-idreg"));for(var g=0;g<m;g++){f.append("File",a.dataTransfer.files[g],a.dataTransfer.files[g].name)}ShowPantallaEnEspera();$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/"+d,contentType:false,processData:false,data:f,dataType:"text xml ",async:false,success:function(e){n=Resd(e);n=$(n).children().first().text();if(n.indexOf("ERROR: ")==0){b=true}},error:function(e){TrataErrAjax("AJ151",e)}});HidePantallaEnEspera();if(b){alert(n)}var l=$(k).attr("data-ctrl");$("#BTN_"+l).click()}$(k).removeClass("PWDropFileAllow")}function get_cControlCampoCombo(a){return get_cControlCampoInputText_Aux("DROPDHID_",a)}function set_cControlCampoCombo(NombreControlUnico,valor,escritura,conFoco,visible,mensaje,obligatorio,label,NivelErr,cssClass,TextoValor,URLIcono,Lista){try{set_cControlCampoLabel(NombreControlUnico,visible,obligatorio,label);var DropHidden=document.getElementById("DROPDHID_"+NombreControlUnico);if(!DropHidden){return}var DropD=document.getElementById("DROPD_"+NombreControlUnico);var DropTxt=document.getElementById("DROPDTXT_"+NombreControlUnico);var DropList=document.getElementById("DROPDHIDLIST_"+NombreControlUnico);var contenedor=document.getElementById("CONT_"+NombreControlUnico);if(contenedor&&cssClass){contenedor.className=cssClass}if(Lista!="[@pgs!notset]"){var myobj=eval("("+Lista+")");try{RegeneraListaCombo(myobj,NombreControlUnico,DropD,DropHidden,DropList,false)}catch(Errror){alert(Errror)}}if(DropHidden){if(valor!="[@pgs!notset]"){DropHidden.value=valor;DropD.value=valor;DropTxt.value=TextoValor;CoMboCambiarIcono(DropD,DropTxt,URLIcono)}if(escritura==1){DropD.style.display="block";DropD.disabled=false;DropTxt.style.display="none";DropTxt.readOnly=true;$("#DROPD_"+NombreControlUnico).removeClass("PWTextBoxDisabled")}else{if(escritura==0){DropD.style.display="none";DropD.disabled=true;DropTxt.style.display="block";DropTxt.readOnly=true;$("#DROPD_"+NombreControlUnico).addClass("PWTextBoxDisabled")}}if(conFoco==1&&DropD.style.display=="block"){DropD.focus()}var estaSl=(DropD.style.display=="none"&&DropTxt.style.display=="inline");set_Visible_ResponsiveCell(contenedor,visible);if(visible==1){contenedor.style.display="block"}else{if(visible==0){contenedor.style.display="none"}}if(mensaje&&mensaje!=""){if(mensaje!="[@pgs!notset]"){alert(mensaje)}if(DropTxt.className.indexOf("PWTextBoxConError")<0){PonerClassError(DropTxt,NivelErr)}if(DropD.className.indexOf("PWTextBoxConError")<0){PonerClassError(DropD,NivelErr);$("#DROPD_"+NombreControlUnico).addClass("PWTextBoxConError")}}else{QuitarClassError(DropD);QuitarClassError(DropTxt)}if(obligatorio==1){if(DropTxt.className.indexOf("PWTextBoxDisabled")<0){$("#DROPDTXT_"+NombreControlUnico).addClass("PWTextBoxObligatorio")}if(DropD.className.indexOf("PWTextBoxDisabled")<0){$("#DROPD_"+NombreControlUnico).addClass("PWTextBoxObligatorio")}}else{if(obligatorio==0){$("#DROPDTXT_"+NombreControlUnico).removeClass("PWTextBoxObligatorio");$("#DROPD_"+NombreControlUnico).removeClass("PWTextBoxObligatorio")}}}}catch(Errror2){alert(Errror2)}}function RegeneraListaCombo(f,e,a,b,c,h){if((!a)||(!b)){return}Auxvalue=0;Oldvalue=a.value;a.options.length=0;var g=document.createElement("option");g.setAttribute("value","");g.innerHTML="";a.appendChild(g);if(c){c.value="|"}if(f){for(var d in f){g=document.createElement("option");g.setAttribute("value",f[d].value);g.setAttribute("class",f[d].cssclass);g.setAttribute("style",f[d].cssstyle);g.innerHTML=f[d].titulo;a.appendChild(g);if(Oldvalue==f[d].value){Auxvalue=1}if(c){c.value=c.value+"~"+f[d].value+"|"+f[d].titulo}}if(Auxvalue==0){if(f.length==1&&h){a.value=f[0].value;b.value=f[0].value}else{a.value="";b.value=""}}else{a.value=Oldvalue;b.value=Oldvalue}}else{a.value="";b.value=""}CoMboVsTextBox(e)}function get_cControlCampoComboDD(a){return get_cControlCampoCombo(a)}function set_cControlCampoComboDD(NombreControlUnico,valor,escritura,conFoco,visible,mensaje,obligatorio,label,NivelErr,cssClass,TextoValor,URLIcono,Lista){try{set_cControlCampoLabel(NombreControlUnico,visible,obligatorio,label);var contenedor=document.getElementById("CONT_"+NombreControlUnico);var DropHidden=document.getElementById("DROPDHID_"+NombreControlUnico);var DropTxt=document.getElementById("DROPDTXT_"+NombreControlUnico);var UlList=document.getElementById("DROPD_"+NombreControlUnico);var autoc=$("#"+DropTxt.id).hasClass("ui-autocomplete-input");if(contenedor&&cssClass){contenedor.className=cssClass}if(Lista!="[@pgs!notset]"&&Lista!=""){if(!autoc){try{UlList.innerHTML=Lista;if(valor=="[@pgs!notset]"){valor=DropHidden.value}}catch(Errror){alert(Errror)}}}if(DropHidden){if(valor!="[@pgs!notset]"&&valor!=DropHidden.value){var theLitem=null;if(autoc){FAUtocompleteselect=eval("AUtocompleteselect_"+NombreControlUnico);FAUtocompleteselect(valor,Lista);if(DropHidden.onchange){DropHidden.onchange()}}else{$("#DROPD_"+NombreControlUnico).find("li").each(function set_cControlCampoComboDDAux(ind,elem){if((elem.value==valor)&&(elem.textContent)){theLitem=elem;return false}});if(theLitem){var theLitemAnch=$("#"+theLitem.id).find("a")[0];if(theLitemAnch){combo_dropdown_Select(NombreControlUnico,valor,theLitem.id,theLitemAnch,true)}}else{$("#DROPD_"+NombreControlUnico).find("li").each(function set_cControlCampoComboDDAux(ind,elem){if(elem.value==""){theLitem=elem;return false}});if(theLitem){var theLitemAnch=$("#"+theLitem.id).find("a")[0];if(theLitemAnch){combo_dropdown_Select(NombreControlUnico,"",theLitem.id,theLitemAnch,true)}}}}}if(escritura==1){DropTxt.readOnly=!autoc;if(!autoc){$("#DROPDTXTDDTGL_"+NombreControlUnico).attr("data-toggle","dropdown")}$("#DROPDTXTDDTGL_"+NombreControlUnico).removeClass("PWTextBoxDisabled")}else{if(escritura==0){DropTxt.readOnly=true;if(!autoc){$("#DROPDTXTDDTGL_"+NombreControlUnico).attr("data-toggle","")}$("#DROPDTXTDDTGL_"+NombreControlUnico).addClass("PWTextBoxDisabled")}}if(conFoco==1&&contenedor.style.display=="block"){DropTxt.focus()}set_Visible_ResponsiveCell(contenedor,visible);if(visible==1){contenedor.style.display="block"}else{if(visible==0){contenedor.style.display="none"}}if(mensaje&&mensaje!=""){if(mensaje!="[@pgs!notset]"){alert(mensaje)}if(DropTxt.className.indexOf("PWTextBoxConError")<0){PonerClassError(DropTxt,NivelErr)}}else{QuitarClassError(DropTxt)}if(obligatorio==1){$("#DROPDTXTDDTGL_"+NombreControlUnico).addClass("PWTextBoxObligatorio");$("#DROPDTXTDDTGL_"+NombreControlUnico+".PWTextBoxDisabled").removeClass("PWTextBoxObligatorio")}else{if(obligatorio==0){$("#DROPDTXTDDTGL_"+NombreControlUnico).removeClass("PWTextBoxObligatorio")}}}}catch(Errror2){alert(Errror2)}}function set_cControlCampoTextHTML(NombreControlUnico,valor,escritura,conFoco,visible,mensaje,obligatorio,label,NivelErr,cssClass,script){IDtextArea="TXT_"+NombreControlUnico;var contenedor=document.getElementById("CONT_"+NombreControlUnico);set_cControlCampoInputText_Aux("TXT_","CONT_",NombreControlUnico,valor,escritura,conFoco,visible,mensaje,obligatorio,label,NivelErr);tinymce.editors[IDtextArea].remove();try{eval(script)}catch(ex){var stop=1}try{var olddisplay=contenedor.style.display;set_Visible_ResponsiveCell(contenedor,visible);if(visible==1){contenedor.style.display="none";tinymce.editors[IDtextArea].show();contenedor.style.display=(olddisplay=="none"?"table":olddisplay)}else{if(visible==0){contenedor.style.display="none";tinymce.editors[IDtextArea].hide()}}}catch(ex){var stop=1}}function set_cEDHTML(b,c){var a=document.getElementById(b);if(a){if(a.innerHTML!=c){a.innerHTML=c}}}function set_cEDIfr(b,c){var a=document.getElementById(b);if(a){if(a.src!=c){a.src=c}}}function set_cEDLabel(h,l,k,m,a,b){var c="#"+h;var d=c.replace("#DesElementLabel_SpanContainer","#LinkButton_Label");var e=c.replace("#DesElementLabel_SpanContainer","#LinkButton_Ico");set_Visible_ResponsiveCell($(c).get(0),m);if(m){$(c).show();$(d).prop("disabled",false)}else{$(c).hide();$(d).prop("disabled",true);l=""}var f=$(c+">span").get(0);if(l!="[@pgs!notset]"){if(f){if(f.innerText!=l){f.innerText=l}}}if(k){if($(e).length<=0){var g=document.createElement("img");g.id=e.replace("#","");$(c).prepend(g)}$(e).attr("src",k);$(e).attr("class",b)}else{$(e).remove()}$(c).attr("class",a)}function set_cEDReportIfr(a,b){set_cEDIfr(a,b)}function fijarCabecerasPlan(g){var c=$("#"+g.replace("CAMPOFORM_TABLADATOS","CAMPOFORM_DIVCONTENEDORTABLA"));if(!c){return}if(!c.get(0)){return}var q=c.get(0).scrollHeight>c.get(0).clientHeight;var o=c.get(0).scrollWidth>c.get(0).clientWidth;var p=0;var b=c.get(0).scrollWidth;var r=$("#"+g);r.css("margin-bottom","0");var u=$("#"+g).children("thead");var s=$("#"+g).children("tbody");var t=$("#"+g+"> tbody > tr.PWToolHtoFix");u.id="HEAD_"+g;s.id="BODY_"+g;if(!(r&&u&&s&&t)){return}var e=$("#"+g+"> thead > tr > th");var a=$("#"+g+"> tbody > tr > td ");if(!(e&&a)){return}if(!q){if(t.get(0)){if(!(t.get(0).Tratado)){t.get(0).style.display="none"}}AjustaCombosDDInGrid(c);return}scrollbarWidth=c.get(0).offsetWidth-c.get(0).clientWidth;var k=null;var l=null;var h=0;t.css("display","table-row");t.get(0).Tratado=true;for(var f=0;f<e.length;f++){var m=e[f];var n=a[f];if(!(n)||!(m)){continue}var x=m.clientWidth;var y=n.clientWidth;var w=(x>y?x:y);var d=m.clientHeight;m.style.width=""+w+"px";m.style.minWidth=""+w+"px";m.style.maxWidth=""+w+"px";n.style.width=""+w+"px";n.style.minWidth=""+w+"px";n.style.maxWidth=""+w+"px";n.style.height=""+d+"px";n.style.minHeight=""+d+"px";n.style.maxHeight=""+d+"px";k=m;l=n;h=w}u.css("position","absolute");u.css("top",0);u.css("left",0);u.css("overflow","hidden");var b=c.width()-scrollbarWidth;var v=u.width();if(v<b){w=h+(b-v);k.style.width=""+w+"px";k.style.minWidth=""+w+"px";k.style.maxWidth=""+w+"px";l.style.width=""+w+"px";l.style.minWidth=""+w+"px";l.style.maxWidth=""+w+"px"}q=c.get(0).scrollHeight>c.get(0).offsetHeight;if(q){u.css("width",""+c.get(0).clientWidth+"px")}else{u.css("width",c.css("width"))}if(!o){c.css("overflow-x","hidden")}c.on("scroll",function(){u.scrollLeft($(this).scrollLeft())});AjustaCombosDDInGrid(c)}function AjustaCombosDDInGrid(a){a.find(".PWTableCell>.PWDropdownList").each(function(){this.style.width=this.parentElement.offsetWidth+"px"})}function PostChangeTab(){fijarAllCabecerasPlan();dimensionarTablaResponsive();refrescarDiagrama()}function fijarAllCabecerasPlan(){try{var Tables=$(".PWHFix");for(Ti=0;Ti<Tables.length;Ti++){fijarCabecerasPlan(Tables[Ti].id)}$(".PWRenderJasper").each(function(i,obj){var target=$("#"+obj.id).data("visualize");eval(target+"()")})}catch(errror){console.log(errror.message)}}function dimensionarTablaResponsive(){try{var c=$(".RowContenedorTabla");for(Ti=0;Ti<c.length;Ti++){var a=c[Ti];dimensionarTablaResponsive_resize(a)}}catch(b){console.log(b.message)}}function dimensionarTablaResponsive_resize(b){var a=$("#"+b.id).find(".DivContenedorTabla").get(0);if(a){if($("#"+a.id).is(":visible")){if(b.clientWidth>0){a.style.maxWidth="1px";var c=b.clientWidth;a.style.maxWidth=""+c+"px"}}}}function refrescarDiagrama(){try{var b=$(".PWDiagram.mindmap,.PWDiagram.WorkFlowProceso");for(var a=0;a<b.length;a++){val=$(b[a]).attr("data-mindGraph");if(val){joint_rebuildGraph(val)}}}catch(c){console.log(c.message)}}function MaintainScrollPosition(){var a=$(".CAMPOFORM_HIDDENSCRLLV");for(Ti=0;Ti<a.length;Ti++){MaintainScrollPositionElement(a[Ti].id.replace("CAMPOFORM_HIDDENSCRLLV",""))}}function MaintainScrollPositionElement(d){var a=$("#CAMPOFORM_DIVCONTENEDORTABLA"+d);if((!a)){return}if(!a.get(0)){return}a.attr("onscroll","MaintainScrollPositionElementOnScroll(this)");var c=$("#CAMPOFORM_HIDDENSCRLLV"+d);var b=$("#CAMPOFORM_HIDDENSCRLLH"+d);if(c){if(c.get(0)){if(c.get(0).value){if(c.get(0).value=="bottom"){var e=a.get(0).scrollHeight-a.get(0).clientHeight;c.get(0).value=e;a.scrollTop(e)}else{a.scrollTop(c.get(0).value)}}}}if(b){if(b.get(0)){if(b.get(0).value){a.scrollLeft(b.get(0).value)}}}}function MaintainScrollPositionElementOnScroll(a,d,b){var e=a.id.replace("CAMPOFORM_DIVCONTENEDORTABLA","");var c=$("#CAMPOFORM_HIDDENSCRLLV"+e).get(0);var b=$("#CAMPOFORM_HIDDENSCRLLH"+e).get(0);c.value=a.scrollTop;b.value=a.scrollLeft}function tabular(a,l){tecla=(document.all)?a.keyCode:a.which;var k=((l.tagName=="TEXTAREA")||($(l).hasClass("PWTextBoxDisabled")));if((k)||(tecla!=13)){return}var g;var c=false;var d=false;var h=($("#DivCapaModal").has("#"+l.id).length>0);g=$(".PWTABENTER:not(.PWTextBoxDisabled):visible",l.form);if(h){g=$("#DivCapaModal").find(g)}g.each(function(){if(!c){if(this==l){c=true}return true}else{this.focus();d=true;return false}});if(!d){g[0].focus()}var b;return}function loadScript(c,a){var b=document.createElement("script");b.type="text/javascript";if(b.readyState){b.onreadystatechange=function(){if(b.readyState=="loaded"||b.readyState=="complete"){b.onreadystatechange=null;a()}}}else{b.onload=function(){a()}}b.src=c;document.getElementsByTagName("head")[0].appendChild(b)}function SetStrParametro(b){var a={value:b};$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/SetStrParametro",contentType:"application/json; charset=utf-8",data:JSON.stringify(a),dataType:"json",async:false,error:function(c){TrataErrAjax("AJ900",c)}})}function SetFormToLoad(c){var a=document.getElementById("HiddenCurrentValueFormXPage").value;var b={idvsesion:a,value:c};$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/SetFormToLoad",contentType:"application/json; charset=utf-8",data:JSON.stringify(b),dataType:"json",async:false,error:function(d){TrataErrAjax("AJ901",d)}})}function FormularioToSession(){var a=document.getElementById("HiddenCurrentValueFormXPage").value;var d;var b={idvsesion:a};var c=JSON.stringify(b);$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/CargarFormularioSession",contentType:"application/json; charset=utf-8",data:c,dataType:"json",async:false,success:function(e){d=Resd(e)},error:function(e){TrataErrAjax("AJ902",e)}});if(!d){showError("No se ha podido cargar el formulario");return}}var SQL=1;var JS=2;var CSS=3;var TYPEJS="/*[type=jscript]*/";var TYPESQL="/*[type=sql]*/";var TYPECSS="/*[type=css]*/";function AceEditorInit(b,c){ace.require("ace/ext/language_tools");var a=ace.edit(b);a.setShowPrintMargin(false);document.getElementById(b).style.fontSize="16px";a.getSession().setUseWrapMode(true);a.setOptions({enableBasicAutocompletion:true,enableSnippets:true,enableLiveAutocompletion:true});a.on("change",function(){alreadysave=false});alreadysave=true;a.setReadOnly(c);return a}function ShowAceEditor(p,m,l,u,h,d,n,b,t){var a=true;var c=" PWcabecera_toolbar ";var w=document.createElement("div");var f="DIVACE_"+l;$(w).attr({id:f,css:{whitespace:"preline"},title:n});$("#DivCapaModal").append(w);var o=AceEditorInit(f,t);o.setValue(u,0);o.getSession().setMode("ace/mode/sqlserver");o.getSession().setMode("ace/mode/javascript");if(t){c&=" PWcabecera_readonly "}$(w).dialog({classes:{"ui-dialog-titlebar":c,"ui-dialog-titlebar-close":"PWButton PWJqueryDialogClose"},autoOpen:true,modal:true,draggable:true,resizable:false,closeOnEscape:true,closeText:"Cerrar",width:1100,height:700,position:{my:"top",at:"top",of:window},buttons:[{text:"Cancelar","class":"PWButton PWJqueryDialog PWJqueryDialogKO",click:function(){if(!a){if(confirm("¿Desea salir sin confirmar los cambios?")){a=true;$(this).dialog("close")}}else{$(this).dialog("close")}}},{text:"Limpiar","class":"PWButton PWJqueryDialog PWJqueryDialogClean",click:function(){if(confirm("¿Desea limpiar el cálculo?")){if($("#ui-id-scripttype").val()==2){o.setValue("/*[type=jscript]*/")}else{o.setValue("")}a=false}},disabled:t},{text:"Confirmar","class":"PWButton PWJqueryDialog PWJqueryDialogOk",click:function(){$("#TXT_"+l).val(o.getValue());if(!a){$("#TXT_"+l).change()}a=true;$(this).dialog("close")},disabled:t},],close:function(){if(!a){if(confirm("¿Desea confirmar los cambios? En caso afirmativo, recuerde guardar para que los cambios sean efectivos.")){$("#TXT_"+l).val(o.getValue())}}o.destroy();o.container.parentNode.removeChild(o.container);$("#"+f).remove();o.container=null;o.renderer=null;o=null},open:function(){a=true}});var e=document.createElement("div");$(e).attr({id:"ui-id-divHeader-select","class":"ui-dialog-title ui-id-divHeader-select"});var k=document.createElement("span");$(k).attr({id:"ui-id-spamHeader-select","class":"ui-id-spamHeader-select",});$(k).text(b);var g=document.createElement("div");$(g).attr({id:"ui-id-div-seltypescript",style:"float:right"});var v=document.createElement("select");var s=document.createElement("option");var r=document.createElement("option");s.text="SQL";s.value=1;s.id="selScriptSQL";r.text="JS";r.value=2;r.id="selScriptJS";v.add(s);v.add(r);if(p.toLowerCase()=="catalogpro.general"){var q=document.createElement("option");q.text="CSS";q.value=3;q.id="selScriptCSS";v.add(q)}$(v).attr({id:"ui-id-scripttype"});if(!t){if(u.toUpperCase().indexOf("/*[TYPE=JSCRIPT]*/")==0){h=JS}else{if(u.toUpperCase().indexOf("/*[TYPE=CSS]*/")==0){h=CSS}else{h=SQL}}}$(v).on("change",function(){ChangeModeEditor(p,m,parseInt(v.value),d,o);a=false});v.value=h;$(".ui-dialog-titlebar").after(e);$(e).append(k);$(e).append(g);$(g).append(v);o.setTheme("ace/theme/sqlserver");switch(h){case SQL:o.getSession().setMode("ace/mode/sqlserver");break;case JS:o.getSession().setMode("ace/mode/javascript");break;case CSS:o.getSession().setMode("ace/mode/CSS");break}ChangeModeEditor(p,m,h,d,o)}function LoadSnippet(e,b,h,a){var c=document.getElementById("HiddenCurrentValueFormXPage").value;var d="";var f={nbform:e,idform:b,idvsesion:c,campo:a,Tipocodigo:h};var g=JSON.stringify(f);$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/GetSnippetCampo",contentType:"application/json; charset=utf-8",data:g,dataType:"json",async:false,success:function(k){d=Resd(k)},error:function(k){TrataErrAjax("AJ200",k)}});return d}function ChangeModeEditor(f,d,k,b,c){var g="";var h=ace.require("ace/snippets").snippetManager;var e=h.files["ace/mode/text"];if(e.snippets){h.unregister(e.snippets,"sqlserver");h.unregister(e.snippets,"javascript")}e.snippetText="";e.snippets=h.parseSnippetFile(e.snippetText,"ace/mode/text");h.register(e.snippets,"text");switch(k){case SQL:e.snippets=h.parseSnippetFile(e.snippetText,"ace/mode/sqlserver");h.register(e.snippets,"sqlserver");var a=c.getValue();if(a.indexOf(TYPEJS)==0){a=a.replace(TYPEJS,"")}if(a.indexOf(TYPECSS)==0){a=a.replace(TYPECSS,"")}if(a.indexOf(TYPESQL,0)!=0){a=TYPESQL+a}c.getSession().setMode("ace/mode/sqlserver");c.setTheme("ace/theme/sqlserver");g=LoadSnippet(f,d,k,b);e.snippetText=g;e.snippets=h.parseSnippetFile(e.snippetText,"ace/mode/sqlserver");h.register(e.snippets,"sqlserver");c.setValue(a,-1);break;case JS:e.snippets=h.parseSnippetFile(e.snippetText,"ace/mode/javascript");h.register(e.snippets,"javascript");var a=c.getValue();if(a.indexOf(TYPESQL)==0){a=a.replace(TYPESQL,"")}if(a.indexOf(TYPECSS)==0){a=a.replace(TYPECSS,"")}if(a.indexOf(TYPEJS,0)!=0){a=TYPEJS+a}c.getSession().setMode("ace/mode/javascript");c.setTheme("ace/theme/eclipse");g=LoadSnippet(f,d,k,b);e.snippetText=g;e.snippets=h.parseSnippetFile(e.snippetText,"ace/mode/javascript");h.register(e.snippets,"javascript");c.setValue(a,-1);break;case CSS:e.snippets=h.parseSnippetFile(e.snippetText,"ace/mode/css");h.register(e.snippets,"css");var a=c.getValue();if(a.indexOf(TYPESQL)==0){a=a.replace(TYPESQL,"")}if(a.indexOf(TYPEJS)==0){a=a.replace(TYPEJS,"")}if(a.indexOf(TYPECSS,0)!=0){a=TYPECSS+a}c.setTheme("ace/theme/dawn");c.getSession().setMode("ace/mode/css");g="";e.snippetText=g;e.snippets=h.parseSnippetFile(e.snippetText,"ace/mode/css");h.register(e.snippets,"css");c.setValue(a,-1)}}function CopyIdIcon(b){var c=$(b).parent().prev("td").text();var d="¤"+c+"|";var a=document.createElement("input");$(a).attr({type:"text",value:d});$("body").append(a);a.select();document.execCommand("Copy");$(a).remove();oldAlert("Icono copiado:"+c)}function ShowLoadField(a){if(a){$("[id$='"+a+"'].PWLabel").append("<i class='PWLoadField'></i>");$(".PWLoadField").show()}}function HideLoadField(a){$(".PWLoadField").remove()}function calculoAsincrono(e,c,b){ShowLoadField(e);var a=c(b);var d={JSONDatos:JSON.stringify(a)};$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/EjecutarCalculoAsincrono",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(d),success:function(f){f=Resd(f);if(f){TratarObjResAjax(jQuery.parseJSON(f))}},error:function(f){TrataErrAjax("AJ500",f)},timeout:10000,async:false});HideLoadField(e)}function cfdbuttonOnClickAsincrono(d,c,a){var b=c(d);if(!a){a=false}else{a=true}var e=labelOnClickAsincrono_AUX(JSON.stringify(b),a,"bp");return false}function labelOnClickAsincrono(d,c,a){var b=c(d);if(!a){a=false}else{a=true}return labelOnClickAsincrono_AUX(JSON.stringify(b),a,"ed")}function labelOnClickAsincrono_AUX(c,a,d){ShowPantallaEnEspera();var b={JSONDatos:c,Confirm:a,type:d};$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/EjecutarCalculoAsincronoGenericButton",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(b),success:function(e){e=Resd(e);if(e){TratarObjResAjax(jQuery.parseJSON(e))}},error:function(e){TrataErrAjax("AJ501",e)},timeout:10000,async:false});HidePantallaEnEspera()}function CampoFormOnClickAsincrono(e,c,b,f){ShowPantallaEnEspera();var a=b(e);var d={JSONDatos:JSON.stringify(a),idsel:c};$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/EjecutarAccionAlEditarAsincrono",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(d),success:function(g){g=Resd(g);if(g){TratarObjResAjax(jQuery.parseJSON(g),f)}},error:function(g){TrataErrAjax("AJ502",g)},timeout:10000,async:false});HidePantallaEnEspera()}function auxFGetsubForm(c,a){if(typeof c==="function"){var b=c(null);if(b){a.push(b)}}}function campoform_expandCollapse(){if($(this).hasClass("hiddenChilds")){campoform_expand(this)}else{campoform_Collapse(this)}var a=$(this).data("comp");campoform_expandCollapse_status2Ctrol(a,document.getElementById("HiDExpandCollapseStatus_"+a),false)}function campoform_expand(c){var b=$(c).data("comp");var a=$(c).data("controla");$(c).removeClass("hiddenChilds");$("#CAMPOFORM_TABLADATOS"+b).find("."+a).each(function(d,e){e.className=e.className.replace("hiddenEl","")})}function campoform_Collapse(c){var b=$(c).data("comp");var a=$(c).data("controla");$(c).addClass("hiddenChilds");$("#CAMPOFORM_TABLADATOS"+b).find("."+a).each(function(d,e){e.className=e.className+" hiddenEl"})}function campoform_expandCollapse_status(b){var a=document.getElementById("HiDExpandCollapseStatus_"+b);if(!a){return}if(a.value){campoform_expandCollapse_ctrL2Status(b,a)}else{campoform_expandCollapse_status2Ctrol(b,a,true)}campoform_expandCollapse_Count(b)}function campoform_expandCollapse_status2Ctrol(c,b){if(!b){return}var a={};$("#CAMPOFORM_TABLADATOS"+c).find(".PWTableRowAgrupado.expand").each(function(){if($(this).hasClass("hiddenChilds")){var d=$(this).data("identifgr");a[d]=1}});b.value=JSON.stringify(a)}function campoform_expandCollapse_ctrL2Status(c,b){if(!b){return}if(!b.value){return}var a=JSON.parse(b.value);$("#CAMPOFORM_TABLADATOS"+c).find(".PWTableRowAgrupado.expand").each(function(){var d=$(this).data("identifgr");if(a[d]&&!($(this).hasClass("hiddenChilds"))){campoform_Collapse(this)}else{if(!a[d]&&($(this).hasClass("hiddenChilds"))){campoform_expand(this)}}})}function campoform_expandCollapse_Count(b){if(!$("#CAMPOFORM_TABLADATOS"+b).hasClass("count")){return}var a="#CAMPOFORM_TABLADATOS"+b+" > tbody > tr.collapseChilds";var c="#CAMPOFORM_TABLADATOS"+b+" > tbody";$(a).each(function(){var e=$(this).data("controla");var d=$(c).find("."+e).not(".collapseChilds").length;$(this).find("span:last").append(" ("+d+")")})}function EjecutarAccionPorDefectoCampoForm(b,a){$("#CAMPOFORM_HIDDENIDSEL"+b).val(a);$("#BTNAccionForm_"+b).click()}function CampoFormDeleteAsync(a,f,d,c){ShowPantallaEnEspera();var b=c(f);var e={JSONDatos:JSON.stringify(b),idsel:d};$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/DeleteRegistroCampoForm",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(e),success:function(h){h=Resd(h);if(h){var g=TratarObjResAjax(jQuery.parseJSON(h));if(g){$(a).parents("tr").first().remove()}}},error:function(g){TrataErrAjax("AJ503",g)},timeout:10000,async:false});HidePantallaEnEspera()}function SetMandatoryTab(a,b){if(b){if($("a[data-titletab='"+a+"']").parent("li").hasClass("readonly")){return}if($("a[data-titletab='"+a+"']").parent("li").hasClass("mandatory")){return}$("a[data-titletab='"+a+"']").parent("li").addClass("mandatory")}else{if($(".PWTextBoxObligatorio:visible").length==0){$("a[data-titletab='"+a+"']").parent("li").removeClass("mandatory")}}}function TratarObjResAjax(resObj,nbctrl){if(resObj.mensajeError){eval(resObj.resultado[0]);return false}for(iCoUntRes=0;iCoUntRes<resObj.resultado.length;iCoUntRes++){try{if(nbctrl){resObj.resultado[iCoUntRes]=resObj.resultado[iCoUntRes].replace("[%nbctrl%]",nbctrl)}eval(resObj.resultado[iCoUntRes])}catch(Error){TrataErrAjax("AJ000");return false}}return true}function MostrarErroresPagina(a){$().ready(function(){showWarning(a)})}function autocomplete_Ajax_Selected(k,d,f,b,c,e){var a={value:""};var g={value:k,Name:d,nbForm:f,IdValue:b,IdVsesion:c,nbcampo:e};var h=JSON.stringify(g);$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/autocompleteUiSelected",contentType:"application/json; charset=utf-8",data:h,async:false,dataType:"json",success:function(l){a.value=Resd(l)},error:function(l){TrataErrAjax("AJ120",l)}});return a}function autocomplete_Ajax_UiList(g,d,a,b,c){var h={value:""};var e={query:g,nbForm:d,IdValue:a,IdVsesion:b,nbcampo:c};var f=JSON.stringify(e);$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/autocompleteUiList",contentType:"application/json; charset=utf-8",data:f,async:false,timeout:15000,dataType:"json",success:function(k){h.value=Resd(k)},error:function(k){TrataErrAjax("AJ121",k)}});return h}function autocomplete_ajax_UiText(g,d,a,b,c){var h={value:""};var e={query:g,nbForm:d,IdValue:a,IdVsesion:b,nbcampo:c};var f=JSON.stringify(e);$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/autocompleteUiText",contentType:"application/json; charset=utf-8",data:f,async:false,dataType:"json",success:function(k){h.value=Resd(k)},error:function(k){TrataErrAjax("AJ122",k)}});return h}function Ajax_UploadHtmlImage(a,e,c,f,b,d){var k;var g={aString:a.result,NbFile:e,IdVsesion:c,NbForm:f,IdValue:b,NbCampo:d};var h=JSON.stringify(g);$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/UploadHtmlImage",contentType:"application/json; charset=utf-8",ata:h,async:false,dataType:"json",success:function(l){k=Resd(l)},error:function(l){TrataErrAjax("AJ130",l)}});return k}function Ajax_MenuFacilBotonEjecutarCuentaPrimerVistazoAtributo(a){var d;var b={idBoton:a};var c=JSON.stringify(b);$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/MenuFacilBotonEjecutarCuentaPrimerVistazoAtributo",contentType:"application/json; charset=utf-8",data:c,async:false,dataType:"json",success:function(e){d=Resd(e)},error:function(e){TrataErrAjax("AJ700",e)}});return d}function Ajax_MenuFacilCheckEjecutarCalculo(a,b){var c={idCheck:a,marcado:b};var d=JSON.stringify(c);$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/MenuFacilCheckEjecutarCalculo",contentType:"application/json; charset=utf-8",data:d,async:false,dataType:"json",error:function(e){TrataErrAjax("AJ701",e)}})}function Ajax_DesplegarDropDownItem(e,d,a,b,c,k){var h;var f={nbform:e,nbcampo:d,IdValue:a,idvsesion:b,Nodeid:c,Value:k};var g=JSON.stringify(f);$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/DesplegarDropDownItem",contentType:"application/json; charset=utf-8",data:g,async:false,dataType:"json",success:function(l){h=Resd(l)},error:function(l){TrataErrAjax("AJ140",l)}});return h}function Ajax_ContenidoHTMLAsincrono(a,b){var e;var c={Id:a,ProcedimientoFormularioAsincrono:b};var d=JSON.stringify(c);$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/ContenidoHTMLAsincrono",contentType:"application/json; charset=utf-8",data:d,async:false,dataType:"json",success:function(f){e=Resd(f)},error:function(f){TrataErrAjax("AJ160",f)}});if(!e){e="Error"}return e}function CAMPOFORM_AJAXSELECT(a,b){Ctr=document.getElementById(b);var c={ClaveInsercion:a,Value:Ctr.checked};$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/SeleccionaEnBD",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(c),success:AjaxOkConRedirect,error:function(d){TrataErrAjax("AJ161",d)},timeout:5000,async:false})}function FORM_AJAXChanGeTaB(a,b,c){var d={NbF:b,RidF:c,Value:a};$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/ChanGeTaB",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(d),success:AjaxOkConRedirect,error:function(e){},timeout:5000,async:true})}function FORM_AJAXChanGeVisibleTabAcUni(a,b,c){var d={NbF:b,RidF:c,Value:a};$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/ChanGeTaB",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(d),success:AjaxOkConRedirect,error:function(e){},timeout:5000,async:true})}function FORM_AJAXChanGeVisibleTabAcMul(a,b,c){var d={NbF:b,RidF:c,Value:a};$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtool.asmx/ChanGeTaBMul",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(d),success:AjaxOkConRedirect,error:function(e){},timeout:5000,async:true})}function AjaxOkConRedirect(a){if(a){var b=Resd(a);if(b){TratarObjResAjax(jQuery.parseJSON(b));b=jQuery.parseJSON(b);if(b.Refresh){location.href="./WFEndSession.aspx"}}}}function TrataErrAjax(a,d){var c="An internal error has occurred. Please contact support detailing what happened and provide the code here indicated.";var b=navigator.language;if(b){switch(b.substring(0,2).toLowerCase()){case"fr":c="Une erreur interne s'est produite. S'il vous plaît contacter le support détaillant ce qui s'est passé et fournir le code indiqué ici ";break;case"es":c="Se ha producido un error interno. Por favor contacte con soporte detallando lo sucedido y facilite el código aquí indicado. ";break;case"pt":c="Ocorreu um erro interno. Entre em contato com o suporte detalhando o que aconteceu e forneça o código aqui indicado. ";break;case"gl":c="Produciuse un erro interno. Póñase en contacto co apoio que detalla o que pasou e fornece o código aquí indicado.";break;case"eu":c="Barneko errorea gertatu da. Jarri harremanetan laguntzarekin gertatutakoa zehaztuz eta adierazi hemen kodea.";break;case"ca":c="S'ha produït un error intern. Si us plau contacti amb suport detallant el que ha passat i faciliti el codi aquí indicat.";break;case"de":c="Ein interner Fehler ist aufgetreten. Bitte wenden Sie sich an den Support, der ausführlich beschreibt, was passiert ist, und geben Sie den hier angegebenen Code an.";break;default:c="An internal error has occurred. Please contact support detailing what happened and provide the code here indicated. "}}console.log("Error AJAX "+a+" - status:"+d.status);showError(c+"- Code:"+a)};