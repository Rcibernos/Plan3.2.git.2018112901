var selSELECTED=".PWSELECTED";var selBLOQUE=".PWBloque";var selDISENO=".PWDISENO";var selPRINCIPAL=".principal";var selRESIZABLE=".PWResizable";var clSELECTED="PWSELECTED";var clDISENO="PWDISENO";var clPRINCIPAL="principal";var clBLOQUE="PWBloque";var clORDERLEFT="PWDropOrderLeft";var clORDERRIGHT="PWDropOrderRight";var clINSERT="PWDropInsert";var posNbform=0;var posIdform=1;var posFinalResponsive=2;var posTypefrm=3;var posRefresh=0;var posCssNcol=1;var posIsResponsive=2;var posOrden=3;var posTypeElemDis=4;var posIdtype=5;var typeAcordeonUnico=8;var typeAcordeonMult=7;var typefrm=0;var typeCtrl=1;var typeED=2;var typeBL=3;var typeTAB=4;var typeTD=5;var saltolinea="\u00A0\u00A0";var interval;var listforms;function MenuPrincipal(){}function ReubicarMenu(){$("#mnuPrincipalDiseno").remove();MenuPrincipal()}function SelectElement(a){NoSelected();$(a).addClass(clSELECTED)}function NoSelected(){if($(selSELECTED).length!=0){$(selSELECTED).removeClass(clSELECTED)}}function ShowResponsiveOptions(v,s,q,a,z){var u;if($(v).hasClass(clDISENO)==false){return}var c=document.getElementById("HiddenCurrentValueFormXPage").value;HideControlMenu();if($(selSELECTED).length!=0){$(selSELECTED).removeClass(clSELECTED)}$(v).addClass(clSELECTED);var w={nbform:s,nbcampo:q,IdValue:a,idvsesion:c,ElementType:z};var x=JSON.stringify(w);$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtoolResponsive.asmx/GetInformation",contentType:"application/json; charset=utf-8",data:x,dataType:"json",async:false,success:function(C){u=C},error:function(C){alert("Error en ajax [GetInformation]: "+C.status+" "+C.responseText)}});u=Resd(u);if((!u)||(u.length==0)){showError("No se han podido recuperar propiedades del control: "+q);return}var o=$("<div class='PWmnuRESPONSIVE'></div>").attr({id:$(v).attr("nbctrl")+"_ctrl_mnuResponsive"});var m=$("<button>").attr({name:"responsive-plus",title:"Aumentar Ncol",type:"button",id:"mnu_responsive_btnplus",display:"block",onclick:"CambiarNCol('"+s+"','"+q+"','"+a+"','"+c+"', '"+z+"','+');  event.stopPropagation();","class":"buttonResponsive buttonResponsivePlus"});var j=$("<input>").attr({name:"responsive-lgfix",title:"Establecer Ncol",value:" ",type:"button",id:"mnu_responsive_btnlgset",display:"block",onclick:"ChangeResponsive('"+s+"','"+q+"','"+a+"','"+c+"',10,'"+z+"');    event.stopPropagation();","class":"buttonResponsive"});var l=$("<button>").attr({name:"responsive-minus",title:"Reducir Ncol",type:"button",id:"mnu_responsive_btnmin",display:"block",onclick:"CambiarNCol('"+s+"','"+q+"','"+a+"','"+c+"', '"+z+"','-');  event.stopPropagation();","class":"buttonResponsive buttonResponsiveMin"});CargarPropiedadesModal(z,q);var k=$("<button>").attr({name:"responsive-more",title:"Propiedades",type:"button",id:"mnu_responsive_btnmore",display:"block",onclick:"OpenDivProps();event.stopPropagation();","class":"buttonResponsive buttonResponsiveMore"});if(parseInt(z)==typeBL){var e=$("<input>").attr({name:"responsive-addelement",title:"Nuevo elemento",type:"button",id:"mnu_responsive_AddElem",display:"block",onclick:"AddOptions('"+s+"','"+q+"','"+a+"','"+c+"'); ;event.stopPropagation();","class":"buttonResponsive buttonResponsiveAdd"})}var f=$("<button>").attr({name:"responsive-del",title:"Eliminar elemento",type:"button",id:"mnu_responsive_DelElem",display:"block",onclick:"DeleteElement('"+z+"','"+q+"'); event.stopPropagation(); ","class":"buttonResponsive buttonResponsiveDelete"});var b=u[posIdtype];if(parseInt(b)>=1000){var n=$("<button>").attr({name:"responsive-TipoDato",title:"Propiedades del tipo de dato",type:"button",id:"mnu_responsive_TipoDato",display:"block",onclick:"CargarPropiedadesModal(5,'TD"+b+"'); event.stopPropagation();","class":"buttonResponsive buttonResponsiveTipoDato"})}else{if(parseInt(b)==106){var r=$(v).data("edform");var i=$("<button>").attr({name:"responsive-formedicion",title:"Editar formulario de edicion: "+r,type:"button",id:"menu_responsive_FED",display:"block",onclick:"Refresh('"+r+"'); event.stopPropagation();","class":"buttonResponsive buttonResponsiveFormularioEdicion"});var p=$(v).data("colform");var g=$("<button>").attr({name:"responsive-formcolumnas",title:"Editar formulario de columnas: "+p,type:"button",id:"menu_responsive_FC",display:"block",onclick:"Refresh('"+p+"');event.stopPropagation();","class":"buttonResponsive buttonResponsiveFormularioColumnas"})}}var t=GetTypeName(z,u[posTypeElemDis]);var d=$("<img>").attr({id:"mnu_principal_info_"+q,title:"Formulario:"+s+saltolinea+" Nb.Ctrl:"+q+saltolinea+" Tipo:"+t,display:"block","class":"mnu_principal_info buttonResponsive"});var y;var A;var B;if(!u[posCssNcol]){return}else{y=u[posCssNcol].indexOf("lg");A=u[posCssNcol].substring(y+3,y+5);B=u[posOrden]}$(j).attr("value",A);$(selSELECTED).attr("orden",B);$(v).before(o);$(o).append(l);$(o).append(j);$(o).append(m);if(z=="3"){$(o).append(e)}$(o).append(k);if((z=="1")&&(parseInt(b)>=1000)){$(o).append(n)}else{if((z=="1")&&(parseInt(b)==106)){$(o).append(i);$(o).append(g)}}$(o).append(d);$(o).append(f);ShowControlMenu();SelectActualBlock(v);$(":button").tooltip();$(j).tooltip();$(d).tooltip()}function BlockOptions(i,g,b,c){HideSubMenus();var f=$("<div class='PWSubmnu'></div>").attr({id:"mnuResponsiveBlock"});var d=$("<input>").attr({name:"responsive-addblock",title:"Agregar nuevo bloque al bloque seleccionado",type:"button",id:"mnu_responsive_btnaddblock",display:"block",onclick:"CreateBlock ('"+i+"','"+g+"','"+b+"','"+c+"');event.stopPropagation();","class":"buttonResponsive"});var e=$("<input>").attr({name:"responsive-rmvblock",title:"Eliminar bloque seleccionado",type:"button",id:"mnu_responsive_btnrmvblock",display:"block",onclick:"EraseBlock  ('"+i+"','"+g+"','"+b+"','"+c+"');event.stopPropagation();","class":"buttonResponsive"});var j=$("#mnu_responsive_btnblock").position();var k=$("#mnu_responsive_btnblock").width();var a=$("#mnu_responsive_btnblock").height();$(".PWmnuRESPONSIVE").append(f);$(f).css({width:k,left:j.left,top:j.top+a+2});$(f).append(d);$(f).append(e);if($(selSELECTED).hasClass(clPRINCIPAL)){$("#mnu_responsive_btnrmvblock").attr("disabled",true)}}function ShowMoreOptions(j,i,a,b,m){HideSubMenus();var k={nbform:j,nbcampo:i,IdValue:a,idvsesion:b,ElementType:m};var l=JSON.stringify(k);var e="";$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtoolResponsive.asmx/GetLabel",contentType:"application/json; charset=utf-8",data:l,dataType:"json",async:false,success:function(n){e=n},error:function(n){alert("Error en ajax [GetLabel]: "+n.status+" "+n.responseText)}});e=Resd(e);if(!e){e.value=""}var f=$("<div class='PWSubmnu'></div>").attr({id:"mnuResponsiveMoreOpt"});var g=$("<div class='PWSubmnulbl'></div>").attr({id:"mnuRespLbl"});var c=$("<input>").attr({name:"responsive-lbl",title:"Cambiar Etiqueta",type:"button",id:"mnu_responsive_btnlbl",display:"block",onclick:"$('#mnu_responsive_txtlbl').show() ;event.stopPropagation();","class":"buttonResponsive"});var d=$("<input>").attr({name:"responsive-txtlbl",title:"Nueva etiqueta",value:e,type:"text",id:"mnu_responsive_txtlbl",display:"block",onclick:"event.stopPropagation();",onkeypress:"return ChangeLabel(this,event,'"+j+"','"+i+"','"+a+"','"+b+"','"+m+"'); Refresh('"+j+"');"});$(".PWmnuRESPONSIVE").append(f);$(f).css({width:"300px",left:position.left,top:position.top+h+3});if(parseInt(m)==typeBL){$(mydivblock).append(inputblock);$(mydivblock).append(inputaddblock);$(mydivblock).append(inputrmvblock);$(f).append(mydivblock);$(f).append("<br/>")}else{$(g).append(c);$(g).append(d);$(f).append(g)}$(":button").tooltip();EnableMoreButtons()}function ChangeResponsive(l,k,b,c,m,o){HideSubMenus();var j=$("<div class='PWSubmnu'></div>").attr({id:"mnuResponsiveLg"});var d=$("<input>").attr({name:"responsive-lg1",value:"1",type:"button",id:"mnu_responsive_btnlg1",display:"block",onclick:"CambiarNCol('"+l+"','"+k+"','"+b+"','"+c+"','"+o+"',1);  event.stopPropagation();","class":"buttonResponsive"});var f=$("<input>").attr({name:"responsive-lg3",value:"3",type:"button",id:"mnu_responsive_btnlg3",display:"block",onclick:"CambiarNCol('"+l+"','"+k+"','"+b+"','"+c+"','"+o+"',3);  event.stopPropagation();","class":"buttonResponsive"});var g=$("<input>").attr({name:"responsive-lg6",value:"6",type:"button",id:"mnu_responsive_btnlg6",display:"block",onclick:"CambiarNCol('"+l+"','"+k+"','"+b+"','"+c+"','"+o+"',6);  event.stopPropagation();","class":"buttonResponsive"});var i=$("<input>").attr({name:"responsive-lg9",value:"9",type:"button",id:"mnu_responsive_btnlg9",display:"block",onclick:"CambiarNCol('"+l+"','"+k+"','"+b+"','"+c+"','"+o+"',9);  event.stopPropagation();","class":"buttonResponsive"});var e=$("<input>").attr({name:"responsive-lg12",value:"12",type:"button",id:"mnu_responsive_btnlg12",display:"block",onclick:"CambiarNCol('"+l+"','"+k+"','"+b+"','"+c+"','"+o+"',12);  event.stopPropagation();","class":"buttonResponsive"});var n=$("#mnu_responsive_btnlgset").position();var p=$("#mnu_responsive_btnlgset").width();var a=$("#mnu_responsive_btnlgset").height();$(".PWmnuRESPONSIVE").append(j);$(j).css({width:p,left:n.left,top:n.top+a+2});$(j).append(d);$(j).append(f);$(j).append(g);$(j).append(i);$(j).append(e)}function ChangeLabel(g,a,f,d,b,c,l){var k=(a.which)?a.which:a.keycode;if(k==13){var m=$(g).val();var i={nbform:f,nbcampo:d,IdValue:b,idvsesion:c,ElementType:l,value:m};var j=JSON.stringify(i);$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtoolResponsive.asmx/SetLabel",contentType:"application/json; charset=utf-8",data:j,dataType:"json",async:false,success:function(e){resultAjax=e},error:function(e){alert("Error en ajax [SetLabel]: "+e.status+" "+e.responseText)}});if(!resultAjax){showError("No se ha podido cambiar la etiqueta del campo");return false}$(selSELECTED).find(".PWLabel").children().first().text(m);EnableMoreButtons();HideSubMenus();CambiarIcoXML(true);return false}a.stopPropagation();return true}function ModificarElementoSeleccionado(b,e){if(b=="NCOL"){var a=clDISENO+" "+clSELECTED+" ";if($(selSELECTED).hasClass(clBLOQUE)){a+=" "+clBLOQUE+" "}if($(selSELECTED).hasClass(clPRINCIPAL)){a+=" "+clPRINCIPAL+" "}$(".PWSubmnu").remove();$(selSELECTED).attr("class",a);$(selSELECTED).addClass(e);var c;var d;if(e){c=e.indexOf("lg");d=e.substring(c+3,c+5)}else{c=e.indexOf("lg");d=e.substring(c+3,c+5)}$("#mnu_responsive_btnlgset").attr("value",d);Refresh()}return true}function ModifyOrder(l,b,k,j,c,d,m,r,s){var p;var o;var a;var f=$(selSELECTED);if($(l).attr("type")=="button"){var n=$("#mnu_responsive_txtpos").val();if(s==1){n++}else{n--}if(!CambiarOrden(k,j,c,d,r,n)){showError("No ha sido posible modificar la posicion del control:"+j);return false}$("#mnu_responsive_txtpos").val(n);if(s==1){a=$(selSELECTED).next(selDISENO);$(a).after($(f));$(a).attr("orden",n-1)}else{a=$(selSELECTED).prevAll(selDISENO).first();$(a).before($(f));$(a).attr("orden",n+1)}$(selSELECTED).attr("orden",n);ShowControlMenu()}else{var q=(b.which)?b.which:b.keycode;if(q==13){var i=$(l).val();if(($.isNumeric(i))&&((i>=1)&&(i<1000))){if(!CambiarOrden(k,j,c,d,r,i)){showError("No ha sido posible modificar la posicion del control "+j);return false}a=$(selSELECTED).parents(selBLOQUE).first();a=$(a).find(selDISENO).get(parseInt(i)-1);var g=parseInt($(selSELECTED).attr("orden"));if(g<i){$(a).after($(f))}else{if(g>i){$(a).before($(f))}}ShowControlMenu()}else{alert("El orden debe tener valor entre: 1-999");$(l).val($(selSELECTED).attr("orden"))}}else{if(q>31&&((q<48)||(q>57))){b.stopPropagation();return false}else{return true}}}b.stopPropagation();return false}function NewBlockDestiny(g,f,e,c,d,k){var i=$(selSELECTED).parents(selBLOQUE).first();var a=$("#mnu_responsive_selblock").val();var b=$(i).attr("nbctrl");var j;if(k==typeBL){if($("#"+g).find("div[nbctrl='"+a+"']").length>0){showWarning("No se puede mover el bloque origen a un bloque hijo o propio");$("#mnu_responsive_selblock").val(b);return}}if(CambiarBloque(f,e,c,d,k,b,a,0)){Refresh(f)}else{ConstruirErrorCambio(k,e,a);return}}function CreateBlock(d,c,a,b){var e=$(selDISENO).siblings().length;var f={nbform:d,nbcampo:c,IdValue:a,idvsesion:b,orden:e};var g=JSON.stringify(f);var i=false;$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtoolResponsive.asmx/CreateBlock",contentType:"application/json; charset=utf-8",data:g,dataType:"json",async:false,success:function(j){i=j},error:function(j){alert("Error en ajax [CreateBlock]: "+j.status+" "+j.responseText)}});if(i){EnableButtonsResponsive();CambiarIcoXML(true);Refresh(d)}else{showError("No se ha podido crear un bloque nuevo")}return i}function EraseBlock(d,c,a,b){confirmAndGoXEval("Se va a eliminar el bloque: "+c,"","","","","AuxErase('"+d+"','"+c+"','"+a+"','"+b+"')","HideControlMenu();")}function AuxErase(d,c,a,b){var e={nbform:d,nbcampo:c,IdValue:a,idvsesion:b};var f=JSON.stringify(e);var g;$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtoolResponsive.asmx/EraseBlock",contentType:"application/json; charset=utf-8",data:f,dataType:"json",async:false,success:function(i){g=i},error:function(i){alert("Error en ajax [EraseBlock]: "+i.status+" "+i.responseText)}});g=Resd(g);if(g){HideControlMenu();CambiarIcoXML(true);Refresh(d)}else{showError("No se ha podido eliminar el bloque:"+c)}}function allowDropElement(b,c){b.preventDefault();var k=4;if($(c).attr("id")==$(selSELECTED).attr("id")){b.stopPropagation();return}var a=$(c).width();var j=$(c).offset().left;var i=j+a;var f=j;var g=j;if($(c).hasClass(clBLOQUE)){f=j+(a/k);g=j+((k-1)*(a/k))}else{f=j+(a/2);g=f}var d=b.clientX;EraseCssDragDrop(c);if($(c).hasClass(clPRINCIPAL)){$(c).addClass(clINSERT)}else{if(d<f){$(c).addClass(clORDERLEFT)}else{if(d>=g){$(c).addClass(clORDERRIGHT)}else{$(c).addClass(clINSERT)}}}b.stopPropagation()}function dragElement(a,b){SelectElement(b);a.dataTransfer.setData("text",b.id);a.stopPropagation()}function dropAction(b,a,g,f,c,i){b.preventDefault();b.stopPropagation();var d=$(selSELECTED);if($(a).hasClass(clORDERLEFT)){dropElementOrder(b,a,g,f,c,i,0);EraseCssDragDrop(a);return}if($(a).hasClass(clORDERRIGHT)){if(dropElementOrder(b,a,g,f,c,i,1)){EraseCssDragDrop(a)}return}if($(a).hasClass(clINSERT)){dropElement(b,a,g,f,c,i);EraseCssDragDrop(a);Refresh(g);return}}function dropElement(d,c,o,n,g,q){d.preventDefault();var l=$(selSELECTED);var j=$(l).attr("nbctrl");if(IamYourFather(l,n)){d.stopPropagation();return}var p=$(l).parents(selBLOQUE).first();var b=$(p).attr("nbctrl");var a=$(c).attr("nbctrl");var k=$(l).attr("nbform");if(((b==a)||(j==a))||(k!=o)){d.stopPropagation();return}var i=document.getElementById("HiddenCurrentValueFormXPage").value;var f=$(l).attr("id");var m=GetTypeObject(f);if(m==typefrm){return}if(!CambiarBloque(o,j,g,i,m,b,a,0)){ConstruirErrorCambio(m,j,a);return}HideControlMenu();d.stopPropagation()}function dropElementOrder(d,c,o,n,g,s,r){d.preventDefault();var l=$(selSELECTED);var j=$(l).attr("nbctrl");var k=$(l).attr("nbform");if((n==j)||(k!=o)){d.stopPropagation();return}var p=parseInt($(c).attr("orden"));p+=r;var i=document.getElementById("HiddenCurrentValueFormXPage").value;var q=$(l).parents(selBLOQUE).first();var b=$(q).attr("nbctrl");q=$(c).parents(selBLOQUE).first();var a=$(q).attr("nbctrl");var f=$(l).attr("id");var m=GetTypeObject(f);if(m==typefrm){return}if(b!=a){if(!CambiarBloque(o,j,g,i,m,b,a,0)){ConstruirErrorCambio(m,j,a);d.stopPropagation();return false}}if(a){if(!CambiarOrden(o,j,g,i,m,p)){showError("No ha sido posible modificar la posici?n del control:"+n);d.stopPropagation();return false}}HideControlMenu();Refresh(o);d.stopPropagation()}function Resizable(){$(selRESIZABLE+selSELECTED).resizable({minHeight:25,disabled:false,handles:"s",grid:[5,5],stop:function(b,g){var c=$(g.element).attr("h");var a=g.size.height-g.originalSize.height;var i=parseInt(c)+a;var e=$(g.element).attr("nbctrl");var f;if($.isNumeric(e)){f="ED"}else{f="C"}var d="CFD"+f+"_RHEIGHT";changePropAjax(d,f,e,i,false);CambiarIcoXML(true);Refresh()}})}function CambiarOrden(d,c,a,b,j,e){var f={nbform:d,nbcampo:c,IdValue:a,idvsesion:b,ElementType:j,value:e};var g=JSON.stringify(f);var i;$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtoolResponsive.asmx/ChangeOrder",contentType:"application/json; charset=utf-8",data:g,dataType:"json",async:false,success:function(k){i=k},error:function(k){alert("Error en ajax [ChangeOrder]: "+k.status+" "+k.responseText)}});i=Resd(i);if(i){CambiarIcoXML(true)}return(i)}function CambiarNCol(d,c,a,b,j,k){var e={nbform:d,nbcampo:c,IdValue:a,idvsesion:b,ElementType:j,value:k};var f=JSON.stringify(e);var g;$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtoolResponsive.asmx/ChangeNCol",contentType:"application/json; charset=utf-8",data:f,dataType:"json",async:false,success:function(l){g=l},error:function(l){alert("Error en ajax [ChangeNCol]: "+l.status+" "+l.responseText)}});g=Resd(g);if(g!=""){CambiarIcoXML(true);ModificarElementoSeleccionado("NCOL",g);var i=$("[nbctrl='"+c+"']");ShowResponsiveOptions(i[0],d,c,a,j);return true}else{return false}}function CambiarBloque(f,e,c,d,l,b,a,g){if(!b){b=""}if(!a){a=""}var i={nbform:f,nbcampo:e,IdValue:c,idvsesion:d,ElementType:l,nbBloqueOrigen:b,nbBloqueDestino:a,orden:g};var j=JSON.stringify(i);var k;$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtoolResponsive.asmx/ChangeBlock",contentType:"application/json; charset=utf-8",data:j,dataType:"json",async:false,success:function(m){k=m},error:function(m){alert("Error en ajax [ChangeBlock]: "+m.status+" "+m.responseText)}});k=Resd(k);if(k){CambiarIcoXML(true)}return k}function ObtenerLabel(e,d,a,b,i){var f={nbform:e,nbcampo:d,IdValue:a,idvsesion:b,ElementType:i};var g=JSON.stringify(f);var c="";$.ajax({type:"POST",url:cUtilUrlPathName+"/ws/ajxtoolResponsive.asmx/GetLabel",contentType:"application/json; charset=utf-8",data:g,dataType:"json",async:false,success:function(j){c=j},error:function(j){alert("Error en ajax [GetLabel]: "+j.status+" "+j.responseText)}});result=Resd(result);return c}function EraseCssDragDrop(a){$(a).removeClass(clORDERLEFT);$(a).removeClass(clORDERRIGHT);$(a).removeClass(clINSERT)}function Refresh(a){if(a){CloseProps()}if(!a){a=$(".principal").attr("nbform")}if(!a){a=$(".PWDformLink").data("objid")}if((a)&&(a!=="reset")){CargarFormularioVistaDiseno(a)}else{CargarFormularioInicial(false)}}function TreeStructure(e,a,g,l){var d=a.value.length;var m;var k;var b;var f;for(var c=0;c<d;c++){m=a.value[c];k=m;while(m.indexOf("-")!=-1){m=m.replace("-","");k=k.replace("-","\u00A0\u00A0")}if(((l==typeBL)&&IamYourFather(g,m))||($(g).attr("nbctrl")==m)){continue}b=document.createElement("option");b.setAttribute("value",m);f=document.createTextNode(k);b.appendChild(f);$(e).append(b)}}function IamYourFather(a,b){return($(a).find("div[nbctrl='"+b+"']").length!=0)}function GetTypeObject(a){type=a.substring(0,1);var b;switch(type){case"C":b=typeCtrl;break;case"E":b=typeED;break;case"B":b=typeBL;break;default:b=-1;return}return b}function GetTypeName(c,a){var b;switch(c){case"1":b="CONTROL("+a+")";break;case"2":b="ELEM.DISENO("+a+")";break;case"3":b="BLOQUE("+a+")";break;default:b="OTRO"}return b}function TimerReDrawMenuTabs(){ShowControlMenu()}function TimerHideMenuTabs(){$(selSELECTED).parents().each(function(){if(this.style.overflow=="hidden"){HideControlMenu();NoSelected();clearInterval(interval);return false}})}function ShowControlMenu(){var b;var c;var a;var d;var e=0;b=$(selSELECTED).position();d=b.top-24;a=b.left;if($(selSELECTED).hasClass(clBLOQUE)){d+=24}$(".PWmnuRESPONSIVE").children().each(function(f){e+=$(this).width()});$(".PWmnuRESPONSIVE").css({left:a,top:d,"min-width":e});EnableButtonsResponsive()}function HideControlMenu(){if($(".PWmnuRESPONSIVE").length!=0){HideSubMenus();$(".PWmnuRESPONSIVE").remove()}DeletePropMenuTABS()}function HideSubMenus(){$("div[class*='Submnu']").remove()}function SelectActualBlock(b){var a=$(b).parents(selBLOQUE).first().attr("nbctrl");$("#mnu_responsive_selblock").val(a)}function EnableButtonsResponsive(){var a=$(selSELECTED);if($(a).hasClass(clPRINCIPAL)){$("#mnu_responsive_btnplus").hide();$("#mnu_responsive_btnmin").hide();$("#mnu_responsive_btnlgset").hide();$("#mnu_responsive_btnup").hide();$("#mnu_responsive_btndwn").hide();$("#mnu_responsive_DelElem").hide();return}if($(a).hasClass("lg-12")){$("#mnu_responsive_btnplus").attr("disabled",true)}else{$("#mnu_responsive_btnplus").attr("disabled",false)}if($(a).hasClass("lg-1")){$("#mnu_responsive_btnmin").attr("disabled",true)}else{$("#mnu_responsive_btnmin").attr("disabled",false)}}function EnableMoreButtons(){if($(selSELECTED).hasClass(clBLOQUE)){$("#mnu_responsive_btnlbl").attr("disabled",true);$("#mnu_responsive_btnmore").hide()}else{$("#mnu_responsive_btnlbl").attr("disabled",false);$("#mnu_responsive_btnmore").show()}$("#mnu_responsive_txtlbl").hide();$("#mnu_responsive_btnaddblock").hide();$("#mnu_responsive_btnrmvblock").hide();if($(selSELECTED).hasClass(clBLOQUE)){$("#mnu_responsive_btnblock").attr("disabled",false);if($(selSELECTED).hasClass(clPRINCIPAL)){$("#mnu_responsive_btnrmvblock").attr("disabled",true)}}else{$("#mnu_responsive_btnblock").attr("disabled",true)}}function CargarPropiedades(d,c,b){if(!b){b=0}var a=document.createElement("object");$(a).attr("id",c);$(a).data("objid",c);switch(parseInt(d)){case typefrm:CargarPropiedadesForm(a,b);break;case typeCtrl:CargarPropiedadesCampo(a,b);break;case typeED:CargarPropiedadesED(a,b);break;case typeTAB:CargaPropiedadesTab(a,b);break;case typeBL:CargarPropiedadesBL(a,b);break;case typeTD:CargaPropiedadesTipoDato(a,b);OpenDivProps(true);break}if(b==0){$("#DivElemPopUp").attr("onclick","CloseProps(); CargarPropiedades("+d+",'"+c+"',1);");$(".PWmnuRESPONSIVE").hide()}}function CargarPropiedadesModal(b,a){CargarPropiedades(b,a,0)}function DeletePropMenuTABS(){$("#mnu_responsive_propTABS").remove();$("#mnu_responsive_DELTABS").remove();$("#mnu_responsive_LEFTTABS").remove();$("#mnu_responsive_RIGHTTABS").remove()}function ShowPropTAB(a){var b=document.getElementById("HiddenCurrentValueFormXPage").value;DeletePropMenuTABS();var j=$(a).attr("idtab");var l=parseInt($(a).attr("order"));var k=parseInt($(".nav.nav-tabs").last().attr("numtabs"));var f=$("<button>").attr({name:"responsive-more",title:"Propiedades",type:"button",id:"mnu_responsive_propTABS",display:"block",onclick:"CargarPropiedadesModal(4,'"+j+"');OpenDivProps(true);event.stopPropagation();","class":"buttonResponsive buttonResponsiveMore"});var c=$("<button>").attr({name:"responsive-Tabadd",title:"Nuevo TAB",type:"button",id:"mnu_responsive_ADDTABS",display:"block",style:"float:left;",onclick:"AddNewElement('0','"+b+"','0',4); event.stopPropagation();","class":"buttonResponsive buttonResponsiveAdd"});var d=$("<button>").attr({name:"responsive-Tabdel",title:"Borrar TAB",type:"button",id:"mnu_responsive_DELTABS",display:"block",onclick:"DeleteElement(4,'"+j+"'); event.stopPropagation();","class":"buttonResponsive buttonResponsiveDelete"});var e=$("<button>").attr({name:"responsive-Tableft",title:"<<",type:"button",id:"mnu_responsive_LEFTTABS",display:"block",onclick:"CambiarPosTab('"+j+"',-1)","class":"buttonResponsive buttonResponsiveLeft"});var g=$("<button>").attr({name:"responsive-TabRight",title:">>",type:"button",id:"mnu_responsive_RIGHTTABS",display:"block",onclick:"CambiarPosTab('"+j+"',1)","class":"buttonResponsive buttonResponsiveRight"});if(l>=1){$(a).append(e)}if(l<k-1){$(a).append(g)}$(a).append(f);$(a).append(d);if($("#mnu_responsive_ADDTABS").length==0){var i=$(".nav.nav-tabs:not(#DISmnutab)");$(i).append(c)}}function AddOptions(j,i,b,c){HideSubMenus();var g=$("<div class='PWSubmnu'></div>").attr({id:"mnuResponsiveAdd"});var d=$("<input>").attr({name:"responsive-addblock",title:"Agregar nuevo bloque al bloque seleccionado",type:"button",id:"mnu_responsive_btnaddblock",display:"block",onclick:"AddNewElement('0','"+c+"','"+i+"',3); event.stopPropagation();","class":"buttonResponsive buttonResponsiveBLOCK"});var f=$("<input>").attr({name:"responsive-addED",title:"Agregar nuevo E.D. al bloque seleccionado",type:"button",id:"mnu_responsive_btnAddED",display:"block",onclick:"AddNewElement('0','"+c+"','"+i+"',2); event.stopPropagation();","class":"buttonResponsive buttonResponsiveED"});var e=$("<input>").attr({name:"responsive-addCTRL",title:"Agregar nuevo control al bloque seleccionado",type:"button",id:"mnu_responsive_btnAddCTRL",display:"block",onclick:"ShowNewCtrlDialog('"+i+"')","class":"buttonResponsive buttonResponsiveCTRL"});var k=$("#mnu_responsive_AddElem").position();var l=$("#mnu_responsive_AddElem").width();var a=$("#mnu_responsive_AddElem").height();$(".PWmnuRESPONSIVE").append(g);$(g).css({width:l,left:k.left,top:k.top+a+2});$(g).append(e);$(g).append(f);$(g).append(d)}function ConstruirErrorCambio(e,b,a){var d;var c;switch(parseInt(e)){case typefrm:d="Formulario";break;case typeCtrl:d="Control";break;case typeED:d="Elemento Dise&ntilde;o";break;case typeBL:d="Bloque";break;case typeTAB:d="TAB";break;default:d="[DESCONOCIDO]"}if(!a){c=" como OCULTO"}else{c=" a "+a}showError("No ha sido posible mover el "+d+" "+b+c)}function CambiarPosTab(c,e){var b=document.getElementById("HiddenCurrentValueFormXPage").value;var d="";var a="";if(!CambiarOrden(d,c,a,b,typeTAB,e)){showError("No ha sido posible modificar la posicion del tab:"+c);return false}Refresh();$("a[idtab="+c+"]").click()}function CloseProps(){$("#DivElemPropGeneral").hide();$("#DivElemPopUp").removeAttr("onclick");$(".PWmnuRESPONSIVE").hide();if($(selSELECTED).length>0){$(selSELECTED).click()}}function OpenDivProps(a){$(".PWmnuRESPONSIVE").hide();$("#DivElemPropGeneral").show();if(!a){$(selSELECTED).click()}};