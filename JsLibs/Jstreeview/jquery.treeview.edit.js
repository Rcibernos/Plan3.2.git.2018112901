(function(a){var b=a.treeview.classes;var c=a.fn.treeview;a.fn.treeview=function(d){d=a.extend({},d);if(d.add){return this.trigger("add",[d.add])}if(d.remove){return this.trigger("remove",[d.remove])}return c.apply(this,arguments).bind("add",function(f,e){a(e).prev().removeClass(b.last).removeClass(b.lastCollapsable).removeClass(b.lastExpandable).find(">.hitarea").removeClass(b.lastCollapsableHitarea).removeClass(b.lastExpandableHitarea);a(e).find("li").andSelf().prepareBranches(d).applyClasses(d,a(this).data("toggler"))}).bind("remove",function(f,e){var h=a(e).prev();var g=a(e).parent();a(e).remove();h.filter(":last-child").addClass(b.last).filter("."+b.expandable).replaceClass(b.last,b.lastExpandable).end().find(">.hitarea").replaceClass(b.expandableHitarea,b.lastExpandableHitarea).end().filter("."+b.collapsable).replaceClass(b.last,b.lastCollapsable).end().find(">.hitarea").replaceClass(b.collapsableHitarea,b.lastCollapsableHitarea);if(g.is(":not(:has(>))")&&g[0]!=this){g.parent().removeClass(b.collapsable).removeClass(b.expandable);g.siblings(".hitarea").andSelf().remove()}})}})(jQuery);