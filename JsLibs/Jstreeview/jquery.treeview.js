(function(a){a.extend(a.fn,{swapClass:function(c,e){var d=this.filter("."+c);this.filter("."+e).removeClass(e).addClass(c);d.removeClass(c).addClass(e);return this},replaceClass:function(c,d){return this.filter("."+c).removeClass(c).addClass(d).end()},hoverClass:function(c){c=c||"hover";return this.hover(function(){a(this).addClass(c)},function(){a(this).removeClass(c)})},heightToggle:function(c,d){c?this.animate({height:"toggle"},c,d):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"]();if(d){d.apply(this,arguments)}})},heightHide:function(c,d){if(c){this.animate({height:"hide"},c,d)}else{this.hide();if(d){this.each(d)}}},prepareBranches:function(c){if(!c.prerendered){this.filter(":last-child:not(ul)").addClass(b.last);this.filter((c.collapsed?"":"."+b.closed)+":not(."+b.open+")").find(">ul").hide()}return this.filter(":has(>ul)")},applyClasses:function(d,e){this.filter(":has(>ul):not(:has(>a))").find(">span").unbind("click.treeview").bind("click.treeview",function(f){if(this==f.target){e.apply(a(this).next())}}).add(a("a",this)).hoverClass();if(!d.prerendered){this.filter(":has(>ul:hidden)").addClass(b.expandable).replaceClass(b.last,b.lastExpandable);this.not(":has(>ul:hidden)").addClass(b.collapsable).replaceClass(b.last,b.lastCollapsable);var c=this.find("div."+b.hitarea);if(!c.length){c=this.prepend('<div class="'+b.hitarea+'"/>').find("div."+b.hitarea)}c.removeClass().addClass(b.hitarea).each(function(){var f="";a.each(a(this).parent().attr("class").split(" "),function(){f+=this+"-hitarea "});a(this).addClass(f)})}this.find("div."+b.hitarea).click(e)},treeview:function(i){i=a.extend({cookieId:"treeview"},i);if(i.toggle){var d=i.toggle;i.toggle=function(){return d.apply(a(this).parent()[0],arguments)}}function l(o,m){function n(p){return function(){k.apply(a("div."+b.hitarea,o).filter(function(){return p?a(this).parent("."+p).length:true}));return false}}a("a:eq(0)",m).click(n(b.collapsable));a("a:eq(1)",m).click(n(b.expandable));a("a:eq(2)",m).click(n())}function k(){a(this).parent().find(">.hitarea").swapClass(b.collapsableHitarea,b.expandableHitarea).swapClass(b.lastCollapsableHitarea,b.lastExpandableHitarea).end().swapClass(b.collapsable,b.expandable).swapClass(b.lastCollapsable,b.lastExpandable).find(">ul").heightToggle(i.animated,i.toggle);if(i.unique){a(this).parent().siblings().find(">.hitarea").replaceClass(b.collapsableHitarea,b.expandableHitarea).replaceClass(b.lastCollapsableHitarea,b.lastExpandableHitarea).end().replaceClass(b.collapsable,b.expandable).replaceClass(b.lastCollapsable,b.lastExpandable).find(">ul").heightHide(i.animated,i.toggle)}}this.data("toggler",k);function h(){function m(o){return o?1:0}var n=[];c.each(function(p,o){n[p]=a(o).is(":has(>ul:visible)")?1:0});a.cookie(i.cookieId,n.join(""),i.cookieOptions)}function f(){var n=a.cookie(i.cookieId);if(n){var m=n.split("");c.each(function(p,o){a(o).find(">ul")[parseInt(m[p])?"show":"hide"]()})}}this.addClass("PWtreeview");var c=this.find("li").prepareBranches(i);switch(i.persist){case"cookie":var j=i.toggle;i.toggle=function(){h();if(j){j.apply(this,arguments)}};f();break;case"location":var e=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});if(e.length){var g=e.addClass("selected").parents("ul, li").add(e.next()).show();if(i.prerendered){g.filter("li").swapClass(b.collapsable,b.expandable).swapClass(b.lastCollapsable,b.lastExpandable).find(">.hitarea").swapClass(b.collapsableHitarea,b.expandableHitarea).swapClass(b.lastCollapsableHitarea,b.lastExpandableHitarea)}}break}c.applyClasses(i,k);if(i.control){l(this,i.control);a(i.control).show()}return this}});a.treeview={};var b=(a.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"})})(jQuery);