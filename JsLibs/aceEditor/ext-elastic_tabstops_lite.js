define("ace/ext/elastic_tabstops_lite",["require","exports","module","ace/editor","ace/config"],function(e,c,d){var b=function(g){this.$editor=g;var i=this;var f=[];var h=false;this.onAfterExec=function(){h=false;i.processRows(f);f=[]};this.onExec=function(){h=true};this.onChange=function(j){if(h){if(f.indexOf(j.start.row)==-1){f.push(j.start.row)}if(j.end.row!=j.start.row){f.push(j.end.row)}}}};(function(){this.processRows=function(o){this.$inChange=true;var h=[];for(var j=0,m=o.length;j<m;j++){var k=o[j];if(h.indexOf(k)>-1){continue}var f=this.$findCellWidthsForBlock(k);var g=this.$setBlockCellWidthsToMax(f.cellWidths);var n=f.firstRow;for(var p=0,i=g.length;p<i;p++){var q=g[p];h.push(n);this.$adjustRow(n,q);n++}}this.$inChange=false};this.$findCellWidthsForBlock=function(i){var f=[],k;var j=i;while(j>=0){k=this.$cellWidthsForRow(j);if(k.length==0){break}f.unshift(k);j--}var g=j+1;j=i;var h=this.$editor.session.getLength();while(j<h-1){j++;k=this.$cellWidthsForRow(j);if(k.length==0){break}f.push(k)}return{cellWidths:f,firstRow:g}};this.$cellWidthsForRow=function(n){var o=this.$selectionColumnsForRow(n);var p=[-1].concat(this.$tabsForRow(n));var q=p.map(function(i){return 0}).slice(1);var k=this.$editor.session.getLine(n);for(var g=0,j=p.length-1;g<j;g++){var h=p[g]+1;var l=p[g+1];var m=this.$rightmostSelectionInCell(o,l);var f=k.substring(h,l);q[g]=Math.max(f.replace(/\s+$/g,"").length,m-h)}return q};this.$selectionColumnsForRow=function(g){var h=[],f=this.$editor.getCursorPosition();if(this.$editor.session.getSelection().isEmpty()){if(g==f.row){h.push(f.column)}}return h};this.$setBlockCellWidthsToMax=function(i){var u=true,g,f,p;var m=this.$izip_longest(i);for(var h=0,o=m.length;h<o;h++){var k=m[h];if(!k.push){console.error(k);continue}k.push(NaN);for(var q=0,t=k.length;q<t;q++){var v=k[q];if(u){g=q;p=0;u=false}if(isNaN(v)){f=q;for(var n=g;n<f;n++){i[n][h]=p}u=true}p=Math.max(p,v)}}return i};this.$rightmostSelectionInCell=function(k,f){var i=0;if(k.length){var h=[];for(var j=0,g=k.length;j<g;j++){if(k[j]<=f){h.push(j)}else{h.push(0)}}i=Math.max.apply(Math,h)}return i};this.$tabsForRow=function(i){var j=[],f=this.$editor.session.getLine(i),h=/\t/g,g;while((g=h.exec(f))!=null){j.push(g.index)}return j};this.$adjustRow=function(q,u){var r=this.$tabsForRow(q);if(r.length==0){return}var f=0,o=-1;var h=this.$izip(u,r);for(var j=0,n=h.length;j<n;j++){var t=h[j][0],m=h[j][1];o+=1+t;m+=f;var g=o-m;if(g==0){continue}var p=this.$editor.session.getLine(q).substr(0,m);var s=p.replace(/\s*$/g,"");var k=p.length-s.length;if(g>0){this.$editor.session.getDocument().insertInLine({row:q,column:m+1},Array(g+1).join(" ")+"\t");this.$editor.session.getDocument().removeInLine(q,m,m+1);f+=g}if(g<0&&k>=-g){this.$editor.session.getDocument().removeInLine(q,m+g,m);f+=g}}};this.$izip_longest=function(j){if(!j[0]){return[]}var n=j[0].length;var k=j.length;for(var g=1;g<k;g++){var h=j[g].length;if(h>n){n=h}}var f=[];for(var m=0;m<n;m++){var o=[];for(var g=0;g<k;g++){if(j[g][m]===""){o.push(NaN)}else{o.push(j[g][m])}}f.push(o)}return f};this.$izip=function(l,k){var j=l.length>=k.length?k.length:l.length;var f=[];for(var g=0;g<j;g++){var h=[l[g],k[g]];f.push(h)}return f}}).call(b.prototype);c.ElasticTabstopsLite=b;var a=e("../editor").Editor;e("../config").defineOptions(a.prototype,"editor",{useElasticTabstops:{set:function(f){if(f){if(!this.elasticTabstops){this.elasticTabstops=new b(this)}this.commands.on("afterExec",this.elasticTabstops.onAfterExec);this.commands.on("exec",this.elasticTabstops.onExec);this.on("change",this.elasticTabstops.onChange)}else{if(this.elasticTabstops){this.commands.removeListener("afterExec",this.elasticTabstops.onAfterExec);this.commands.removeListener("exec",this.elasticTabstops.onExec);this.removeListener("change",this.elasticTabstops.onChange)}}}}})});(function(){window.require(["ace/ext/elastic_tabstops_lite"],function(){})})();