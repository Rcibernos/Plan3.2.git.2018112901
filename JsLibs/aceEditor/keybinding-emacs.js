define("ace/occur",["require","exports","module","ace/lib/oop","ace/range","ace/search","ace/edit_session","ace/search_highlight","ace/lib/dom"],function(h,c,d){var f=h("./lib/oop");var g=h("./range").Range;var i=h("./search").Search;var b=h("./edit_session").EditSession;var j=h("./search_highlight").SearchHighlight;function e(){}f.inherits(e,i);(function(){this.enter=function(k,l){if(!l.needle){return false}var m=k.getCursorPosition();this.displayOccurContent(k,l);var n=this.originalToOccurPosition(k.session,m);k.moveCursorToPosition(n);return true};this.exit=function(k,l){var m=l.translatePosition&&k.getCursorPosition();var n=m&&this.occurToOriginalPosition(k.session,m);this.displayOriginalContent(k);if(n){k.moveCursorToPosition(n)}return true};this.highlight=function(m,l){var k=m.$occurHighlight=m.$occurHighlight||m.addDynamicMarker(new j(null,"ace_occur-highlight","text"));k.setRegexp(l);m._emit("changeBackMarker")};this.displayOccurContent=function(k,o){this.$originalSession=k.session;var l=this.matchingLines(k.session,o);var m=l.map(function(p){return p.content});var n=new b(m.join("\n"));n.$occur=this;n.$occurMatchingLines=l;k.setSession(n);this.$useEmacsStyleLineStart=this.$originalSession.$useEmacsStyleLineStart;n.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart;this.highlight(n,o.re);n._emit("changeBackMarker")};this.displayOriginalContent=function(k){k.setSession(this.$originalSession);this.$originalSession.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart};this.originalToOccurPosition=function(o,n){var l=o.$occurMatchingLines;var m={row:0,column:0};if(!l){return m}for(var k=0;k<l.length;k++){if(l[k].row===n.row){return{row:k,column:n.column}}}return m};this.occurToOriginalPosition=function(m,l){var k=m.$occurMatchingLines;if(!k||!k[l.row]){return l}return{row:k[l.row].row,column:l.column}};this.matchingLines=function(m,k){k=f.mixin({},k);if(!m||!k.needle){return[]}var l=new i();l.set(k);return l.findAll(m).reduce(function(o,p){var q=p.start.row;var n=o[o.length-1];return n&&n.row===q?o:o.concat({row:q,content:m.getLine(q)})},[])}}).call(e.prototype);var a=h("./lib/dom");a.importCssString(".ace_occur-highlight {\n    border-radius: 4px;\n    background-color: rgba(87, 255, 8, 0.25);\n    position: absolute;\n    z-index: 4;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    box-shadow: 0 0 4px rgb(91, 255, 50);\n}\n.ace_dark .ace_occur-highlight {\n    background-color: rgb(80, 140, 85);\n    box-shadow: 0 0 4px rgb(60, 120, 70);\n}\n","incremental-occur-highlighting");c.Occur=e});define("ace/commands/occur_commands",["require","exports","module","ace/config","ace/occur","ace/keyboard/hash_handler","ace/lib/oop"],function(j,b,d){var a=j("../config"),e=j("../occur").Occur;var h={name:"occur",exec:function(l,n){var k=!!l.session.$occur;var m=new e().enter(l,n);if(m&&!k){g.installIn(l)}},readOnly:true};var f=[{name:"occurexit",bindKey:"esc|Ctrl-G",exec:function(k){var l=k.session.$occur;if(!l){return}l.exit(k,{});if(!k.session.$occur){g.uninstallFrom(k)}},readOnly:true},{name:"occuraccept",bindKey:"enter",exec:function(k){var l=k.session.$occur;if(!l){return}l.exit(k,{translatePosition:true});if(!k.session.$occur){g.uninstallFrom(k)}},readOnly:true}];var c=j("../keyboard/hash_handler").HashHandler;var i=j("../lib/oop");function g(){}i.inherits(g,c);(function(){this.isOccurHandler=true;this.attach=function(l){c.call(this,f,l.commands.platform);this.$editor=l};var k=this.handleKeyboard;this.handleKeyboard=function(m,n,o,p){var l=k.call(this,m,n,o,p);return(l&&l.command)?l:undefined}}).call(g.prototype);g.installIn=function(k){var l=new this();k.keyBinding.addKeyboardHandler(l);k.commands.addCommands(f)};g.uninstallFrom=function(k){k.commands.removeCommands(f);var l=k.getKeyboardHandler();if(l.isOccurHandler){k.keyBinding.removeKeyboardHandler(l)}};b.occurStartCommand=h});define("ace/commands/incremental_search_commands",["require","exports","module","ace/config","ace/lib/oop","ace/keyboard/hash_handler","ace/commands/occur_commands"],function(h,b,e){var a=h("../config");var g=h("../lib/oop");var c=h("../keyboard/hash_handler").HashHandler;var f=h("./occur_commands").occurStartCommand;b.iSearchStartCommands=[{name:"iSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(i,j){a.loadModule(["core","ace/incremental_search"],function(k){var l=k.iSearch=k.iSearch||new k.IncrementalSearch();l.activate(i,j.backwards);if(j.jumpToFirstMatch){l.next(j)}})},readOnly:true},{name:"iSearchBackwards",exec:function(i,j){i.execCommand("iSearch",{backwards:true})},readOnly:true},{name:"iSearchAndGo",bindKey:{win:"Ctrl-K",mac:"Command-G"},exec:function(i,j){i.execCommand("iSearch",{jumpToFirstMatch:true,useCurrentOrPrevSearch:true})},readOnly:true},{name:"iSearchBackwardsAndGo",bindKey:{win:"Ctrl-Shift-K",mac:"Command-Shift-G"},exec:function(i){i.execCommand("iSearch",{jumpToFirstMatch:true,backwards:true,useCurrentOrPrevSearch:true})},readOnly:true}];b.iSearchCommands=[{name:"restartSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(i){i.cancelSearch(true)}},{name:"searchForward",bindKey:{win:"Ctrl-S|Ctrl-K",mac:"Ctrl-S|Command-G"},exec:function(i,j){j.useCurrentOrPrevSearch=true;i.next(j)}},{name:"searchBackward",bindKey:{win:"Ctrl-R|Ctrl-Shift-K",mac:"Ctrl-R|Command-Shift-G"},exec:function(i,j){j.useCurrentOrPrevSearch=true;j.backwards=true;i.next(j)}},{name:"extendSearchTerm",exec:function(i,j){i.addString(j)}},{name:"extendSearchTermSpace",bindKey:"space",exec:function(i){i.addString(" ")}},{name:"shrinkSearchTerm",bindKey:"backspace",exec:function(i){i.removeChar()}},{name:"confirmSearch",bindKey:"return",exec:function(i){i.deactivate()}},{name:"cancelSearch",bindKey:"esc|Ctrl-G",exec:function(i){i.deactivate(true)}},{name:"occurisearch",bindKey:"Ctrl-O",exec:function(i){var j=g.mixin({},i.$options);i.deactivate();f.exec(i.$editor,j)}},{name:"yankNextWord",bindKey:"Ctrl-w",exec:function(j){var i=j.$editor,k=i.selection.getRangeOfMovements(function(m){m.moveCursorWordRight()}),l=i.session.getTextRange(k);j.addString(l)}},{name:"yankNextChar",bindKey:"Ctrl-Alt-y",exec:function(j){var i=j.$editor,k=i.selection.getRangeOfMovements(function(m){m.moveCursorRight()}),l=i.session.getTextRange(k);j.addString(l)}},{name:"recenterTopBottom",bindKey:"Ctrl-l",exec:function(i){i.$editor.execCommand("recenterTopBottom")}},{name:"selectAllMatches",bindKey:"Ctrl-space",exec:function(k){var i=k.$editor,j=i.session.$isearchHighlight,l=j&&j.cache?j.cache.reduce(function(n,m){return n.concat(m?m:[])},[]):[];k.deactivate(false);l.forEach(i.selection.addRange.bind(i.selection))}},{name:"searchAsRegExp",bindKey:"Alt-r",exec:function(i){i.convertNeedleToRegExp()}}].map(function(i){i.readOnly=true;i.isIncrementalSearchCommand=true;i.scrollIntoView="animate-cursor";return i});function d(i){this.$iSearch=i}g.inherits(d,c);(function(){this.attach=function(j){var k=this.$iSearch;c.call(this,b.iSearchCommands,j.commands.platform);this.$commandExecHandler=j.commands.addEventListener("exec",function(l){if(!l.command.isIncrementalSearchCommand){return k.deactivate()}l.stopPropagation();l.preventDefault();var n=j.session.getScrollTop();var m=l.command.exec(k,l.args||{});j.renderer.scrollCursorIntoView(null,0.5);j.renderer.animateScrolling(n);return m})};this.detach=function(j){if(!this.$commandExecHandler){return}j.commands.removeEventListener("exec",this.$commandExecHandler);delete this.$commandExecHandler};var i=this.handleKeyboard;this.handleKeyboard=function(k,m,n,o){if(((m===1||m===8)&&n==="v")||(m===1&&n==="y")){return null}var j=i.call(this,k,m,n,o);if(j.command){return j}if(m==-1){var l=this.commands.extendSearchTerm;if(l){return{command:l,args:n}}}return false}}).call(d.prototype);b.IncrementalSearchKeyboardHandler=d});define("ace/incremental_search",["require","exports","module","ace/lib/oop","ace/range","ace/search","ace/search_highlight","ace/commands/incremental_search_commands","ace/lib/dom","ace/commands/command_manager","ace/editor","ace/config"],function(n,d,i){var k=n("./lib/oop");var l=n("./range").Range;var o=n("./search").Search;var p=n("./search_highlight").SearchHighlight;var f=n("./commands/incremental_search_commands");var g=f.IncrementalSearchKeyboardHandler;function e(){this.$options={wrap:false,skipCurrent:false};this.$keyboardHandler=new g(this)}k.inherits(e,o);function h(r){return r instanceof RegExp}function m(s){var u=String(s),t=u.indexOf("/"),r=u.lastIndexOf("/");return{expression:u.slice(t+1,r),flags:u.slice(r+1)}}function q(t,s){try{return new RegExp(t,s)}catch(r){return t}}function j(r){return q(r.expression,r.flags)}(function(){this.activate=function(s,r){this.$editor=s;this.$startPos=this.$currentPos=s.getCursorPosition();this.$options.needle="";this.$options.backwards=r;s.keyBinding.addKeyboardHandler(this.$keyboardHandler);this.$originalEditorOnPaste=s.onPaste;s.onPaste=this.onPaste.bind(this);this.$mousedownHandler=s.addEventListener("mousedown",this.onMouseDown.bind(this));this.selectionFix(s);this.statusMessage(true)};this.deactivate=function(s){this.cancelSearch(s);var r=this.$editor;r.keyBinding.removeKeyboardHandler(this.$keyboardHandler);if(this.$mousedownHandler){r.removeEventListener("mousedown",this.$mousedownHandler);delete this.$mousedownHandler}r.onPaste=this.$originalEditorOnPaste;this.message("")};this.selectionFix=function(r){if(r.selection.isEmpty()&&!r.session.$emacsMark){r.clearSelection()}};this.highlight=function(s){var t=this.$editor.session,r=t.$isearchHighlight=t.$isearchHighlight||t.addDynamicMarker(new p(null,"ace_isearch-result","text"));r.setRegexp(s);t._emit("changeBackMarker")};this.cancelSearch=function(s){var r=this.$editor;this.$prevNeedle=this.$options.needle;this.$options.needle="";if(s){r.moveCursorToPosition(this.$startPos);this.$currentPos=this.$startPos}else{r.pushEmacsMark&&r.pushEmacsMark(this.$startPos,false)}this.highlight(null);return l.fromPoints(this.$currentPos,this.$currentPos)};this.highlightAndFindWithNeedle=function(s,t){if(!this.$editor){return null}var u=this.$options;if(t){u.needle=t.call(this,u.needle||"")||""}if(u.needle.length===0){this.statusMessage(true);return this.cancelSearch(true)}u.start=this.$currentPos;var v=this.$editor.session,r=this.find(v),w=this.$editor.emacsMark?!!this.$editor.emacsMark():!this.$editor.selection.isEmpty();if(r){if(u.backwards){r=l.fromPoints(r.end,r.start)}this.$editor.selection.setRange(l.fromPoints(w?this.$startPos:r.end,r.end));if(s){this.$currentPos=r.end}this.highlight(u.re)}this.statusMessage(r);return r};this.addString=function(r){return this.highlightAndFindWithNeedle(false,function(s){if(!h(s)){return s+r}var t=m(s);t.expression+=r;return j(t)})};this.removeChar=function(r){return this.highlightAndFindWithNeedle(false,function(s){if(!h(s)){return s.substring(0,s.length-1)}var t=m(s);t.expression=t.expression.substring(0,t.expression.length-1);return j(t)})};this.next=function(r){r=r||{};this.$options.backwards=!!r.backwards;this.$currentPos=this.$editor.getCursorPosition();return this.highlightAndFindWithNeedle(true,function(s){return r.useCurrentOrPrevSearch&&s.length===0?this.$prevNeedle||"":s})};this.onMouseDown=function(r){this.deactivate();return true};this.onPaste=function(r){this.addString(r)};this.convertNeedleToRegExp=function(){return this.highlightAndFindWithNeedle(false,function(r){return h(r)?r:q(r,"ig")})};this.convertNeedleToString=function(){return this.highlightAndFindWithNeedle(false,function(r){return h(r)?m(r).expression:r})};this.statusMessage=function(r){var t=this.$options,s="";s+=t.backwards?"reverse-":"";s+="isearch: "+t.needle;s+=r?"":" (not found)";this.message(s)};this.message=function(r){if(this.$editor.showCommandLine){this.$editor.showCommandLine(r);this.$editor.focus()}else{console.log(r)}}}).call(e.prototype);d.IncrementalSearch=e;var b=n("./lib/dom");b.importCssString&&b.importCssString(".ace_marker-layer .ace_isearch-result {  position: absolute;  z-index: 6;  -moz-box-sizing: border-box;  -webkit-box-sizing: border-box;  box-sizing: border-box;}div.ace_isearch-result {  border-radius: 4px;  background-color: rgba(255, 200, 0, 0.5);  box-shadow: 0 0 4px rgb(255, 200, 0);}.ace_dark div.ace_isearch-result {  background-color: rgb(100, 110, 160);  box-shadow: 0 0 4px rgb(80, 90, 140);}","incremental-search-highlighting");var a=n("./commands/command_manager");(function(){this.setupIncrementalSearch=function(r,u){if(this.usesIncrementalSearch==u){return}this.usesIncrementalSearch=u;var s=f.iSearchStartCommands;var t=u?"addCommands":"removeCommands";this[t](s)}}).call(a.CommandManager.prototype);var c=n("./editor").Editor;n("./config").defineOptions(c.prototype,"editor",{useIncrementalSearch:{set:function(r){this.keyBinding.$handlers.forEach(function(s){if(s.setupIncrementalSearch){s.setupIncrementalSearch(this,r)}});this._emit("incrementalSearchSettingChanged",{isEnabled:r})}}})});define("ace/keyboard/emacs",["require","exports","module","ace/lib/dom","ace/incremental_search","ace/commands/incremental_search_commands","ace/keyboard/hash_handler","ace/lib/keys"],function(p,j,o){var g=p("../lib/dom");p("../incremental_search");var m=p("../commands/incremental_search_commands");var q=function(u,v){var r=this.scroller.getBoundingClientRect();var s=Math.floor((u+this.scrollLeft-r.left-this.$padding)/this.characterWidth);var t=Math.floor((v+this.scrollTop-r.top)/this.lineHeight);return this.session.screenToDocumentPosition(t,s)};var k=p("./hash_handler").HashHandler;j.handler=new k();j.handler.isEmacs=true;j.handler.$id="ace/keyboard/emacs";var l=false;var b;var a;j.handler.attach=function(r){if(!l){l=true;g.importCssString("            .emacs-mode .ace_cursor{                border: 1px rgba(50,250,50,0.8) solid!important;                -moz-box-sizing: border-box!important;                -webkit-box-sizing: border-box!important;                box-sizing: border-box!important;                background-color: rgba(0,250,0,0.9);                opacity: 0.5;            }            .emacs-mode .ace_hidden-cursors .ace_cursor{                opacity: 1;                background-color: transparent;            }            .emacs-mode .ace_overwrite-cursors .ace_cursor {                opacity: 1;                background-color: transparent;                border-width: 0 0 2px 2px !important;            }            .emacs-mode .ace_text-layer {                z-index: 4            }            .emacs-mode .ace_cursor-layer {                z-index: 2            }","emacsMode")}b=r.session.$selectLongWords;r.session.$selectLongWords=true;a=r.session.$useEmacsStyleLineStart;r.session.$useEmacsStyleLineStart=true;r.session.$emacsMark=null;r.session.$emacsMarkRing=r.session.$emacsMarkRing||[];r.emacsMark=function(){return this.session.$emacsMark};r.setEmacsMark=function(s){this.session.$emacsMark=s};r.pushEmacsMark=function(t,s){var u=this.session.$emacsMark;if(u){this.session.$emacsMarkRing.push(u)}if(!t||s){this.setEmacsMark(t)}else{this.session.$emacsMarkRing.push(t)}};r.popEmacsMark=function(){var s=this.emacsMark();if(s){this.setEmacsMark(null);return s}return this.session.$emacsMarkRing.pop()};r.getLastEmacsMark=function(s){return this.session.$emacsMark||this.session.$emacsMarkRing.slice(-1)[0]};r.emacsMarkForSelection=function(w){var x=this.selection,v=this.multiSelect?this.multiSelect.getAllRanges().length:1,y=x.index||0,u=this.session.$emacsMarkRing,t=u.length-(v-y),s=u[t]||x.anchor;if(w){u.splice(t,1,"row" in w&&"column" in w?w:undefined)}return s};r.on("click",d);r.on("changeSession",c);r.renderer.screenToTextCoordinates=q;r.setStyle("emacs-mode");r.commands.addCommands(f);j.handler.platform=r.commands.platform;r.$emacsModeHandler=this;r.addEventListener("copy",this.onCopy);r.addEventListener("paste",this.onPaste)};j.handler.detach=function(r){delete r.renderer.screenToTextCoordinates;r.session.$selectLongWords=b;r.session.$useEmacsStyleLineStart=a;r.removeEventListener("click",d);r.removeEventListener("changeSession",c);r.unsetStyle("emacs-mode");r.commands.removeCommands(f);r.removeEventListener("copy",this.onCopy);r.removeEventListener("paste",this.onPaste);r.$emacsModeHandler=null};var c=function(r){if(r.oldSession){r.oldSession.$selectLongWords=b;r.oldSession.$useEmacsStyleLineStart=a}b=r.session.$selectLongWords;r.session.$selectLongWords=true;a=r.session.$useEmacsStyleLineStart;r.session.$useEmacsStyleLineStart=true;if(!r.session.hasOwnProperty("$emacsMark")){r.session.$emacsMark=null}if(!r.session.hasOwnProperty("$emacsMarkRing")){r.session.$emacsMarkRing=[]}};var d=function(r){r.editor.session.$emacsMark=null};var n=p("../lib/keys").KEY_MODS;var h={C:"ctrl",S:"shift",M:"alt",CMD:"command"};var e=["C-S-M-CMD","S-M-CMD","C-M-CMD","C-S-CMD","C-S-M","M-CMD","S-CMD","S-M","C-CMD","C-M","C-S","CMD","M","S","C"];e.forEach(function(r){var s=0;r.split("-").forEach(function(t){s=s|n[h[t]]});h[s]=r.toLowerCase()+"-"});j.handler.onCopy=function(r,s){if(s.$handlesEmacsOnCopy){return}s.$handlesEmacsOnCopy=true;j.handler.commands.killRingSave.exec(s);s.$handlesEmacsOnCopy=false};j.handler.onPaste=function(r,s){s.pushEmacsMark(s.getCursorPosition())};j.handler.bindKey=function(t,s){if(typeof t=="object"){t=t[this.platform]}if(!t){return}var r=this.commandKeyBinding;t.split("|").forEach(function(u){u=u.toLowerCase();r[u]=s;var v=u.split(" ").slice(0,-1);v.reduce(function(x,y,w){var z=x[w-1]?x[w-1]+" ":"";return x.concat([z+y])},[]).forEach(function(w){if(!r[w]){r[w]="null"}})},this)};j.handler.getStatusText=function(s,r){var t="";if(r.count){t+=r.count}if(r.keyChain){t+=" "+r.keyChain}return t};j.handler.handleKeyboard=function(u,w,x,y){if(y===-1){return undefined}var v=u.editor;v._signal("changeStatus");if(w==-1){v.pushEmacsMark();if(u.count){var A=new Array(u.count+1).join(x);u.count=null;return{command:"insertstring",args:A}}}var z=h[w];if(z=="c-"||u.count){var t=parseInt(x[x.length-1]);if(typeof t==="number"&&!isNaN(t)){u.count=Math.max(u.count,0)||0;u.count=10*u.count+t;return{command:"null"}}}if(z){x=z+x}if(u.keyChain){x=u.keyChain+=" "+x}var s=this.commandKeyBinding[x];u.keyChain=s=="null"?x:"";if(!s){return undefined}if(s==="null"){return{command:"null"}}if(s==="universalArgument"){u.count=-4;return{command:"null"}}var r;if(typeof s!=="string"){r=s.args;if(s.command){s=s.command}if(s==="goorselect"){s=v.emacsMark()?r[1]:r[0];r=null}}if(typeof s==="string"){if(s==="insertstring"||s==="splitline"||s==="togglecomment"){v.pushEmacsMark()}s=this.commands[s]||v.commands.commands[s];if(!s){return undefined}}if(!s.readOnly&&!s.isYank){u.lastCommand=null}if(!s.readOnly&&v.emacsMark()){v.setEmacsMark(null)}if(u.count){var t=u.count;u.count=0;if(!s||!s.handlesCount){return{args:r,command:{exec:function(C,B){for(var D=0;D<t;D++){s.exec(C,B)}},multiSelectAction:s.multiSelectAction}}}else{if(!r){r={}}if(typeof r==="object"){r.count=t}}}return{command:s,args:r}};j.emacsKeys={"Up|C-p":{command:"goorselect",args:["golineup","selectup"]},"Down|C-n":{command:"goorselect",args:["golinedown","selectdown"]},"Left|C-b":{command:"goorselect",args:["gotoleft","selectleft"]},"Right|C-f":{command:"goorselect",args:["gotoright","selectright"]},"C-Left|M-b":{command:"goorselect",args:["gotowordleft","selectwordleft"]},"C-Right|M-f":{command:"goorselect",args:["gotowordright","selectwordright"]},"Home|C-a":{command:"goorselect",args:["gotolinestart","selecttolinestart"]},"End|C-e":{command:"goorselect",args:["gotolineend","selecttolineend"]},"C-Home|S-M-,":{command:"goorselect",args:["gotostart","selecttostart"]},"C-End|S-M-.":{command:"goorselect",args:["gotoend","selecttoend"]},"S-Up|S-C-p":"selectup","S-Down|S-C-n":"selectdown","S-Left|S-C-b":"selectleft","S-Right|S-C-f":"selectright","S-C-Left|S-M-b":"selectwordleft","S-C-Right|S-M-f":"selectwordright","S-Home|S-C-a":"selecttolinestart","S-End|S-C-e":"selecttolineend","S-C-Home":"selecttostart","S-C-End":"selecttoend","C-l":"recenterTopBottom","M-s":"centerselection","M-g":"gotoline","C-x C-p":"selectall","C-Down":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"C-Up":{command:"goorselect",args:["gotopageup","selectpageup"]},"PageDown|C-v":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"PageUp|M-v":{command:"goorselect",args:["gotopageup","selectpageup"]},"S-C-Down":"selectpagedown","S-C-Up":"selectpageup","C-s":"iSearch","C-r":"iSearchBackwards","M-C-s":"findnext","M-C-r":"findprevious","S-M-5":"replace",Backspace:"backspace","Delete|C-d":"del","Return|C-m":{command:"insertstring",args:"\n"},"C-o":"splitline","M-d|C-Delete":{command:"killWord",args:"right"},"C-Backspace|M-Backspace|M-Delete":{command:"killWord",args:"left"},"C-k":"killLine","C-y|S-Delete":"yank","M-y":"yankRotate","C-g":"keyboardQuit","C-w|C-S-W":"killRegion","M-w":"killRingSave","C-Space":"setMark","C-x C-x":"exchangePointAndMark","C-t":"transposeletters","M-u":"touppercase","M-l":"tolowercase","M-/":"autocomplete","C-u":"universalArgument","M-;":"togglecomment","C-/|C-x u|S-C--|C-z":"undo","S-C-/|S-C-x u|C--|S-C-z":"redo","C-x r":"selectRectangularRegion","M-x":{command:"focusCommandLine",args:"M-x "}};j.handler.bindKeys(j.emacsKeys);j.handler.addCommands({recenterTopBottom:function(r){var u=r.renderer;var t=u.$cursorLayer.getPixelPosition();var s=u.$size.scrollerHeight-u.lineHeight;var v=u.scrollTop;if(Math.abs(t.top-v)<2){v=t.top-s}else{if(Math.abs(t.top-v-s*0.5)<2){v=t.top}else{v=t.top-s*0.5}}r.session.setScrollTop(v)},selectRectangularRegion:function(r){r.multiSelect.toggleBlockSelection()},setMark:{exec:function(s,r){if(r&&r.count){if(s.inMultiSelectMode){s.forEachSelection(v)}else{v()}v();return}var u=s.emacsMark(),x=s.selection.getAllRanges(),w=x.map(function(z){return{row:z.start.row,column:z.start.column}}),y=true,t=x.every(function(z){return z.isEmpty()});if(y&&(u||!t)){if(s.inMultiSelectMode){s.forEachSelection({exec:s.clearSelection.bind(s)})}else{s.clearSelection()}if(u){s.pushEmacsMark(null)}return}if(!u){w.forEach(function(z){s.pushEmacsMark(z)});s.setEmacsMark(w[w.length-1]);return}function v(){var z=s.popEmacsMark();z&&s.moveCursorToPosition(z)}},readOnly:true,handlesCount:true},exchangePointAndMark:{exec:function i(s,r){var u=s.selection;if(!r.count&&!u.isEmpty()){u.setSelectionRange(u.getRange(),!u.isBackwards());return}if(r.count){var t={row:u.lead.row,column:u.lead.column};u.clearSelection();u.moveCursorToPosition(s.emacsMarkForSelection(t))}else{u.selectToPosition(s.emacsMarkForSelection())}},readOnly:true,handlesCount:true,multiSelectAction:"forEach"},killWord:{exec:function(s,r){s.clearSelection();if(r=="left"){s.selection.selectWordLeft()}else{s.selection.selectWordRight()}var t=s.getSelectionRange();var u=s.session.getTextRange(t);j.killRing.add(u);s.session.remove(t);s.clearSelection()},multiSelectAction:"forEach"},killLine:function(r){r.pushEmacsMark(null);r.clearSelection();var u=r.getSelectionRange();var t=r.session.getLine(u.start.row);u.end.column=t.length;t=t.substr(u.start.column);var s=r.session.getFoldLine(u.start.row);if(s&&u.end.row!=s.end.row){u.end.row=s.end.row;t="x"}if(/^\s*$/.test(t)){u.end.row++;t=r.session.getLine(u.end.row);u.end.column=/^\s*$/.test(t)?t.length:0}var v=r.session.getTextRange(u);if(r.prevOp.command==this){j.killRing.append(v)}else{j.killRing.add(v)}r.session.remove(u);r.clearSelection()},yank:function(r){r.onPaste(j.killRing.get()||"");r.keyBinding.$data.lastCommand="yank"},yankRotate:function(r){if(r.keyBinding.$data.lastCommand!="yank"){return}r.undo();r.session.$emacsMarkRing.pop();r.onPaste(j.killRing.rotate());r.keyBinding.$data.lastCommand="yank"},killRegion:{exec:function(r){j.killRing.add(r.getCopyText());r.commands.byName.cut.exec(r);r.setEmacsMark(null)},readOnly:true,multiSelectAction:"forEach"},killRingSave:{exec:function(s){s.$handlesEmacsOnCopy=true;var t=s.session.$emacsMarkRing.slice(),r=[];j.killRing.add(s.getCopyText());setTimeout(function(){function u(){var x=s.selection,w=x.getRange(),v=x.isBackwards()?w.end:w.start;r.push({row:v.row,column:v.column});x.clearSelection()}s.$handlesEmacsOnCopy=false;if(s.inMultiSelectMode){s.forEachSelection({exec:u})}else{u()}s.session.$emacsMarkRing=t.concat(r.reverse())},0)},readOnly:true},keyboardQuit:function(r){r.selection.clearSelection();r.setEmacsMark(null);r.keyBinding.$data.count=null},focusCommandLine:function(s,r){if(s.showCommandLine){s.showCommandLine(r)}}});j.handler.addCommands(m.iSearchStartCommands);var f=j.handler.commands;f.yank.isYank=true;f.yankRotate.isYank=true;j.killRing={$data:[],add:function(r){r&&this.$data.push(r);if(this.$data.length>30){this.$data.shift()}},append:function(s){var r=this.$data.length-1;var t=this.$data[r]||"";if(s){t+=s}if(t){this.$data[r]=t}},get:function(r){r=r||1;return this.$data.slice(this.$data.length-r,this.$data.length).reverse().join("\n")},pop:function(){if(this.$data.length>1){this.$data.pop()}return this.get()},rotate:function(){this.$data.unshift(this.$data.pop());return this.get()}}});