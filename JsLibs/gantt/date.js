Date.$VERSION=1.02;Date.LZ=function(a){return(a<0||a>9?"":"0")+a};Date.monthNames=new Array("January","February","March","April","May","June","July","August","September","October","November","December");Date.monthAbbreviations=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");Date.dayNames=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");Date.dayAbbreviations=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat");Date.preferAmericanFormat=true;Date.firstDayOfWeek=0;Date.defaultFormat="dd/MM/yyyy";if(!Date.prototype.getFullYear){Date.prototype.getFullYear=function(){var a=this.getYear();return(a<1900?a+1900:a)}}Date.parseString=function(F,m){if(typeof(m)=="undefined"||m==null||m==""){var n=new Array(Date.defaultFormat,"y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d","MMM-d","d-MMM");var z=new Array("M/d/y","M-d-y","M.d.y","M/d","M-d");var h=new Array("d/M/y","d-M-y","d.M.y","d/M","d-M");var e=new Array(n,Date.preferAmericanFormat?z:h,Date.preferAmericanFormat?h:z);for(var p=0;p<e.length;p++){var t=e[p];for(var s=0;s<t.length;s++){var f=Date.parseString(F,t[s]);if(f!=null){return f}}}return null}this.isInteger=function(d){for(var c=0;c<d.length;c++){if("1234567890".indexOf(d.charAt(c))==-1){return false}}return true};this.getInt=function(l,c,j,d){for(var J=d;J>=j;J--){var y=l.substring(c,c+J);if(y.length<j){return null}if(this.isInteger(y)){return y}}return null};this.decodeShortcut=function(j){var c=j.trim().toUpperCase();var i=new Date();i.clearTime();if(["NOW","N"].indexOf(c)>=0){i=new Date()}else{if(["TODAY","T"].indexOf(c)>=0){}else{if(["YESTERDAY","Y"].indexOf(c)>=0){i.setDate(i.getDate()-1)}else{if(["TOMORROW","TO"].indexOf(c)>=0){i.setDate(i.getDate()+1)}else{if(["W","TW","WEEK","THISWEEK","WEEKSTART","THISWEEKSTART"].indexOf(c)>=0){i.setFirstDayOfThisWeek()}else{if(["LW","LASTWEEK","LASTWEEKSTART"].indexOf(c)>=0){i.setFirstDayOfThisWeek();i.setDate(i.getDate()-7)}else{if(["NW","NEXTWEEK","NEXTWEEKSTART"].indexOf(c)>=0){i.setFirstDayOfThisWeek();i.setDate(i.getDate()+7)}else{if(["M","TM","MONTH","THISMONTH","MONTHSTART","THISMONTHSTART"].indexOf(c)>=0){i.setDate(1)}else{if(["LM","LASTMONTH","LASTMONTHSTART"].indexOf(c)>=0){i.setDate(1);i.setMonth(i.getMonth()-1)}else{if(["NM","NEXTMONTH","NEXTMONTHSTART"].indexOf(c)>=0){i.setDate(1);i.setMonth(i.getMonth()+1)}else{if(["Q","TQ","QUARTER","THISQUARTER","QUARTERSTART","THISQUARTERSTART"].indexOf(c)>=0){i.setDate(1);i.setMonth(Math.floor((i.getMonth())/3)*3)}else{if(["LQ","LASTQUARTER","LASTQUARTERSTART"].indexOf(c)>=0){i.setDate(1);i.setMonth(Math.floor((i.getMonth())/3)*3-3)}else{if(["NQ","NEXTQUARTER","NEXTQUARTERSTART"].indexOf(c)>=0){i.setDate(1);i.setMonth(Math.floor((i.getMonth())/3)*3+3)}else{if(/^-?[0-9]+[DWMY]$/.test(c)){var d=c.substr(c.length-1);var l=parseInt(c.substr(0,c.length-1));if(d=="W"){i.setDate(i.getDate()+l*7)}else{if(d=="M"){i.setMonth(i.getMonth()+l)}else{if(d=="Y"){i.setYear(i.getYear()+l)}}}}else{i=undefined}}}}}}}}}}}}}}return i};var B=this.decodeShortcut(F);if(B){return B}F=F+"";m=m+"";var r=0;var q=0;var b="";var D="";var E="";var G,H;var I=new Date().getFullYear();var v=1;var g=1;var o=0;var u=0;var C=0;var a="";while(q<m.length){b=m.charAt(q);D="";while((m.charAt(q)==b)&&(q<m.length)){D+=m.charAt(q++)}if(D=="yyyy"||D=="yy"||D=="y"){if(D=="yyyy"){G=4;H=4}if(D=="yy"){G=2;H=2}if(D=="y"){G=2;H=4}I=this.getInt(F,r,G,H);if(I==null){return null}r+=I.length;if(I.length==2){if(I>70){I=1900+(I-0)}else{I=2000+(I-0)}}}else{if(D=="MMM"||D=="MMMM"){v=0;var A=(D=="MMMM"?(Date.monthNames.concat(Date.monthAbbreviations)):Date.monthAbbreviations);for(var p=0;p<A.length;p++){var w=A[p];if(F.substring(r,r+w.length).toLowerCase()==w.toLowerCase()){v=(p%12)+1;r+=w.length;break}}if((v<1)||(v>12)){return null}}else{if(D=="E"||D=="EE"||D=="EEE"||D=="EEEE"){var A=(D=="EEEE"?Date.dayNames:Date.dayAbbreviations);for(var p=0;p<A.length;p++){var k=A[p];if(F.substring(r,r+k.length).toLowerCase()==k.toLowerCase()){r+=k.length;break}}}else{if(D=="MM"||D=="M"){v=this.getInt(F,r,D.length,2);if(v==null||(v<1)||(v>12)){return null}r+=v.length}else{if(D=="dd"||D=="d"){g=this.getInt(F,r,D.length,2);if(g==null||(g<1)||(g>31)){return null}r+=g.length}else{if(D=="hh"||D=="h"){o=this.getInt(F,r,D.length,2);if(o==null||(o<1)||(o>12)){return null}r+=o.length}else{if(D=="HH"||D=="H"){o=this.getInt(F,r,D.length,2);if(o==null||(o<0)||(o>23)){return null}r+=o.length}else{if(D=="KK"||D=="K"){o=this.getInt(F,r,D.length,2);if(o==null||(o<0)||(o>11)){return null}r+=o.length;o++}else{if(D=="kk"||D=="k"){o=this.getInt(F,r,D.length,2);if(o==null||(o<1)||(o>24)){return null}r+=o.length;o--}else{if(D=="mm"||D=="m"){u=this.getInt(F,r,D.length,2);if(u==null||(u<0)||(u>59)){return null}r+=u.length}else{if(D=="ss"||D=="s"){C=this.getInt(F,r,D.length,2);if(C==null||(C<0)||(C>59)){return null}r+=C.length}else{if(D=="a"){if(F.substring(r,r+2).toLowerCase()=="am"){a="AM"}else{if(F.substring(r,r+2).toLowerCase()=="pm"){a="PM"}else{return null}}r+=2}else{if(F.substring(r,r+D.length)!=D){return null}else{r+=D.length}}}}}}}}}}}}}}if(r!=F.length){return null}if(v==2){if(((I%4==0)&&(I%100!=0))||(I%400==0)){if(g>29){return null}}else{if(g>28){return null}}}if((v==4)||(v==6)||(v==9)||(v==11)){if(g>30){return null}}if(o<12&&a=="PM"){o=o-0+12}else{if(o>11&&a=="AM"){o-=12}}return new Date(I,v-1,g,o,u,C)};Date.isValid=function(b,a){return(Date.parseString(b,a)!=null)};Date.prototype.isBefore=function(a){if(a==null){return false}return(this.getTime()<a.getTime())};Date.prototype.isAfter=function(a){if(a==null){return false}return(this.getTime()>a.getTime())};Date.prototype.equals=function(a){if(a==null){return false}return(this.getTime()==a.getTime())};Date.prototype.equalsIgnoreTime=function(c){if(c==null){return false}var a=new Date(this.getTime()).clearTime();var b=new Date(c.getTime()).clearTime();return(a.getTime()==b.getTime())};Date.prototype.format=function(f){if(!f){f=Date.defaultFormat}f=f+"";var k="";var h=0;var a="";var n="";var p=this.getFullYear()+"";var j=this.getMonth()+1;var b=this.getDate();var e=this.getDay();var g=this.getHours();var i=this.getMinutes();var l=this.getSeconds();var o=new Object();if(p.length<4){p=""+(+p+1900)}o.y=""+p;o.yyyy=p;o.yy=p.substring(2,4);o.M=j;o.MM=Date.LZ(j);o.MMM=Date.monthAbbreviations[j-1];o.MMMM=Date.monthNames[j-1];o.d=b;o.dd=Date.LZ(b);o.E=Date.dayAbbreviations[e];o.EE=Date.dayAbbreviations[e];o.EEE=Date.dayAbbreviations[e];o.EEEE=Date.dayNames[e];o.H=g;o.HH=Date.LZ(g);if(g==0){o.h=12}else{if(g>12){o.h=g-12}else{o.h=g}}o.hh=Date.LZ(o.h);o.K=o.h-1;o.k=o.H+1;o.KK=Date.LZ(o.K);o.kk=Date.LZ(o.k);if(g>11){o.a="PM"}else{o.a="AM"}o.m=i;o.mm=Date.LZ(i);o.s=l;o.ss=Date.LZ(l);while(h<f.length){a=f.charAt(h);n="";while((f.charAt(h)==a)&&(h<f.length)){n+=f.charAt(h++)}if(typeof(o[n])!="undefined"){k=k+o[n]}else{k=k+n}}return k};Date.prototype.getDayName=function(){return Date.dayNames[this.getDay()]};Date.prototype.getDayAbbreviation=function(){return Date.dayAbbreviations[this.getDay()]};Date.prototype.getMonthName=function(){return Date.monthNames[this.getMonth()]};Date.prototype.getMonthAbbreviation=function(){return Date.monthAbbreviations[this.getMonth()]};Date.prototype.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};Date.prototype.add=function(a,b){if(typeof(a)=="undefined"||a==null||typeof(b)=="undefined"||b==null){return this}b=+b;if(a=="y"){this.setFullYear(this.getFullYear()+b)}else{if(a=="M"){this.setMonth(this.getMonth()+b)}else{if(a=="d"){this.setDate(this.getDate()+b)}else{if(a=="w"){var c=(b>0)?1:-1;while(b!=0){this.add("d",c);while(this.getDay()==0||this.getDay()==6){this.add("d",c)}b-=c}}else{if(a=="h"){this.setHours(this.getHours()+b)}else{if(a=="m"){this.setMinutes(this.getMinutes()+b)}else{if(a=="s"){this.setSeconds(this.getSeconds()+b)}}}}}}}return this};Date.prototype.toInt=function(){return this.getFullYear()*10000+(this.getMonth()+1)*100+this.getDate()};Date.fromInt=function(a){var d=parseInt(a/10000);var c=parseInt((a-d*10000)/100);var b=parseInt(a-d*10000-c*100);return new Date(d,c-1,b,12,0,0)};Date.prototype.isHoliday=function(){return isHoliday(this)};Date.prototype.isToday=function(){return this.toInt()==new Date().toInt()};Date.prototype.incrementDateByWorkingDays=function(a){var b=Math.abs(a);while(b>0){this.setDate(this.getDate()+(a>0?1:-1));if(!this.isHoliday()){b--}}return this};Date.prototype.distanceInWorkingDays=function(e){var d=new Date(this.getTime());d.setHours(23,59,59,999);var a=0;var c=new Date(e.getTime());c.setHours(23,59,59,999);var b=c.getTime();while(d.getTime()<=b){a=a+(isHoliday(d)?0:1);d.setDate(d.getDate()+1)}return a};Date.prototype.setFirstDayOfThisWeek=function(a){if(!a){a=Date.firstDayOfWeek}this.setDate(this.getDate()-this.getDay()+a-(this.getDay()==0&&a!=0?7:0))};