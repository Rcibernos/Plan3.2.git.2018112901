if(!window.console){window.console=new function(){this.log=function(a){};this.debug=function(a){};this.error=function(a){}}}if(!window.console.debug||!window.console.error||!window.console.log){window.console=new function(){this.log=function(a){};this.debug=function(a){};this.error=function(a){}}}$.fn.bringToFront=function(b){var c=10;var a=b?$(b):$("*");a.each(function(){if($(this).css("position")!="static"){var d=parseInt($(this).css("zIndex"));c=d>c?parseInt($(this).css("zIndex")):c}});return $(this).css("zIndex",c+=10)};function nearBestPosition(q,m,c){var d=q;var k=m;if(typeof q!="object"){d=$("#"+q)}if(typeof m!="object"){k=$("#"+m)}if(d){k.css("visibility","hidden");var i=false;k.parents().each(function(){if($(this).css("position")=="static"){return}i=true});var o=i?d.position().left:d.offset().left;var p=i?d.position().top:d.offset().top;var g=d.outerHeight();var e=parseFloat(g);if(c){var f=parseFloat(d.outerWidth());var l=parseFloat(k.outerWidth());o+=(f-l)/2}p+=parseFloat(e);var j=o;var n=p;var a=($.browser.msie)?45:35;var b=($.browser.msie)?20:0;if(o&&p){k.css("left",j);k.css("top",n)}if(k.offset().left>=($(window).width()-k.outerWidth())){j=($(window).width()-k.outerWidth()-b)+"px";k.css("left",j)}if(k.offset().left<0){j=0+"px";k.css("left",j)}if((k.offset().top+k.outerHeight()>=(($(window).height()-a)))&&(k.outerHeight()<$(window).height())){k.css("margin-top",(-(d.outerHeight()+k.outerHeight()))+"px")}k.css("visibility","visible")}}String.prototype.trim=function(){return this.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1")};String.prototype.startsWith=function(b,a){if(!a){return(b==this.substring(0,b.length))}else{return(b.toLowerCase()==this.substring(0,b.length).toLowerCase())}};String.prototype.endsWith=function(b,a){if(!a){return(b==this.substring(this.length-b.length))}else{return(b.toLowerCase()==this.substring(this.length-b.length).toLowerCase())}};String.prototype.asId=function(){return this.replace(/[^a-zA-Z0-9_]+/g,"")};String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(RegExp.quote(a),"g"),b)};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,a){if(this==null){throw new TypeError()}var f=Object(this);var c=f.length>>>0;if(c===0){return -1}var d=0;if(arguments.length>0){d=Number(arguments[1]);if(d!=d){d=0}else{if(d!=0&&d!=Infinity&&d!=-Infinity){d=(d>0||-1)*Math.floor(Math.abs(d))}}}if(d>=c){return -1}var b=d>=0?d:Math.max(c-Math.abs(d),0);for(;b<c;b++){if(b in f&&f[b]===e){return b}}return -1}}Object.size=function(b){var c=0,a;for(a in b){if(b.hasOwnProperty(a)){c++}}return c};function transformToPrintable(a){for(var b in a){var c=a[b];if(typeof(c)=="string"){a[b]=(c+"").replace(/\n/g,"<br>")}}return a}function isValidURL(b){var a=/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/;return a.test(b)}function isValidEmail(a){var b=/^((([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+(\.([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+)*)@((((([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.))*([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.)[\w]{2,4}|(((([0-9]){1,3}\.){3}([0-9]){1,3}))|(\[((([0-9]){1,3}\.){3}([0-9]){1,3})\])))$/;return b.test(a)}function isValidInteger(a){reg=new RegExp("^[-+]{0,1}[0-9]*$");return reg.test(a)}function isValidDouble(a){var b=Number.decimalSeparator;reg=new RegExp("^[-+]{0,1}[0-9]*["+b+"]{0,1}[0-9]*$");return reg.test(a)}function isValidTime(a){return !isNaN(millisFromHourMinute(a))}function isValidDurationDays(a){return !isNaN(daysFromString(a))}function isValidDurationMillis(a){return !isNaN(millisFromString(a))}function isValidDurationMillis(a){return !isNaN(millisFromString(a))}function isValidCurrency(h){var j="";var c=Number.currencyFormat+"";var e=false;var g=false;var b="";var f="[0-9\\"+Number.groupingSeparator+"]+[\\"+Number.decimalSeparator+"]?[0-9]*";for(var d=0;d<c.length;d++){var a=c.charAt(d);if(a=="."||a==","||a=="0"){if(b!=""){j=j+"(?:"+RegExp.quote(b)+")?";b=""}}else{if(a=="#"){if(b!=""){j=j+"(?:"+RegExp.quote(b)+")?";b=""}if(!g){g=true;j=j+f}}else{if(a=="-"){if(b!=""){j=j+"(?:"+RegExp.quote(b)+")?";b=""}if(!e){e=true;j=j+"[-]?"}}else{b=b+a}}}}if(!e){j="[-]?"+j}if(b!=""){j=j+"(?:"+RegExp.quote(b)+")?"}j="^"+j+"$";var k=new RegExp(j);return k.test(h)}function getCurrencyValue(a){if(!isValidCurrency(a)){return NaN}return parseFloat(a.replaceAll(Number.groupingSeparator,"").replaceAll(Number.decimalSeparator,".").replace(/[^0123456789.]/,""))}function formatCurrency(a){return formatNumber(a,Number.currencyFormat)}function formatNumber(q,g){if(!g){g="##0.00"}var a=Number.decimalSeparator;var h=Number.groupingSeparator;var m=Number.minusSign;var C=true;var E="0#-,.";var A="";var n=false;for(var l=0;l<g.length;l++){if(E.indexOf(g.charAt(l))==-1){A=A+g.charAt(l)}else{if(l==0&&g.charAt(l)=="-"){n=true}else{break}}}var D="";for(var l=g.length-1;l>=0;l--){if(E.indexOf(g.charAt(l))==-1){D=g.charAt(l)+D}else{break}}g=g.substring(A.length);g=g.substring(0,g.length-D.length);var p=new Number(q);var f=false;if(isNaN(p)){p=0;f=true}if(D=="%"){p=p*100}var B="";if(g.indexOf(".")>-1){var c=a;var b=g.substring(g.lastIndexOf(".")+1);if(C){p=new Number(p.toFixed(b.length))}else{var r=p.toString();r=r.substring(0,r.lastIndexOf(".")+b.length+1);p=new Number(r)}var e=p%1;var d=new String(e.toFixed(b.length));d=d.substring(d.lastIndexOf(".")+1);for(var l=0;l<b.length;l++){if(b.charAt(l)=="#"&&d.charAt(l)!="0"){c+=d.charAt(l)}else{if(b.charAt(l)=="#"&&d.charAt(l)=="0"){var o=d.substring(l);if(o.match("[1-9]")){c+=d.charAt(l)}else{break}}else{if(b.charAt(l)=="0"){c+=d.charAt(l)}}}}B+=c}else{p=Math.round(p)}var t=Math.floor(p);if(p<0){t=Math.ceil(p)}var u="";if(g.indexOf(".")==-1){u=g}else{u=g.substring(0,g.indexOf("."))}var s="";if(!(t==0&&u.substr(u.length-1)=="#")||f){var v=new String(Math.abs(t));var k=9999;if(u.lastIndexOf(",")!=-1){k=u.length-u.lastIndexOf(",")-1}var j=0;for(var l=v.length-1;l>-1;l--){s=v.charAt(l)+s;j++;if(j==k&&l!=0){s=h+s;j=0}}if(u.length>s.length){var y=u.indexOf("0");if(y!=-1){var x=u.length-y;var z=u.length-s.length-1;while(s.length<x){var w=u.charAt(z);if(w==","){w=h}s=w+s;z--}}}}if(!s&&u.indexOf("0",u.length-1)!==-1){s="0"}B=s+B;if(p<0&&n&&A.length>0){A=m+A}else{if(p<0){B=m+B}}if(B.lastIndexOf(a)==B.length-1){B=B.substring(0,B.length-1)}B=A+B+D;return B}RegExp.quote=function(a){return a.replace(/([.?*+^$[\]\\(){}-])/g,"\\$1")};function pad(c,b,a){if((c+"").length<b){return new Array(b-(""+c).length+1).join(a)+c}else{return c}}function getMillisInHours(b){if(!b){return""}var c=b>=0?1:-1;var a=Math.floor(b/3600000);return(c>0?"":"-")+pad(a,2,"0")}function getMillisInHoursMinutes(b){if(typeof(b)!="number"){return""}var d=b>=0?1:-1;b=Math.abs(b);var a=Math.floor(b/3600000);var c=Math.floor((b%3600000)/60000);return(d>0?"":"-")+pad(a,1,"0")+":"+pad(c,2,"0")}function getMillisInDaysHoursMinutes(c){if(!c){return""}var e=c>=0?1:-1;c=Math.abs(c);var a=Math.floor(c/millisInWorkingDay);var b=Math.floor((c%millisInWorkingDay)/3600000);var d=Math.floor((c-a*millisInWorkingDay-b*3600000)/60000);return(e>=0?"":"-")+(a>0?a+"  ":"")+pad(b,1,"0")+":"+pad(d,2,"0")}function millisFromHourMinute(h){var f=0;h.replace(",",".");var g=h.indexOf(":");var b=h.indexOf(".");if(g<0&&b<0&&h.length>5){return parseInt(h,10)}else{if(b>-1){var a=parseFloat(h);f=a*3600000}else{var c=0;var e=0;if(g==-1){c=parseInt(h,10)}else{c=parseInt(h.substring(0,g),10);e=parseInt(h.substring(g+1),10)}f=c*3600000+e*60000}if(typeof(f)!="number"){f=NaN}return f}}function millisFromString(j,a){if(!j){return 0}var h=new RegExp("(\\d+[Yy])|(\\d+[M])|(\\d+[Ww])|(\\d+[Dd])|(\\d+[Hh])|(\\d+[m])|(\\d+[Ss])|(\\d+:\\d+)|(:\\d+)|(\\d*[\\.,]\\d+)|(\\d+)","g");var f=h.exec(j);var k=0;if(!f){return NaN}while(f!=null){for(var c=1;c<f.length;c++){var d=f[c];if(d){var g=0;try{g=parseInt(d)}catch(b){}if(c==1){k=k+g*(a?millisInWorkingDay*workingDaysPerWeek*52:3600000*24*365)}else{if(c==2){k=k+g*(a?millisInWorkingDay*workingDaysPerWeek*4:3600000*24*30)}else{if(c==3){k=k+g*(a?millisInWorkingDay*workingDaysPerWeek:3600000*24*7)}else{if(c==4){k=k+g*(a?millisInWorkingDay:3600000*24)}else{if(c==5){k=k+g*3600000}else{if(c==6){k=k+g*60000}else{if(c==7){k=k+g*1000}else{if(c==8){k=k+millisFromHourMinute(d)}else{if(c==9){k=k+millisFromHourMinute(d)}else{if(c==10){k=k+millisFromHourMinute(d)}else{if(c==11){k=k+g*3600000}}}}}}}}}}}}}f=h.exec(j)}return k}function daysFromString(j,a){if(!j){return undefined}var h=new RegExp("(\\d+[Yy])|(\\d+[Mm])|(\\d+[Ww])|(\\d+[Dd])|(\\d*[\\.,]\\d+)|(\\d+)","g");var f=h.exec(j);var k=0;if(!f){return NaN}while(f!=null){for(var c=1;c<f.length;c++){var d=f[c];if(d){var g=0;try{g=parseInt(d)}catch(b){}if(c==1){k=k+g*(a?workingDaysPerWeek*52:365)}else{if(c==2){k=k+g*(a?workingDaysPerWeek*4:30)}else{if(c==3){k=k+g*(a?workingDaysPerWeek:7)}else{if(c==4){k=k+g}else{if(c==5){k=k+g}else{if(c==6){k=k+g}}}}}}}}f=h.exec(j)}return k}function stopBubble(a){if($.browser.msie&&event){event.cancelBubble=true;event.returnValue=false}else{if(a){a.stopPropagation();a.preventDefault()}}return false}function validateField(b){var a=$(this);var c=true;a.clearErrorAlert();var e=a.val();if(e){var d=a.attr("entryType").toUpperCase();if(d=="INTEGER"){c=isValidInteger(e)}else{if(d=="DOUBLE"){c=isValidDouble(e)}else{if(d=="PERCENTILE"){c=isValidDouble(e)}else{if(d=="URL"){c=isValidURL(e)}else{if(d=="EMAIL"){c=isValidEmail(e)}else{if(d=="DURATIONMILLIS"){c=isValidDurationMillis(e)}else{if(d=="DURATIONDAYS"){c=isValidDurationDays(e)}else{if(d=="DATE"){c=Date.isValid(e,a.attr("format"))}else{if(d=="TIME"){c=isValidTime(e)}else{if(d=="CURRENCY"){c=isValidCurrency(e)}}}}}}}}}}if(!c){a.createErrorAlert(i18n.ERROR_ON_FIELD,i18n.INVALID_DATA)}}return c}jQuery.fn.clearErrorAlert=function(){this.each(function(){var a=$(this);a.removeAttr("invalid").removeClass("formElementsError");$("#"+a.attr("id")+"error").remove()});return this};jQuery.fn.createErrorAlert=function(a,b){this.each(function(){var c=$(this);c.attr("invalid","true").addClass("formElementsError");if($("#"+c.attr("id")+"error").size()<=0){var e=(a?a:"")+": "+(b?b:"");var d="<img width='17' heigh='17' id=\""+c.attr("id")+"error\" error='1'";d+=" onclick=\"alert($(this).attr('title'))\" border='0' align='absmiddle'>";d=$(d);d.attr("title",e).attr("src","css/default/gantt/res/alert.gif");c.after(d)}});return this};function jsonErrorHandling(c){if(!c.ok){if(c.message){alert("ERROR:\n"+c.message)}for(var b in c.clientEntryErrors){var a=c.clientEntryErrors[b];$(":input[name="+a.name+"]").createErrorAlert(a.error)}}}jQuery.fn.updateOldValue=function(){this.each(function(){var a=$(this);a.data("_oldvalue",a.val())});return this};jQuery.fn.isValueChanged=function(){var a=false;this.each(function(){var b=$(this);if(b.val()+""!=b.data("_oldvalue")+""){a=true;return false}});return a};jQuery.fn.getOldValue=function(){return $(this).data("_oldvalue")};$.fn.unselectable=function(){this.each(function(){$(this).addClass("unselectable").attr("unselectable","on")});return $(this)};$.fn.clearUnselectable=function(){this.each(function(){$(this).removeClass("unselectable").removeAttr("unselectable")});return $(this)};var __profiler={};function Profiler(a){this.startTime=new Date().getTime();this.name=a;this.stop=function(){if(!__profiler[this.name]){__profiler[this.name]={millis:0,count:0}}__profiler[this.name].millis+=new Date().getTime()-this.startTime;__profiler[this.name].count++};this.display=function(){console.debug(__profiler[this.name])};this.reset=function(){delete __profiler[this.name]}}Profiler.reset=function(){__profiler={}};Profiler.displayAll=function(){var d="";var e=0;for(var b in __profiler){var c=__profiler[b];var a="                          ".substr(0,30-b.length);d+=b+a+"\t millis:"+c.millis+"\t count:"+c.count+"\n";e+=c.millis}console.debug(d)};$(document).ready(function(){$(":input[oldValue]").livequery(function(){$(this).updateOldValue()});$(".validated").livequery("blur",validateField)});function openBlackPopup(f,g,c,e,d){if(!d){d="bwinPopup"}if(!g){g="900px"}if(!c){c="730px"}$("#__blackpopup__").remove();var b=$("<div>").attr("id","__blackpopup__");b.css({position:"fixed",top:0,left:0,width:"100%",height:"100%",textAlign:"center"});if(window.name!=d){b.css({backgroundImage:"url('"+contextPath+"/applications/teamwork/images/black_70.png')"})}b.append("<iframe id='"+d+"' name='"+d+"' frameborder='0'></iframe>");b.bringToFront();b.bind("close",function(){b.slideUp(300,function(){b.remove();if(typeof(e)=="function"){e()}})});b.bind("destroy",function(){b.remove()});b.find("iframe:first").attr("src",f).css({width:g,height:c,top:100,border:"8px solid #909090",backgroundColor:"#ffffff"});var a=$("<div>").css({width:g,position:"relative",height:"5px",textAlign:"right",margin:"auto"});a.append("<img src=\"css/default/gantt/res/closeBig.png\" style='cursor:pointer;position:absolute;right:-40px;top:30px;'>");a.find("img:first").click(function(){b.trigger("close")});b.prepend(a);$("body").append(b)}function createBlackPage(g,c,e){if(!g){g="900px"}if(!c){c="730px"}$("#__blackpopup__").remove();var b=$("<div>").attr("id","__blackpopup__");b.css({position:"fixed",top:"0px",paddingTop:"50px",left:0,width:"100%",height:"100%",backgroundImage:"url('css/default/gantt/res/img/black_70.png')"});b.append("<div id='bwinPopupd' name='bwinPopupd'></div>");b.bringToFront();var f=b.find("#bwinPopupd");f.css({width:g,height:c,top:10,"-moz-box-shadow":"1px 1px 6px #333333",overflow:"auto","-webkit-box-shadow":"1px 1px 6px #333333",border:"8px solid #777",backgroundColor:"#fff",margin:"auto"});var a=$("<div>").css({width:g,position:"relative",height:"0px",textAlign:"right",margin:"auto"});var d=$("<img src='css/default/gantt/res/closeBig.png' style='cursor:pointer;position:absolute;right:-40px;top:5px;' title='close'>");a.append(d);d.click(function(){b.trigger("close")});b.prepend(a);$("body").append(b);b.bind("close",function(){b.slideUp(300,function(){b.remove();if(typeof(e)=="function"){e()}})});b.bind("destroy",function(){b.remove()});return f}function getBlackPopup(){var a=$("#__blackpopup__");if(typeof(top)!="undefined"){a=window.parent.$("#__blackpopup__")}return a}function closeBlackPopup(){getBlackPopup().trigger("close")}function openIssueEditorInBlack(c,a,d){if(!a){a="ED"}var b=contextPath+"/applications/teamwork/issue/issueEditor.jsp?CM="+a+"&OBJID="+c;if(d){b=b+d}openBlackPopup(b,1020,$(window).height()-50,function(){$("#"+c).effect("highlight",{color:"yellow"},1500)})}function openBoardInBlack(a,c,e,b){if(!c){c="ED"}var d=contextPath+"/applications/teamwork/board/boardEditor.jsp?CM="+c+"&OBJID="+a;if(e){d=d+e}openBlackPopup(d,$(window).width()-100,$(window).height()-50,b)};