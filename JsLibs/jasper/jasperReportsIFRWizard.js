var JRSClient;var JRSPreview;var myReport={};var utils={};function autoReloadIFrame(){try{$("#iframeA").attr("src",iframeA)}catch(a){}if(MyTimer){clearInterval(MyTimer)}MyTimer=window.setInterval(autoReloadIFrame,interval)}function replaceCom(a){if(a){return a.replace(/\'/g,"")}return a}var visualizeWizard={visualizeWizardType:"ALL",create:function create(a){utils={jrsUrl:a.jrsUrl,jrsAuth:a.jrsAuth,folderUri:a.folderUri,outputFormat:a.outputFormat,reportAppName:a.appName,reportUserName:a.userName,params_plan:a.params_plan,attributes:a.attributes};visualizeWizard.init()},clearAll:function(){$("#container_folders").html("");$("#container_reports").html("");$("#container_viewreports").html("");$("#container_myreports").html("");$("#container_report_info").html("");$("#container_report_params").html("");$("#container_report_name").html("");$("#container_report_params_visible").html("");$("#container_preview").html("");$("#container_preview_ifr").attr("scr","")},clearAndRebuild:function(){this.clearAll();this.init();this.createHeaderLinks(baseServer,utils.folderUri);this.launchVisualizeJs()},createHeaderLinks:function(c,d,e){$("#BarraPrincipal_CPTitulo").html(baseTContent);var b=c.split("/");var a=d.split("/");var f=c;for(i=b.length;i<a.length;i++){if(i==a.length-1){$("#BarraPrincipal_CPTitulo").append("/<span>"+(e?e:a[i])+"</span>")}else{f+="/"+a[i];$("#BarraPrincipal_CPTitulo").append("/<span style='cursor:pointer;' class='link btnfolder' report-uri='"+f+"' id='Hdrbtn_"+i+"'>"+a[i]+"</span>")}}$("#BarraPrincipal_CPArbolFT").click(function(){location.reload()})},init:function init(){this.clearAll();myReport.app=utils.reportAppName;myReport.user_name=utils.reportUserName;myReport.name="";myReport.id="";myReport.inputcontrols=[];myReport.components=[];myReport.params=[];myReport.conditions=[];myReport.charts=[];myReport.operatorTypes={numeric:[{label:"",value:""},{label:"Igual",value:"equals"},{label:"Mayor que",value:"greater"},{label:"Mayor o igual que",value:"greater_or_equal"},{label:"Menor que",value:"less"},{label:"Menor o igual que",value:"less_or_equal"},{label:"Entre",value:"between"}],string:[{label:"",value:""},{label:"Igual",value:"equals"},{label:"Contiene",value:"contain"},],bool:[{label:"",value:""},{label:"Igual",value:"equals"},],date:[{label:"",value:""},{label:"Igual",value:"equals"},{label:"Mayor que",value:"after"},{label:"Menor que",value:"before"}]};visualizeWizard.showContainers(1);visualizeWizard.addEvents()},addEvents:function addEvents(){$("#container_reports").off("click",".btnstep1");$("#container_reports").on("click",".btnstep1",function(a){myReport.report={title:$(a.target).attr("report-title"),uri:$(a.target).attr("report-uri"),description:$(a.target).attr("report-description")};visualizeWizard.displayReportInfo();visualizeWizard.showContainers(2)});$("#container_reports").off("click",".btnviewreport");$("#container_reports").on("click",".btnviewreport",function(a){var c=$(a.target).attr("report-uri");var b=$(a.target).attr("report-title");visualizeWizard.createHeaderLinks(baseServer,c,b);containderPreview_visualize("reportUnit",utils.jrsUrl,c,utils.params_plan,utils.attributes)});$("#container_reports").off("click",".btnviewdashboard");$("#container_reports").on("click",".btnviewdashboard",function(a){var c=$(a.target).attr("report-uri");var b=$(a.target).attr("report-title");visualizeWizard.createHeaderLinks(baseServer,c,b);containderPreview_visualize("dashboard",utils.jrsUrl,c,utils.params_plan,utils.attributes)});$("#container_folders,#BarraPrincipal_CPTitulo").off("click",".btnfolder");$("#container_folders,#BarraPrincipal_CPTitulo").on("click",".btnfolder",function(a){utils.folderUri=$(a.target).attr("report-uri");visualizeWizard.clearAndRebuild()});$("#container_folders").off("click",".btnfolderback");$("#container_folders").on("click",".btnfolderback",function(c){var b=$(c.target).attr("report-uri").split("/");var a="";for(var d=1;d<b.length-1;d++){a=a+"/"+b[d]}utils.folderUri=a;visualizeWizard.clearAndRebuild()});$("#container_myreports").off("click",".btnmyreport");$("#container_myreports").on("click",".btnmyreport",function(a){myReports.getReport($(a.target).attr("report-id"))});$("#container_report_info").off("click",".btnstep2");$("#container_report_info").on("click",".btnstep2",function(a){visualizeWizard.renderInputControls();visualizeWizard.showContainers(3)});$("#container_report_info").off("click",".btnstepcancel");$("#container_report_info").on("click",".btnstepcancel",function(a){visualizeWizard.renderInputControls();visualizeWizard.showContainers(3)});$("#container_report_params").off("click",".btnstep3");$("#container_report_params").on("click",".btnstep3",function(a){visualizeWizard.saveParametersSelected();visualizeWizard.renderNameReport();visualizeWizard.showContainers(5)});$("#container_report_name").off("click",".btnstep5");$("#container_report_name").on("click",".btnstep5",function(a){visualizeWizard.saveNameReport();visualizeWizard.renderInputControlsVisibility();visualizeWizard.showContainers(6)});$("#container_report_params_visible").off("click",".btnstep6");$("#container_report_params_visible").on("click",".btnstep6",function(a){visualizeWizard.saveParametersVisibility();visualizeWizard.showContainers(7);visualizeWizard.previewReport(true)});$("#container_preview").off("click",".applyFilters");$("#container_preview").on("click",".applyFilters",function(a){visualizeWizard.applyFiltersPreviewReport()});$("#container_preview").off("click",".saveReport");$("#container_preview").on("click",".saveReport",function(a){myReports.saveReport()});$("#container_preview").off("click",".back");$("#container_preview").on("click",".back",function(a){location.reload()});$("#container_preview").off("click",".delete");$("#container_preview").on("click",".delete",function(a){myReports.deleteReport($(a.target).attr("report-id"))});$(".btnviewreport,.btnviewdashboard").attr("data-toggle","tooltip");$(".btnviewreport,.btnviewdashboard").attr("data-placement","right");$(".btnviewreport,.btnviewdashboard").tooltip()},launchVisualizeJs:function launchVisualizeJs(a){if(a){this.visualizeWizardType=a}else{a=this.visualizeWizardType}console.log("Entramos en launchVisualizeJs");visualize({server:utils.jrsUrl,auth:utils.jrsAuth},function(b){JRSClient=b;switch(a){case"ALL":visualizeWizard.displayReports();myReports.getReports();break;case"PERSONALIZE":myReports.getReports();break;case"MASTER":visualizeWizard.displayReports();break;default:visualizeWizard.displayReports();myReports.getReports();break}},function(){alert("Unexpected error!")});console.log("Terminamos en launchVisualizeJs")},displayReports:function displayReports(){console.log("Empezamos en displayReports");JRSClient.resourcesSearch({server:utils.jrsUrl,folderUri:utils.folderUri,recursive:false,success:visualizeWizard.listRepository,types:["folder","reportUnit","dashboard"],error:function(a){alert(a)}});console.log("Terminamos en displayReports")},displayReportInfo:function displayReportInfo(){console.log("Empezamos displayReportInfo");visualizeWizard.displayReportLoad().done(function(){visualizeWizard.showPropertiesReport();console.log("Terminamos displayReportInfo")})},displayReportLoad:function displayReportLoad(){console.log("Empezamos displayReportLoad");var a=$.Deferred();var b=$.Deferred();JRSClient.report({resource:myReport.report.uri,success:function(d){visualizeWizard.getComponentsReport(d);a.resolve()},error:c});JRSClient.inputControls({resource:myReport.report.uri,success:function(d){console.log(d);visualizeWizard.getInputControlsReport(d);b.resolve()},error:c});return $.when(a,b).done(function(){}).promise();function c(d){alert(d.message)}console.log("Terminamos displayReportLoad")},listRepository:function listRepository(a){console.log("Empezamos listRepository");$("#container_reports").empty();$("#container_folders").empty();if(baseServer!=utils.folderUri){$("#container_folders").append("<li><button type='button' class='btnfolderback PWButton icontext' report-uri='"+utils.folderUri+"' report-title='BACK' report-description='BACK' id='btn_'>Atr√°s</button></li>")}$.each(a,function(b){if(this.resourceType=="reportUnit"){$("#container_reports").append("<div style='display:block' >");if(this.visualizeWizardType=="PERSONALIZE"||this.visualizeWizardType=="ALL"){$("#container_reports").append("<button type='button' class='PWButton btnstep1' report-uri='"+this.uri+"' report-title='"+replaceCom(this.label)+"' title='"+replaceCom(this.description)+"' id='btn_"+b+"'>Editar informe</button>")}$("#container_reports").append("<button type='button' class='PWButtonx btnview btnviewreport' report-uri='"+this.uri+"' report-title='"+replaceCom(this.label)+"' title='"+replaceCom(this.description)+"' id='btn_"+b+"'>"+this.label+"</button>");$("#container_reports").append("</div>")}else{if(this.resourceType=="dashboard"){$("#container_reports").append("<div style='display:block' ><button type='button' class='PWButtonx btnview btnviewdashboard' report-uri='"+this.uri+"' report-title='"+replaceCom(this.label)+"' title='"+replaceCom(this.description)+"' id='btn_"+b+"'>"+this.label+"</button>")}else{if(this.resourceType=="folder"){$("#container_folders").append("<li><span style='cursor:pointer;' class='btnfolder' report-uri='"+this.uri+"' report-title='"+replaceCom(this.label)+"' title='"+replaceCom(this.description)+"' id='btn_"+b+"'>"+this.label+"</span></li>")}}}});if($("#container_folders")[0].childElementCount<=0){$("#container_folders").hide();$("#container_wizard").attr("class","jasperPlan ")}else{$("#container_folders").show()}console.log("Terminamos listRepository")},getComponentsReport:function getComponentsReport(a){console.log("Empezamos getComponentsReport");console.log(a.components);a.components.forEach(function(b){var d={componentType:b.componentType,chartType:b.chartType,dataType:b.dataType,label:b.label,name:b.name,filter:{},sort:{}};myReport.components.push(d)});console.log("Terminamos getComponentsReport")},getInputControlsReport:function getInputControlsReport(a){console.log("Empezamos getInputControlsReport");console.log(a);$.each(a,function(c,b){var d={id:b.id,label:b.label,type:b.type,description:b.description,options:[],filter:[],visible:true};if("options" in b.state){$.each(b.state.options,function(){var e={label:this.label,value:this.value,selected:this.selected};d.options.push(e)})}myReport.inputcontrols.push(d)});console.log("Termianmos getINputControlsReport")},saveParametersSelected:function saveParametersSelected(){console.log("Entramos a asignar los parametros");console.log(myReport.inputcontrols);myReport.params=[];$.each(myReport.inputcontrols,function(c,d){if(document.getElementById(d.id).type=="date"){var e=new Date(document.getElementById(d.id).value+"T00:00:00");console.log(e.toISOString());myReport.params[document.getElementById(d.id).id]=[e.toISOString()]}else{if(document.getElementById(d.id).type=="select-multiple"){var a=[];var b=document.getElementById(d.id);for(i=0;i<b.length;i++){if(b.options[i].selected){a.push(b.options[i].value)}}myReport.params[document.getElementById(d.id).id]=a}else{var f=document.getElementById(d.id).value;if(f!=""&&f!=null&&f!=undefined){myReport.params[document.getElementById(d.id).id]=[document.getElementById(d.id).value]}}}});console.log(myReport.params);console.log("Terminamos a asignar los parametros")},saveComponentsSelected:function saveComponentsSelected(){console.log("Entramos a asignar los componentes");console.log(myReport.components);myReport.conditions=[];myReport.charts=[];$.each(myReport.components,function(b,a){if(a.componentType=="tableColumn"){var e=document.getElementById(a.name+"_operator").value;var d=document.getElementById(a.name).value;if((d!=""&&d!=null&&d!=undefined)&&(e!=""&&e!=null&&e!=undefined)){if(document.getElementById(a.name).type=="date"){d=new Date(d+"T00:00:00")}var c={name:a.name,operator:e,value:d};myReport.conditions.push(c)}}else{if(a.componentType=="chart"){if(a.name!=undefined){if(a.chartType!=document.getElementById(a.name).value){var c={name:a.name,chartType:document.getElementById(a.name).value};myReport.charts.push(c)}}}}});console.log(myReport.conditions);console.log(myReport);console.log("Terminamos a asignar los componentes")},saveNameReport:function saveNameReport(){console.log("Entramos a asignar el nombre al report");if(document.getElementById("name_report").value!=""&&document.getElementById("name_report").value!=null&&document.getElementById("name_report").value!=undefined){myReport.name=document.getElementById("name_report").value}else{myReport.name=myReport.report.title+"_"+Math.floor(Math.random()*9999999)+1}console.log(myReport);console.log("Terminamos a asignar el nombre al report")},saveParametersVisibility:function saveParametersVisibility(){console.log("Entramos a asignar la visibilidad de los filtros");$.each(myReport.inputcontrols,function(b,c){var d=0;for(var a=0;a<myReport.inputcontrols.length;++a){if(myReport.inputcontrols[a].id==c.id){var d=a;break}}if(document.getElementById(c.id+"_visible").checked){myReport.inputcontrols[d].visible=true}else{myReport.inputcontrols[d].visible=false}});console.log(myReport);console.log("Terminamos de asignar la visibilidad de los filtros")},renderInputControls:function renderInputControls(){console.log("Empezamos renderInputControls");$.each(myReport.inputcontrols,function(c,d){var f=0;if(d.hasOwnProperty("options")){f=d.options.length}var a;var b;switch(d.type){case"singleSelect":case"singleSelectRadio":a="<select/>";b={id:d.id,name:d.id,type:"select-one"};break;case"multiSelectCheckbox":case"multiSelect":a="<select/>";b={id:d.id,name:d.id,type:"select-multiple",multiple:"multiple"};break;case"singleValueDatetime":case"singleValueDate":a="<input/>";b={id:d.id,name:d.id,label:d.label,type:"date"};break;default:a="<input/>";b={id:d.id,type:d.type}}var h="<label>{label}</label>",e=h.replace("{label}",d.label);$("#container_report_params").append($(e));var g=$(a,b).appendTo("#container_report_params");$("#container_report_params").append("</br>");switch(d.type){case"singleSelect":case"singleSelectRadio":case"multiSelectCheckbox":case"multiSelect":$.each(d.options,function(){g.append($("<option />",{value:this.value,text:this.label}))});break}});$("#container_report_params").append("<button type='button' class='btnstep3'>Siguiente</button>");console.log("Terminamos renderInputControls")},renderNameReport:function renderNameReport(){console.log("Empezamos renderNameReport");$("#container_report_name").html("");var a;var b;a="<input/>";b={id:"name_report",name:"name_report",label:"Nombre del Informe",type:"string"};var c="<label>Nombre del Informe</label>";$("#container_report_name").append($(c));$(a,b).appendTo("#container_report_name");$("#container_report_name").append("</br>");$("#container_report_name").append("<button type='button' class='btnstep5'>Siguiente</button>");console.log("Terminamos renderNameReport")},renderInputControlsVisibility:function renderInputControlsVisibility(){console.log("Empezamos renderInputControlsVisibility");$.each(myReport.inputcontrols,function(c,d){var a="<input/>";var b={id:d.id+"_visible",name:d.id+"_visible",type:"checkbox",checked:true};$(a,b).appendTo("#container_report_params_visible");var f="<label>{label}</label>",e=f.replace("{label}",d.label);$("#container_report_params_visible").append($(e));$("#container_report_params_visible").append("</br>")});$("#container_report_params_visible").append("<button type='button' class='btnstep6'>Siguiente</button>");console.log("Terminamos renderInputControlsVisibility")},previewReport:function previewReport(a){$("#container_preview").html("");$("#container_preview").append("<div id='container_preview_params'/>");$("#container_preview").append("<div id='container_preview_report'/>");console.log("Empezamos previewReport Create parameters in filters div");var b=false;$.each(myReport.inputcontrols,function(e,f){if(f.visible){b=true;var h=0;if(f.hasOwnProperty("options")){h=f.options.length}var c;var d;switch(f.type){case"singleSelect":case"singleSelectRadio":c="<select/>";d={id:f.id,name:f.id,type:"select-one","data-param-id":f.id};break;case"multiSelectCheckbox":case"multiSelect":c="<select/>";d={id:f.id,name:f.id,type:"select-multiple",multiple:"multiple","data-param-id":f.id};break;case"singleValueDatetime":case"singleValueDate":c="<input/>";d={id:f.id,name:f.id,label:f.label,type:"date","data-param-id":f.id};break;default:c="<input/>";d={id:f.id,type:f.type,"data-param-id":f.id}}var k="<label>{label}</label>",g=k.replace("{label}",f.label);$("#container_preview_params").append($(g));var j=$(c,d).appendTo("#container_preview_params");$("#container_preview_params").append("</br>");switch(f.type){case"singleSelect":case"singleSelectRadio":case"multiSelectCheckbox":case"multiSelect":$.each(f.options,function(){j.append($("<option />",{value:this.value,text:this.label}))});break}}});if(b){$("#container_preview_params").append("</br>");$("#container_preview_params").append("<button type='button' class='applyFilters'>Filtrar</button>")}if(a){$("#container_preview_params").append("<button type='button' class='saveReport'>Guardar</button>")}else{$("#container_preview_params").append("<button type='button' class='back'>Volver</button>");$("#container_preview_params").append("<button type='button' class='delete' report-id='"+myReport.id+"'>Eliminar</button>")}visualizeWizard.applyConditionsPreviewReport();console.log("Terminamos previewReport Create parameters in filters div")},applyConditionsPreviewReport:function applyConditionsPreviewReport(){var c={};for(var b in myReport.params){c[b]=myReport.params[b];$("[data-param-id]").each(function(e,f){if($(f).attr("data-param-id")==b){var d=$(f).val();if(d!==null&f.localName=="select"){$(f).value=c[b]}else{if(d!==null&f.localName=="input"){var g=[];g.push($(f).val());c[$(f).attr("data-param-id")]=g}}}})}$.each(utils.params_plan,function(d,e){va=[];va.push(e.value);c[e.name]=va});myReport.params=c;console.log(c);JRSPreview=JRSClient.report({resource:myReport.report.uri,container:"#container_preview_report",params:c,error:a,success:function(){}});function a(d){alert(d.message)}},applyFiltersPreviewReport:function applyFiltersPreviewReport(){var b={};$("[data-param-id]").each(function(d,e){var c=$(e).val();if(c!==null&e.localName=="select"){if(Array.isArray(c)){b[$(e).attr("data-param-id")]=c}else{var f=[];f.push($(e).val());b[$(e).attr("data-param-id")]=f}console.log("pasa por select");console.log($(e))}else{if(c!==null&e.localName=="input"){var f=[];f.push($(e).val());b[$(e).attr("data-param-id")]=f;console.log("pasa por input")}}});$.each(utils.params_plan,function(c,d){va=[];va.push(d.value);b[d.name]=va});console.log(b);JRSPreview.params(b).run().fail(a);function a(c){alert(c.message)}},showPropertiesReport:function showPropertiesReport(){console.log("Empezamos showPropertiesReport");var a;a="<div> ";a+="<p>Report Title "+myReport.report.title+"</p>";a+="<p>Report Description "+myReport.report.description+"</p>";a+="</div>";a+="<div> ";a+="<table> ";a+="<thead>";a+="<tr>";a+="<th>Label</th>";a+="<th>Type</th>";a+="<th>Description</th>";a+="</tr>";a+="</thead>";a+='<tbody id="ResultDataInputControls">';$.each(myReport.inputcontrols,function(c,b){a+="<tr>";a+="<td>"+b.label+"</td>";a+="<td>"+b.type+"</td>";a+="<td>"+b.description+"</td>";a+="</tr>"});a+="</tbody>";a+="</table>";a+="</div>";a+="<div> ";a+="<table> ";a+="<thead>";a+="<tr>";a+="<th>Component Type</th>";a+="<th>Chart Type</th>";a+="<th>Data Type</th>";a+="<th>Label</th>";a+="<th>Name</th>";a+="</tr>";a+="</thead>";a+='<tbody id="ResultDataComponents">';$.each(myReport.components,function(c,b){a+="<tr>";a+="<td>"+b.componentType+"</td>";a+="<td>"+b.chartType+"</td>";a+="<td>"+b.dataType+"</td>";a+="<td>"+b.label+"</td>";a+="<td>"+b.name+"</td>";a+="</tr>"});a+="</tbody>";a+="</table>";a+="</div>";a+="<div>";a+='<button type="button" class="btnstep2 PWButton">Siguiente</button>';a+='<button type="button" class="btnstepcancel PWButton">Cancelar</button>';a+="</div>";$("#container_report_info").html(a);console.log("Terminamos showPropertiesReport")},showContainers:function showContainers(a){console.log("Empezamos showContainers");switch(a){case 1:$("#container_wizard").show();$("#container_reports").show();$("#container_folders").hide();$("#container_myreports").show();$("#container_report_info").hide();$("#container_report_params").hide();$("#container_report_name").hide();$("#container_report_params_visible").hide();$("#container_preview_ifr").hide();$("#container_preview").hide();break;case 2:$("#container_wizard").show();$("#container_reports").hide();$("#container_folders").hide();$("#container_myreports").hide();$("#container_report_info").show();$("#container_report_params").hide();$("#container_report_name").hide();$("#container_report_params_visible").hide();$("#container_preview_ifr").hide();$("#container_preview").hide();break;case 3:$("#container_wizard").show();$("#container_reports").hide();$("#container_folders").hide();$("#container_myreports").hide();$("#container_report_info").hide();$("#container_report_params").show();$("#container_report_name").hide();$("#container_report_params_visible").hide();$("#container_preview_ifr").hide();$("#container_preview").hide();break;case 5:$("#container_wizard").show();$("#container_reports").hide();$("#container_folders").hide();$("#container_myreports").hide();$("#container_report_info").hide();$("#container_report_params").hide();$("#container_report_name").show();$("#container_report_params_visible").hide();$("#container_preview_ifr").hide();$("#container_preview").hide();break;case 6:$("#container_wizard").show();$("#container_reports").hide();$("#container_folders").hide();$("#container_myreports").hide();$("#container_report_info").hide();$("#container_report_params").hide();$("#container_report_name").hide();$("#container_report_params_visible").show();$("#container_preview_ifr").hide();$("#container_preview").hide();break;case 7:$("#container_wizard").show();$("#container_reports").hide();$("#container_folders").hide();$("#container_myreports").hide();$("#container_report_info").hide();$("#container_report_params").hide();$("#container_report_name").hide();$("#container_report_params_visible").hide();$("#container_preview_ifr").hide();$("#container_preview").show();break;default:$("#container_wizard").show();$("#container_reports").show();$("#container_folders").hide();$("#container_myreports").show();$("#container_report_info").hide();$("#container_report_params").hide();$("#container_report_name").hide();$("#container_report_params_visible").hide();$("#container_preview_ifr").hide();$("#container_preview").hide()}console.log("Terminamos showContainers")}};var myReports={saveReport:function saveReport(){$.ajax({url:restServer+"newreport",data:JSON.stringify({app:myReport.app,identity:myReport.user_name,name:myReport.name,content:JSON.stringify(myReport)}),contentType:"application/json; charset=utf-8",type:"POST",success:function(a){location.reload()},error:function(a,b,c){alert(a.responseText+"  "+a.status)}})},getReports:function getReports(){$.ajax({url:restServer+"reports",data:JSON.stringify({app:myReport.app,identity:myReport.user_name}),contentType:"application/json; charset=utf-8",type:"POST",success:function(a){console.log(a);$("#container_myreports").empty();if(a){a.forEach(function(b){$("#container_myreports").append("<button type='button' class='btnmyreport' report-id='"+b.id+"' report-title='"+b.name+"' id='btn_"+b.id+"'>"+b.name+"</button>")})}},error:function(a,b,c){alert(a.responseText+"  "+a.status)}})},getReport:function getReport(a){$.ajax({url:restServer+"report",data:JSON.stringify({app:myReport.app,identity:myReport.user_name,id:a}),contentType:"application/json; charset=utf-8",type:"POST",success:function(b){console.log(b);myReport=JSON.parse(b);myReport.id=a;visualizeWizard.showContainers(7);visualizeWizard.previewReport(false)},error:function(b,c,d){alert(b.responseText+"  "+b.status)}})},deleteReport:function deleteReport(a){$.ajax({url:restServer+"remreport",data:JSON.stringify({app:myReport.app,identity:myReport.user_name,id:a}),contentType:"application/json; charset=utf-8",type:"POST",success:function(b){location.reload()},error:function(b,c,d){alert(b.responseText+"  "+b.status)}})}};function containderPreview_visualize(k,b,d,c,a){var g="";var j="";var f="";var h="";if(c){for(i=0;i<c.length;i++){j=j+"&"+c[i].name+"="+encodeURIComponent(c[i].value)}}if(a){for(i=0;i<a.length;i++){f=f+"&"+a[i].name+"="+encodeURIComponent(a[i].value)}}if(k=="reportUnit"){var e=d.split("/");for(i=0;i<e.length-1;i++){h+="/"+e[i]}g=b+"/flow.html?_flowId=viewReportFlow&standAlone=true&_flowId=viewReportFlow&ParentFolderUri="+encodeURIComponent(h)+"&reportUnit="+encodeURIComponent(d)+"&sessionDecorator=no"+f+j}else{g=b+"/dashboard/viewer.html#"+encodeURIComponent(d)+"&sessionDecorator=no"+f+j}$("#container_wizard").hide();$("#container_reports").hide();$("#container_folders").hide();$("#container_myreports").hide();$("#container_report_info").hide();$("#container_report_params").hide();$("#container_report_name").hide();$("#container_report_params_visible").hide();$("#container_preview").hide();$("#container_preview_ifr").show();$("#container_preview_ifr").attr("src",g)};