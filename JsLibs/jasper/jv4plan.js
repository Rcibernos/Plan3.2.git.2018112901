$("#JRViwerFiltrar").hide();visualize({auth:cnfgauth},function(m){var j;var k=b({container:"#DivJRViwer",linkOptions:{beforeRender:function(n){n.forEach(l)},events:{click:function(n,p){if(p.type=="ReportExecution"){n.stopPropagation();for(var o in p.parameters){if(o=="_report"){console.log("result converttoreportparams");console.log(c(p.parameters));g({resource:p.parameters._report,params:c(p.parameters)})}}}console.log(p)}}},error:function(n){alert(n.message)},success:function(){a()}});function f(o){var n;window.location.search.substr(1).split("&").forEach(function(p){if(o==p.split("=")[0]){n=p.split("=")[1]}});return n}function b(o){console.log(o);var n=e(location.href);if(!n.hasOwnProperty("resource")){n.resource=prmresource}o=_.extend(o,n);console.log("Report Properties:",o);if(f("resource")){j=m.report(o)}else{m.dashboard(o);$("#JRViwerFiltrar").hide()}return o}function c(n){return _.chain(n).pairs().map(function(p){var o=p[0],q=p[1];if(!_.isArray(q)){return[o,[q]]}return p}).object().value()}function e(p){var n=document.createElement("a");n.href=p;var q=n.search,o={};console.log(q);if(q){o=h(q)}console.log("result findReportProperties");console.log(o);return o}function g(p){var n=false,q=_.reduce(p,function(s,t,r){if(!n){s+="?";n=true}if(_.isObject(t)&&r=="params"){s=s+i(t)}else{s=s+r+"="+t+"&"}return s},location.href);console.log("Url to Open:",q);var o=q.replace("WFJRView.aspx","WFJRViewnw.aspx");window.open(o,"_blank")}function i(n){return _.pairs(n).reduce(function(o,p){var q=p[0],r=p[1];if(_.isArray(r)){o=r.reduce(function(s,t){return s+"params:"+q+"="+t+"&"},o)}else{o=o+"params:"+q+"="+r+"&"}return o},"")}function h(p){p=decodeURI(p);var o={};var n=p.split("?");p="?"+n[n.length-1];if(p&&!_.isEmpty(p)){o=p.substr("1",p.length).split("&").reduce(function(s,t){var q=t.split("="),r=q[0],v=q[1];if(r!="id"){if(s[r]){s[r].push(v)}else{if(r.indexOf("params:")==0){if(!s.params){s.params={}}var u=r.replace("params:","");if(!s.params[u]){s.params[u]=[]}s.params[u].push(v)}else{if(!_.isEmpty(r)){s[r]=v}}}}return s},{})}return o}function l(o){var n=o.element}function a(){if(f("resource")){d(j)}}function d(p){$("#JRViwerFiltrar").hide();$("#container_preview_params").html("");var n=true;m.inputControls({resource:p.resource,success:function(q){$.each(q,function(u,t){n=false;var v={id:t.id,label:t.label,type:t.type,options:[]};if("options" in t.state){$.each(t.state.options,function(){var A={label:this.label,value:this.value};v.options.push(A)})}var x=0;if(v.hasOwnProperty("options")){x=v.options.length}var r;var s;switch(v.type){case"singleSelect":case"singleSelectRadio":r="<select/>";s={id:v.id,name:v.id,type:"select-one","data-param-id":v.id};break;case"multiSelectCheckbox":case"multiSelect":r="<select/>";s={id:v.id,name:v.id,type:"select-multiple",multiple:"multiple","data-param-id":v.id};break;case"singleValueDatetime":case"singleValueDate":r="<input/>";s={id:v.id,name:v.id,label:v.label,type:"date","data-param-id":v.id};break;default:r="<input/>";s={id:v.id,type:v.type,"data-param-id":v.id}}var z="<label>{label}</label>",w=z.replace("{label}",v.label);$("#container_preview_params").append($(w));var y=$(r,s).appendTo("#container_preview_params");$("#container_preview_params").append("</br>");switch(v.type){case"singleSelect":case"singleSelectRadio":case"multiSelectCheckbox":case"multiSelect":$.each(v.options,function(){y.append($("<option />",{value:this.value,text:this.label}))});break}})}});function o(q){alert(q.message)}if(!n){$("#JRViwerFiltrar").show()}console.log("Terminamos displayReportLoad")}});